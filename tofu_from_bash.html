<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bash access to tofu &#8212; Tofu 1.4.10</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="tofu package" href="tofu.html" />
    <link rel="prev" title="Computing the integrated solid angle of a particle" href="auto_examples/tutorials/tuto_plot_solid_angles.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          tofu</a>
        <span class="navbar-text navbar-version pull-left"><b>1.4.10</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="installation.html">Installation</a></li>
                <li><a href="contributing.html">Contributing</a></li>
                <li><a href="auto_examples/index.html">Gallery</a></li>
                <li><a href="aboutus.html">About</a></li>
                <li><a href="releases.html">Releases</a></li>
                <li><a href="tofu.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to install tofu</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">A guide to contributing to tofu</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/tutorials/tuto_plot_gallery_fusion_machines.html">A list of all different device configurations available (ITER, WEST, JET, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Tutorials and examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using tofu from a bash terminal</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tofu.html">tofu package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.geom.html">tofu.geom package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.dumpro.html">tofu.dumpro package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.data.html">tofu.data package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.dust.html">tofu.dust package</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Bash access to tofu</a><ul>
<li><a class="reference internal" href="#tofuplot">tofuplot</a></li>
<li><a class="reference internal" href="#tofucalc">tofucalc</a></li>
<li><a class="reference internal" href="#tofu-custom">tofu-custom</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="bash-access-to-tofu">
<span id="command-line"></span><h1>Bash access to tofu<a class="headerlink" href="#bash-access-to-tofu" title="Permalink to this headline">¶</a></h1>
<p>tofu is a python library, and it through a python console that you’ll get the most of it.
However, it also provides a few bash commands to be used straight form the terminal.
These commands provide a quick and simple access to a few very common features of tofu.
So far they include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tofuplot"><span class="std std-ref">tofuplot</span></a>: for interactive plotting of data from IMAS</p></li>
<li><p><a class="reference internal" href="#tofucalc"><span class="std std-ref">tofucalc</span></a>: for computing and interactive plotting of synthetic data from IMAS</p></li>
<li><p><a class="reference internal" href="#tofu-custom"><span class="std std-ref">tofu-custom</span></a>: for setting-up your own tofu preferences</p></li>
</ul>
<div class="section" id="tofuplot">
<span id="id1"></span><h2>tofuplot<a class="headerlink" href="#tofuplot" title="Permalink to this headline">¶</a></h2>
<p>tofuplot is available only if IMAS is also installed on your environment.
In that case, the sub-package imas2tofu will be operational.
This sub-package provides an interface between tofu and IMAS, and allows,
among other things, to use tofu to plot experimental data stored in IMAS in
interactive figures.</p>
<p>This feature is typically used as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofuplot -s 54178 -i ece
</pre></div>
</div>
<p>The line above calls tofuplot with the following arguments:</p>
<ul class="simple">
<li><p>-s / –shot : the shot number of the imas data entry (here 54178)</p></li>
<li><p>-i / –ids  : the name of the ids we want to get data from (here ece)</p></li>
</ul>
<p>The ids names that can be used are diagnostic ids, they include:</p>
<ul class="simple">
<li><p>soft_x_rays</p></li>
<li><p>bolometer</p></li>
<li><p>interferometer</p></li>
<li><p>polarimeter</p></li>
<li><p>reflectometer_profile</p></li>
<li><p>barometry</p></li>
<li><p>spectrometer_visible</p></li>
<li><p>bremsstrahlung_visible</p></li>
</ul>
<p>Note that you can combine the plots from several ids in the same figure by
simply adding more ids (they will have common time axis):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofuplot -s 54178 -i ece soft_x_rays interferometer
</pre></div>
</div>
<p>In all cases, what tofuplot does is simply:</p>
<ul class="simple">
<li><p>read the tokamak geometry from ids wall</p></li>
<li><p>read the diagnostic geometry from the provided ids</p></li>
<li><p>compute the Lines of Sight (LOS)</p></li>
<li><p>read the diagnostic experimental data from the provided ids</p></li>
<li><p>display the data (time traces per LOS) and the geometry (tokamak + LOS) in an interactive figure</p></li>
</ul>
<p>There are many other parameters that can be specified, like in particular:</p>
<ul class="simple">
<li><p>-tok / –tokamak: the name of the tokamak of the imas data entry</p></li>
<li><p>-u / –user     : the user of the imas data entry</p></li>
<li><p>-t0 / –t0      : the name of the time event used as origin (can be a float)</p></li>
</ul>
<p>When a parameter is not specified, a default value is used.</p>
<p>For help on the other parameters, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofuplot --help
</pre></div>
</div>
<p>Here is an example of the interactive figure</p>
</div>
<div class="section" id="tofucalc">
<span id="id2"></span><h2>tofucalc<a class="headerlink" href="#tofucalc" title="Permalink to this headline">¶</a></h2>
<p>tofuplot simply reads and plot data.</p>
<p>By comparison, tofucalc also reads the diagnostics geometry,
but more importantly, it reads plasma profiles (1d radial profiles or 2d maps)
of the quantity of interest for the chosen diagnostic
(i.e.: electron density for interferometer, total radiated power for
bolometer…) and calculates the synthetic data of the
diagnostic (it performs the Line Of Sight integrationi of the quantity).
Finally, it displays the result in the same interactive figure as tofuplot.</p>
<p>Once you have understood the parameters of tofuplot, tofucalc is intuitive
as it requires the same input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofucalc -s 54178 -i interferometer
</pre></div>
</div>
<p>Note however, that tofucalc is available for a limited number of diagnostics.
Indeed, it requires pre-tabulating the quantity of interest for each ids and
implementing proper 2D interpolation methods for each type of profile.
So far, it is available for:</p>
<ul class="simple">
<li><p>interefreometer</p></li>
<li><p>polarimeter</p></li>
<li><p>bolometer</p></li>
<li><p>bremsstrhalung_visible</p></li>
</ul>
<p>Other diagnostics / ids will be added to this list as tofu is developped and
tested on WEST.</p>
<p>Also note that there is a default profile tabulated for each diagostics.
For example interferometer used the 1d electron density profile stored in ids
core_profiles.
But one could of course object that electron density can be stored as a 2D map
in another ids, produced, for example by a plasma edge code.
Computing synthetic data from an alternative source than the tabulated default
o ne is possible, but through the python console only as it requires a more
advanced use of the features offered by tofu.</p>
<p>For some specific users, an alternative way of providing the profiles has been
implemented: it is possible to pass the ids not by its identification
parameters (shot, user, tokamak, ids name…), but via an input file saved with
matlab (.mat).
The input file shall contain an exact representation of the ids.
Likewise, the result can be saved into a .mat output file.
This feature is only available for ids bremsstrahlung_visible so far and it
only the 1d radiation profile that is passed throught the input file.
The equilibrium (for interpolation) and diagnostic geometry are still read from
regular IMAS ids.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofucalc -s 54178 -i interferometer
</pre></div>
</div>
</div>
<div class="section" id="tofu-custom">
<span id="id3"></span><h2>tofu-custom<a class="headerlink" href="#tofu-custom" title="Permalink to this headline">¶</a></h2>
<p>tofu used a lot of default parameters, such that providing no parameter at all
is ok when using most method / functions.
However, you may want to customize some of these default parameters to better
suit your usage or liking.</p>
<p>If tofu is installed on a shared cluster, you can’t access tofu’s default
parametersas modifying them would also affect everybody else’s usage.</p>
<p>In order to allow for user-specific customization, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tofu-custom
</pre></div>
</div>
<p>This will create a .tofu/ directory in your home (~/), in which tofu will copy
default parameters and data that you are free to edit.
This local copy is thus user-specific and will always have precedence when
importing tofu.</p>
<p>Not all parameters can be customized, and this effort is on-going, but to,
as of tofu 1.4.3, you can edit:</p>
<ul class="simple">
<li><p>the imas shortcuts in _imas2tofu-def.py</p></li>
<li><p>the default parameters of tofuplot and tofcalc in _scripts_def.py</p></li>
</ul>
<p>Other parameters will be available for customization in future versions.</p>
<p>This hidden directory also holds a openadas2tofu/ sub-directory where all data
downloaded by tofu from <a class="reference external" href="https://open.adas.ac.uk/">openadas</a>
(a free online atomic database) is stored.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/tofu_from_bash.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2016-2021, Tofu contributors.<br/>
      Last updated on Jun 29, 2021.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>