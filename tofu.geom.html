<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>tofu.geom package &#8212; Tofu 1.4.15</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="tofu.openadas2tofu package" href="tofu.openadas2tofu.html" />
    <link rel="prev" title="tofu.entrypoints package" href="tofu.entrypoints.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          tofu</a>
        <span class="navbar-text navbar-version pull-left"><b>1.4.15</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="installation.html">Installation</a></li>
                <li><a href="contributing.html">Contributing</a></li>
                <li><a href="auto_examples/index.html">Gallery</a></li>
                <li><a href="aboutus.html">About</a></li>
                <li><a href="releases.html">Releases</a></li>
                <li><a href="tofu.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">How to install tofu</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">A guide to contributing to tofu</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/tutorials/tuto_plot_gallery_fusion_machines.html">A list of all different device configurations available (ITER, WEST, JET, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto_examples/index.html">Tutorials and examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu_from_bash.html">Using tofu from a bash terminal</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tofu.html">tofu package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">tofu.geom package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.dumpro.html">tofu.dumpro package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.data.html">tofu.data package</a></li>
<li class="toctree-l1"><a class="reference internal" href="tofu.dust.html">tofu.dust package</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">tofu.geom package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-tofu.geom._GG">tofu.geom._GG module</a></li>
<li><a class="reference internal" href="#id1">tofu.geom._GG module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._basic_geom_tools">tofu.geom._basic_geom_tools module</a></li>
<li><a class="reference internal" href="#id46">tofu.geom._basic_geom_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._comp">tofu.geom._comp module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._comp_optics">tofu.geom._comp_optics module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._comp_solidangles">tofu.geom._comp_solidangles module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._core">tofu.geom._core module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._core_optics">tofu.geom._core_optics module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._def">tofu.geom._def module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._def_config">tofu.geom._def_config module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._distance_tools">tofu.geom._distance_tools module</a></li>
<li><a class="reference internal" href="#id47">tofu.geom._distance_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._openmp_tools">tofu.geom._openmp_tools module</a></li>
<li><a class="reference internal" href="#id48">tofu.geom._openmp_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._plot">tofu.geom._plot module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._plot_optics">tofu.geom._plot_optics module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._raytracing_tools">tofu.geom._raytracing_tools module</a></li>
<li><a class="reference internal" href="#id50">tofu.geom._raytracing_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._sampling_tools">tofu.geom._sampling_tools module</a></li>
<li><a class="reference internal" href="#id51">tofu.geom._sampling_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom._vignetting_tools">tofu.geom._vignetting_tools module</a></li>
<li><a class="reference internal" href="#id54">tofu.geom._vignetting_tools module</a></li>
<li><a class="reference internal" href="#module-tofu.geom.openmp_enabled">tofu.geom.openmp_enabled module</a></li>
<li><a class="reference internal" href="#module-tofu.geom.utils">tofu.geom.utils module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="module-tofu.geom">
<span id="tofu-geom-package"></span><h1>tofu.geom package<a class="headerlink" href="#module-tofu.geom" title="Permalink to this headline">¶</a></h1>
<p>The geometry module of tofu</p>
<p>Provides classes to model the 3D geometry of:
* the vacuum vessel and structural elements
* LOS
* apertures and detectors</p>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-tofu.geom._GG">
<span id="tofu-geom-gg-module"></span><h2>tofu.geom._GG module<a class="headerlink" href="#module-tofu.geom._GG" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.ConvertImpact_Theta2Xi">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">ConvertImpact_Theta2Xi</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.ConvertImpact_Theta2Xi" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.Dust_calc_SolidAngle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Dust_calc_SolidAngle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.Dust_calc_SolidAngle" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the solid angle of a moving particle of varying radius as seen
from any number of pixed points</p>
<p>Can be done w/o the approximation that r&lt;&lt;d
If Ves (and optionally LSPoly) are provided, takes into account vignetting</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_Calc_PInOut_VesStruct">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_Calc_PInOut_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_Calc_PInOut_VesStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the entry and exit point of all provided LOS for the provided
vessel polygon (toroidal or linear) with its associated structures.
Return the normal vector at impact and the index of the impact segment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ray_orig</strong> (<em>(</em><em>3</em><em>, </em><em>nlos</em><em>) </em><em>double array</em>) – LOS origin points coordinates</p></li>
<li><p><strong>ray_vdir</strong> (<em>(</em><em>3</em><em>, </em><em>nlos</em><em>) </em><em>double array</em>) – LOS normalized direction vector</p></li>
<li><p><strong>ves_poly</strong> (<em>(</em><em>2</em><em>, </em><em>num_vertex</em><em>) </em><em>double array</em>) – Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the Vessel</p></li>
<li><p><strong>ves_norm</strong> (<em>(</em><em>2</em><em>, </em><em>num_vertex-1</em><em>) </em><em>double array</em>) – Normal vectors going “inwards” of the edges of the Polygon defined
by ves_poly</p></li>
<li><p><strong>nstruct_tot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Total number of structures (counting each limited structure as one)</p></li>
<li><p><strong>ves_lims</strong> (<em>array</em>) – Contains the limits min and max of vessel</p></li>
<li><p><strong>lstruct_polyx</strong> (<em>array</em>) – List of x coordinates of the vertices of all structures on poloidal plane
If no structures : None</p></li>
<li><p><strong>lstruct_polyy</strong> (<em>array</em>) – List of y coordinates of the vertices of all structures on poloidal plane
If no structures : None</p></li>
<li><p><strong>lstruct_lims</strong> (<em>array</em>) – List of limits of all structures
If no structures : None</p></li>
<li><p><strong>lstruct_nlim</strong> (<em>array of ints</em>) – List of number of limits for all structures
If no structures : None</p></li>
<li><p><strong>lstruct_normx</strong> (<em>array</em>) – List of x coordinates of “inwards” normal vectors of the polygon of all
the structures
If no structures : None</p></li>
<li><p><strong>lstruct_normy</strong> (<em>array</em>) – List of y coordinates of “inwards” normal vectors of the polygon of all
the structures
If no structures : None</p></li>
<li><p><strong>rmin</strong> (<em>double</em>) – Minimal radius of vessel to take into consideration</p></li>
<li><p><strong>eps_&lt;val&gt;</strong> (<em>double</em>) – Small value, acceptance of error</p></li>
<li><p><strong>ves_type</strong> (<em>string</em>) – Type of vessel (“Tor” or “Lin”)</p></li>
<li><p><strong>forbid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Should we forbid values behind visible radius ? (see rmin)</p></li>
<li><p><strong>test</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Should we run tests ?</p></li>
<li><p><strong>num_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The num_threads argument indicates how many threads the team should
consist of. If not given, OpenMP will decide how many threads to use.
Typically this is the number of cores available on the machine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>coeff_inter_in</strong> (<em>(nlos) array</em>) – scalars level of “in” intersection of the LOS (if k=0 at origin)</p></li>
<li><p><strong>coeff_inter_out</strong> (<em>(nlos) array</em>) – scalars level of “out” intersection of the LOS (if k=0 at origin)</p></li>
<li><p><strong>vperp_out</strong> (<em>(3, nlos) array</em>) – Coordinates of the normal vector of impact of the LOS (NaN if none)</p></li>
<li><p><strong>ind_inter_out</strong> (<em>(3, nlos)</em>) – Index of structure impacted by LOS: ind_inter_out[:,ind_los]=(i,j,k)
where k is the index of edge impacted on the j-th sub structure of the
structure number i. If the LOS impacted the vessel i=j=0</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_Calc_kMinkMax_VesStruct">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_Calc_kMinkMax_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_Calc_kMinkMax_VesStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the entry and exit point of all provided LOS for the provided
polygons (toroidal or linear)  of IN structures (non-solid, or <cite>empty</cite>
inside for the LOS).
Attention: the surfaces can be limited, but they all have to have the
same limits defined by (ves_lims)
Return the set of kmin / kmax for each In struct and for each LOS</p>
<dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>num_surf<span class="classifier">int</span></dt><dd><p>number of surfaxes, aka ‘in’ structures or ‘vessels’</p>
</dd>
<dt>ves_poly<span class="classifier">(num_surf, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the <cite>in</cite> structures</p>
</dd>
<dt>ves_norm<span class="classifier">(num_surf, 2, num_vertex-1) double array</span></dt><dd><p>Normal vectors going “inwards” of the edges of the Polygon defined
by ves_poly</p>
</dd>
<dt>ves_lims<span class="classifier">array</span></dt><dd><p>Contains the limits min and max of vessel</p>
</dd>
<dt>rmin<span class="classifier">double</span></dt><dd><p>Minimal radius of vessel to take into consideration</p>
</dd>
<dt>eps&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
<dt>vtype<span class="classifier">string</span></dt><dd><p>Type of vessel (“Tor” or “Lin”)</p>
</dd>
<dt>forbid<span class="classifier">bool</span></dt><dd><p>Should we forbid values behind visible radius ? (see rmin)</p>
</dd>
<dt>test<span class="classifier">bool</span></dt><dd><p>Should we run tests ?</p>
</dd>
<dt>num_threads<span class="classifier">int</span></dt><dd><p>The num_threads argument indicates how many threads the team should
consist of. If not given, OpenMP will decide how many threads to use.
Typically this is the number of cores available on the machine.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>coeff_inter_in</strong> (<em>(num_surf, nlos) array</em>) – scalars level of “in” intersection of the LOS (if k=0 at origin) for
each surface
[kmin(surf0, los0), kmin(surf0, los1), …, kmin(surf1, los0),….]</p></li>
<li><p><strong>coeff_inter_out</strong> (<em>(num_surf, nlos) array</em>) – scalars level of “out” intersection of the LOS (if k=0 at origin) for
each surface
[kmax(surf0, los0), kmax(surf0, los1), …, kmax(surf1, los0),….]</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_areVis_PtsFromPts_VesStruct">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_areVis_PtsFromPts_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_areVis_PtsFromPts_VesStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of booleans indicating whether each point in pts1 can see
each point in pts2 considering vignetting a given
configuration.</p>
<blockquote>
<div><p>pts1 : (3, npts1) cartesian coordinates of viewing points
pts2 : (3, npts2) cartesian coordinates of points to check if viewable
dist : optional argument : distance between the points pts1, pts2
ves_* : vessel descriptors (poly, norm, limits)
lstruct_* : config’s structure descriptors (poly, limits, norms,</p>
<blockquote>
<div><p>number of structures, …)</p>
</div></blockquote>
<p>eps_* : values of precision in each direction
forbid : boolean if true forbids checking “behind” the tokamak
test : boolean check if input is valid or not
num_threads : number of threads for parallelization</p>
</div></blockquote>
<dl>
<dt>Output:</dt><dd><dl>
<dt>are_seen: (npts1, npts2) array of ints indicating if viewing points pts1</dt><dd><p>can see the other points pts2.
are_seen[i,j] = 1 if pts1[i] sees point pts2[j]</p>
<blockquote>
<div><p>0 else</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_calc_signal">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_calc_signal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_calc_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the synthetic signal, minimizing either function calls or memory
Params
=====
func : python function st. func(pts, t=None, vect=None) =&gt; data</p>
<blockquote>
<div><dl class="simple">
<dt>with pts<span class="classifier">ndarray (3, npts) - points where function is evaluated</span></dt><dd><p>vect : ndarray(3, npts) - if anisotropic signal vector of emiss.
t: ndarray(m) - times where to compute the function</p>
</dd>
<dt>returns: data<span class="classifier">ndarray(nt,nraf) if nt = 1, the array must be 2D</span></dt><dd><p>values of func at pts, at given time</p>
</dd>
</dl>
<p>func is the function to be integrated along the LOS</p>
</div></blockquote>
<p>ray_orig: ndarray (3, nlos) LOS origins
ray_vdir: ndarray (3, nlos) LOS directional vector
res: double or list of doubles</p>
<blockquote>
<div><p>If res is a single double: discretization step for all LOS.
Else res should be a list of size nlos with the discretization
step for each nlos.</p>
</div></blockquote>
<dl class="simple">
<dt>lims: (2, nlos) double array</dt><dd><p>For each nlos, it given the maximum and minimum limits of the ray</p>
</dd>
<dt>dmethod: string</dt><dd><p>type of discretization step: ‘abs’ for absolute or ‘rel’ for relative</p>
</dd>
<dt>method: string</dt><dd><p>method of quadrature on the LOS</p>
</dd>
<dt>ani<span class="classifier">bool</span></dt><dd><p>to indicate if emission is anisotropic or not</p>
</dd>
<dt>t<span class="classifier">None or array-like</span></dt><dd><p>times where to integrate</p>
</dd>
<dt>minimize: string</dt><dd><p>“calls” : we use algorithm to minimize the calls to ‘func’ (default)
“memory”: we use algorithm to minimize memory used
“hybrid”: a mix of both methods</p>
</dd>
<dt>Test<span class="classifier">bool</span></dt><dd><p>we test if the inputs are giving in a proper way.</p>
</dd>
<dt>num_threads: int</dt><dd><p>number of threads if we want to parallelize the code.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_get_sample">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_get_sample</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_get_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sampled line, with the specified method
-   ‘sum’ :     return N segments centers
-   ‘simps’:    return N+1 egdes, N even (for scipy.integrate.simps)
-   ‘romb’ :    return N+1 edges, N+1 = 2**k+1 (for scipy.integrate.romb)</p>
<blockquote>
<div><p>The dmethod defines if the discretization step given is absolute (‘abs’)
or relative (‘rel’)</p>
</div></blockquote>
<dl class="simple">
<dt>dL: double or list of doubles</dt><dd><p>If dL is a single double: discretization step for all LOS.
Else dL should be a list of size nlos with the discretization
step for each nlos.</p>
</dd>
<dt>los_lims: (2, nlos) double array</dt><dd><p>For each nlos, it given the maximum and minimum limits of the ray</p>
</dd>
<dt>dmethod: string</dt><dd><p>type of discretization step: ‘abs’ for absolute or ‘rel’ for relative</p>
</dd>
<dt>method: string</dt><dd><p>method of quadrature on the LOS</p>
</dd>
<dt>Test: bool</dt><dd><p>to indicate if tests should be done or not</p>
</dd>
</dl>
<p>k, res, lind = Los_get_sample(…)
nbrepet = np.r_[lind[0], np.diff(lind), k.size - lind[-1]]
kus = k * np.repeat(ray_vdir, nbrepet, axis=1)
Pts = np.repeat(ray_orig, nbrepet, axis=1) + kus</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_isVis_PtFromPts_VesStruct">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_isVis_PtFromPts_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_isVis_PtFromPts_VesStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of booleans indicating whether each point in pts is
visible from the point P = [pt0, pt1, pt2] considering vignetting a given
configuration.</p>
<blockquote>
<div><p>pt0 : x - coordinate of the viewing point P
pt1 : y - coordinate of the viewing point P
pt2 : z - coordinate of the viewing point P
pts : (3, npts) cartesian coordinates of points to check if viewable
dist : optional argument : distance between points and P
ves_* : vessel descriptors (poly, norm, limits)
lstruct_* : config’s structure descriptors (poly, limits, norms,</p>
<blockquote>
<div><p>number of structures, …)</p>
</div></blockquote>
<p>eps_* : values of precision in each direction
forbid : boolean if true forbids checking “behind” the tokamak
test : boolean check if input is valid or not
num_threads : number of threads for parallelization</p>
</div></blockquote>
<dl>
<dt>Output:</dt><dd><dl>
<dt>is_seen: (npts1) array of ints indicating if viewing point P</dt><dd><p>can see the other points pts.
is_seen[i] = 1 if P sees point pts[i]</p>
<blockquote>
<div><p>0 else</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_sino">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_sino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_sino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.LOS_sino_findRootkPMin_Tor">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_sino_findRootkPMin_Tor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.LOS_sino_findRootkPMin_Tor" title="Permalink to this definition">¶</a></dt>
<dd><p>Rendre “vectoriel” sur LOS et sur les cercles (deux boucles “for”)
intersection ligne et cercle
double uParN : composante de u parallel au plan (x,y)</p>
<blockquote>
<div><p>double uN : uz
double Sca : ??? produit scalaire … ?
double RZ0 : Grand rayon du cercle
double RZ1 : Z
=&gt; cercle est centré au point (0, 0, RZ1) et rayon RZ0
double ScaP : …. ?
double DParN : D origine de LOS…. ? N =&gt; norme de la composante du vecteur OD
double kOut : kmax où on peut trouver un résultat
double D0, double D1, double D2 : composantes de D (origine LOS)
double u0, double u1, double u2 : composantes de U (direction LOS)
str Mode=’LOS’ : si LOS pas de sol après kmax)</p>
</div></blockquote>
<p>::: Faire une fonction double mais qui renvoit QUE un tableau de bool avec true si
la distance est plus petite qu’un certain eps, false sinon.
TODO: ……….. &#64;LM</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.Poly_VolAngTor">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Poly_VolAngTor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.Poly_VolAngTor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.Poly_isClockwise">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Poly_isClockwise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.Poly_isClockwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming 2D closed Poly !
<a class="reference external" href="http://www.faqs.org/faqs/graphics/algorithms-faq/">http://www.faqs.org/faqs/graphics/algorithms-faq/</a>
Find the lowest vertex (or, if there is more than one vertex with
the same lowest coordinate, the rightmost of those vertices) and then
take the cross product of the edges before and after it.
Both methods are O(n) for n vertices, but it does seem a waste to add up
the total area when a single cross product (of just the right edges)
suffices.  Code for this is available at
<a class="reference external" href="ftp://cs.smith.edu/pub/code/polyorient.C">ftp://cs.smith.edu/pub/code/polyorient.C</a> (2K).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.Sino_ImpactEnv">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Sino_ImpactEnv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.Sino_ImpactEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes impact parameters of a Tor enveloppe
(a <cite>Tor</cite> is a closed 2D polygon)</p>
<p>D. VEZINET, Aug. 2014
:param RZ: (2,) array indicating the reference impact point
:type RZ: np.ndarray
:param Poly: (2,N) array containing the coordinatesof a closed polygon
:type Poly: np.ndarray
:param NP: Number of indicating the number of points used for discretising theta between 0 and pi
:type NP: int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>theta</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_Lin_SubFromD_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Lin_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_Lin_SubFromD_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dL)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_Lin_SubFromInd_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Lin_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_Lin_SubFromInd_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by ind,
for the desired resolution (dX,dL)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_TorStruct_SubFromD_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_TorStruct_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_TorStruct_SubFromD_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_TorStruct_SubFromInd_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_TorStruct_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_TorStruct_SubFromInd_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi)
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_Tor_SubFromD_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Tor_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_Tor_SubFromD_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi)
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Smesh_Tor_SubFromInd_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Tor_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Smesh_Tor_SubFromInd_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Lin_SubFromD_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Lin_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Lin_SubFromD_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dY,dZ)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Lin_SubFromInd_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Lin_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Lin_SubFromInd_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dY,dZ)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Tor_SubFromD_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Tor_SubFromD_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the desired submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (rstep,zstep,dRphi).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> (<em>phistep</em>) – </p></li>
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> – </p></li>
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> – </p></li>
<li><p><strong>RMinMax</strong> (array specifying the limits min and max in <cite>r</cite>) – </p></li>
<li><p><strong>ZMinMax</strong> (array specifying the limits min and max in <cite>z</cite>) – </p></li>
<li><p><strong>DR</strong> (array specifying the actual sub-volume limits to get in <cite>r</cite>) – </p></li>
<li><p><strong>DZ</strong> (array specifying the actual sub-volume limits to get in <cite>z</cite>) – </p></li>
<li><p><strong>DPhi</strong> (array specifying the actual sub-volume limits to get in <cite>phi</cite>) – </p></li>
<li><p><strong>limit_vpoly</strong> (array-like defining the <cite>(R,Z)</cite> coordinates of the poloidal) – cut of the limiting flux surface</p></li>
<li><p><strong>out_format</strong><strong>(</strong><strong>string</strong><strong>)</strong> (<em>either &quot;</em><em>(</em><em>X</em><em>,</em><em>Y</em><em>,</em><em>Z</em><em>)</em><em>&quot;</em><em> or </em><em>&quot;</em><em>(</em><em>R</em><em>,</em><em>Z</em><em>,</em><em>Phi</em><em>)</em><em>&quot; for cartesian or</em>) – polar coordinates</p></li>
<li><p><strong>margin</strong><strong>(</strong><strong>double</strong><strong>)</strong> (<em>tolerance error.</em>) – Defaults to <a href="#id55"><span class="problematic" id="id56">|_VSMALL|</span></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pts</strong> (<em>(3, npts) array in out_format (cartesian or polar) of</em>) – discretized volume</p></li>
<li><p><strong>res3d</strong> (<em>(npts) resolution on each point</em>)</p></li>
<li><p><strong>ind</strong> (<em>(npts) indices to reconstruct the points in 3D (useful only if</em>) – limit_vpoly is not none)</p></li>
<li><p><strong>reso_r</strong> (<em>(double) resolution on r (constant)</em>)</p></li>
<li><p><strong>reso_z</strong> (<em>(double) resolution on z (constant)</em>)</p></li>
<li><p><strong>reso_phi</strong> (<em>(sz_r) array, resolution R*dPhi, phi resolution on each R</em>)</p></li>
<li><p><strong>sz_r</strong> (<em>(int) number of points in r</em>)</p></li>
<li><p><strong>sz_z</strong> (<em>(int) number of points in z</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Tor_SubFromD_cython_old">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromD_cython_old</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Tor_SubFromD_cython_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Tor_SubFromInd_cython">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Tor_SubFromInd_cython" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (rstep, zstep, phistep)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_Vmesh_Tor_SubFromInd_cython_old">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromInd_cython_old</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_Vmesh_Tor_SubFromInd_cython_old" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_isInside">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_isInside</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_isInside" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if points Pts are in vessel VPoly.
VPoly should be CLOSED</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG._Ves_meshCross_FromInd">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_meshCross_FromInd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG._Ves_meshCross_FromInd" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.comp_dist_los_circle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_circle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.comp_dist_los_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the intersection of a Ray (or Line Of Sight)
and a circle in 3D. It returns <cite>kmin</cite> and <cite>dist</cite>. Where <cite>kmin</cite> is the
coefficient such that the ray of origin O = [ori1, ori2, ori3]
and of directional vector D = [dir1, dir2, dir3] is closest to the circle</p>
<blockquote>
<div><p>of radius <cite>radius</cite> and centered <cite>(0, 0, circ_z)</cite> at the point</p>
</div></blockquote>
<p>P = O + kmin * D.
And <cite>distance</cite> the distance between the two closest points (line closest
and circle closest)
The variable <cite>norm_dir</cite> is the squared norm of the direction of the ray.
Params
=====
ray_vdir: (3) double array</p>
<blockquote>
<div><p>ray’s director vector V such that P in Ray iff P(t) = O + t*V</p>
</div></blockquote>
<dl class="simple">
<dt>ray_orig<span class="classifier">(3) double array</span></dt><dd><p>ray’s origin coordinates O such that P in Ray iff P(t) = O + t*V</p>
</dd>
<dt>radius<span class="classifier">double</span></dt><dd><p>radius r of horizontal circle centered in (0,0,circ_z)</p>
</dd>
<dt>circ_z<span class="classifier">double</span></dt><dd><p>3rd coordinate of horizontal circle centered in (0,0,circ_z) of radius r</p>
</dd>
<dt>norm_dir<span class="classifier">double (optional)</span></dt><dd><p>If for computation reasons it makes sense, you can pass the norm of the
director vector</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul>
<li><p><strong>result</strong> (<em>double (2) array</em>) –</p>
<ul class="simple">
<li><p>result[0] will contain the k coefficient to find the line point closest</p></li>
</ul>
<p>closest point
- result[1] will contain the DISTANCE from line closest point to circle
to the circle</p>
</li>
<li><p><em>—</em></p></li>
<li><p><em>This is the PYTHON function, use only if you need this computation from</em></p></li>
<li><p>Python, if you need it from cython, use <cite>dist_los_circle_core</cite></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.comp_dist_los_circle_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_circle_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.comp_dist_los_circle_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the intersection of a Ray (or Line Of Sight)
and a circle in 3D. It returns <cite>kmin</cite>, the coefficient such that the
ray of origin O = [ori1, ori2, ori3] and of directional vector
D = [dir1, dir2, dir3] is closest to the circle of radius <cite>radius</cite>
and centered <cite>(0, 0, circ_z)</cite> at the point P = O + kmin * D.
The variable <cite>norm_dir</cite> is the squared norm of the direction of the ray.
This is the vectorial version, we expect the directions and origins to be:
dirs = [[dir1_los1, dir2_los1, dir3_los1], [dir1_los2,…]
oris = [[ori1_los1, ori2_los1, ori3_los1], [ori1_los2,…]
:returns: * <strong>res</strong> (<em>(2, nlos, ncircles)</em>) – res = [res_k, res_d] where res_k is a (nlos, ncircles) numpy array</p>
<blockquote>
<div><blockquote>
<div><p>with the k coefficients for each LOS where the minimum distance
to each circle is reached
is met for each circle, and res_d is a (nlos, ncircles) numpy array
with the distance between each LOS to each circle</p>
</div></blockquote>
<ul class="simple">
<li><p><em>—</em></p></li>
<li><p><em>This is the PYTHON function, use only if you need this computation from</em></p></li>
<li><p>Python, if you need it from cython, use <cite>dist_los_circle_core</cite></p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.comp_dist_los_vpoly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_vpoly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.comp_dist_los_vpoly" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the distance (and the associated k) between nlos
Rays (or LOS) and an <cite>IN</cite> structure (a polygon extruded around the axis
(0,0,1), eg. a flux surface).
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the Vessel</p>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>kmin_vpoly</strong> (<em>(nlos) double array</em>) – Of the form [k_0, k_1, …, k_n], where k_i is the coefficient
such that the i-th ray (LOS) is closest to the extruded polygon
at the point P_i = orig[i] + kmin[i] * vdir[i]</p></li>
<li><p><strong>dist_vpoly</strong> (<em>(nlos) double array</em>) – <cite>distance[i]</cite> is the distance from P_i to the extruded polygon.</p></li>
</ul>
</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>simple_dist_los_vpoly_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.comp_dist_los_vpoly_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.comp_dist_los_vpoly_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the distance (and the associated k) between nlos
Rays (or LOS) and several <cite>IN</cite> structures (polygons extruded around the axis
(0,0,1), eg. flux surfaces).
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>from inner to outer</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>kmin_vpoly</strong> (<em>(npoly, nlos) double array</em>) – Of the form [k_00, k_01, …, k_0n, k_10, k_11, …, k_1n, …]
where k_ij is the coefficient for the j-th flux surface
such that the i-th ray (LOS) is closest to the extruded polygon
at the point P_i = orig[i] + kmin[i] * vdir[i]</p></li>
<li><p><strong>dist_vpoly</strong> (<em>(npoly, nlos) double array</em>) – <cite>distance[i * num_poly + j]</cite> is the distance from P_i to the i-th
extruded poly.</p></li>
</ul>
</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>comp_dist_los_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.coord_shift">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">coord_shift</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.coord_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the shape of an array of points coordinates and/or converts from
2D to 3D, 3D to 2D, cylindrical to cartesian…
(CrossRef is an angle (Tor) or a distance (X for Lin))</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.discretize_line1d">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_line1d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.discretize_line1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretize a 1D segment LMin-LMax. If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else, if <cite>mode</cite>
is “rel” (relative), the meshing step is relative to the segments norm (ie.
the actual discretization step will be (LMax - LMin)/dstep).
It is possible to only one to discretize the segment on a sub-domain. If so,
the sub-domain limits are given in DL.
:param LMinMax: Gives the limits LMin and LMax of the segment. LMinMax = [LMin, LMax]
:type LMinMax: (2)-double array
:param dstep: Step of discretization, can be absolute (default) or relative
:type dstep: double
:param DL: Sub domain of discretization. If not None and if Lim, LMinMax = DL</p>
<blockquote>
<div><p>(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Lim</strong> (<em>(</em><em>optional</em><em>) </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Indicated if the subdomain should be taken into account</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm
(the actual discretization step will be (LMax - LMin)/dstep).</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ldiscret</strong> (<em>double array</em>) – array of the discretized coordinates on the segment of desired limits</p></li>
<li><p><strong>resolution</strong> (<em>double</em>) – step of discretization</p></li>
<li><p><strong>lindex</strong> (<em>int array</em>) – array of the indices corresponding to ldiscret with respects to the
original segment LMinMax (if no DL, from 0 to N-1)</p></li>
<li><p><strong>N</strong> (<em>int64</em>) – Number of points on LMinMax segment</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.discretize_segment2d">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_segment2d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.discretize_segment2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretizes a 2D segment where the 1st coordinates are defined in LMinMax1
and the second ones in LMinMax2. The refinement in x is defined by dstep1,
and dstep2 defines the resolution on y.
Optionnally you can give a VPoly to which the discretized in which the
segment has to be included.
This function is basically a generalization of discretize_line1d.
:param LMinMax1: Gives the limits LMin and LMax of the x coordinates of the segment.</p>
<blockquote>
<div><p>LMinMax1 = [xmin, xmax]</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>LMinMax2</strong> (<em>(</em><em>2</em><em>)</em><em>-double array</em>) – Gives the limits LMin and LMax of the y coordinates of the segment.
LMinMax2 = [ymin, ymax]</p></li>
<li><p><strong>dstep2</strong> (<em>dstep1 or</em>) – Step of discretization, can be absolute (default) or relative</p></li>
<li><p><strong>D2</strong> (<em>D1 or</em>) – Sub domain of discretization. If not None and if Lim, LMinMax = DL
(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm
(the actual discretization step will be (LMax - LMin)/dstep).</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
<li><p><strong>VPoly</strong> (<em>(</em><em>optional</em><em>) </em><em>2d double array</em>) – If present, we check that the discretized segment is included in the
path defined by VPoly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ldiscret</strong> (<em>double 2d array</em>) – array of the discretized coordinates on the segment of desired limits</p></li>
<li><p><strong>resolution</strong> (<em>double array</em>) – step of discretization on 2d (typically resolution-on-x*resolution-on-y)</p></li>
<li><p><strong>lindex</strong> (<em>int array</em>) – array of the indices corresponding to ldiscret with respects to the
original segment LMinMax (if no DL, from 0 to N-1)</p></li>
<li><p><strong>resol1</strong> (<em>double</em>) – Smallest resolution on x</p></li>
<li><p><strong>resol2</strong> (<em>double</em>) – Smallest resolution on y</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.discretize_vpoly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_vpoly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.discretize_vpoly" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretizes a VPoly (2D polygon of a cross section in (R,Z) coordinates).
The refinement on R and Z is defined dL.
Optionnally you can give a coefficient (DIn) and the normal vectors going
inwards the VPoly (VIn), and the result will be slightly shifted inwards
(or outwards if DIn&lt;0) of DIn*VIn.
:param VPoly: Coordinates of the vertices of the Polygon defining the 2D poloidal</p>
<blockquote>
<div><p>cut of the Vessel</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dL</strong> (<em>double</em>) – Step of discretization, can be absolute (default) or relative</p></li>
<li><p><strong>D2</strong> (<em>D1 or</em>) – Sub domain of discretization.
(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>return PtsCross, resol, ind_arr, N_arr, Rref_arr, VPolybis</em></p></li>
<li><p><strong>PtsCross</strong> (<em>double 2d array</em>) – array of the discretized coordinates of the VPoly</p></li>
<li><p><strong>resol</strong> (<em>double 1d array</em>) – step of discretization on 2d</p></li>
<li><p><strong>ind_arr</strong> (<em>int  1d array</em>) – array of the indices corresponding to ldiscret with respects to the
original VPoly</p></li>
<li><p><strong>N_arr</strong> (<em>int 1d array</em>) – number of cells on each segment of the VPoly</p></li>
<li><p><strong>Rref_arr</strong> (<em>double 1d array</em>) – reference Radius coordinates, not shifted even if DIn &lt;&gt; 0.
If DIn == 0, then Rref_arr = PtsCross[0, …]</p></li>
<li><p><em>VPolybis</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.integrate1d">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">integrate1d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.integrate1d" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic integration method [‘sum’,’simps’,’romb’]</p>
<p>Not used internally
Useful when the sampling points need to be interpolated via equilibrium</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.is_close_los_circle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_circle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.is_close_los_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if at maximum a LOS is at a distance epsilon
form a cirlce
The result is True when distance &lt; epsilon
—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_los_close_circle_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.is_close_los_circle_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_circle_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.is_close_los_circle_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if at maximum a LOS is at a distance epsilon
form a cirlce. Vectorial version
The result is True when distance &lt; epsilon
—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_los_close_circle_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.is_close_los_vpoly_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.is_close_los_vpoly_vec" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tests if the distance between nlos Rays (or LOS) and
several <cite>IN</cite> structures (polygons extruded around the axis (0,0,1),
eg. flux surfaces) is smaller than <cite>epsilon</cite>.
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>epsilon<span class="classifier">double</span></dt><dd><p>Value for testing if distance &lt; epsilon</p>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>are_close</strong> (<em>(npoly * nlos) bool array</em>) – <cite>are_close[i * num_poly + j]</cite> indicates if distance between i-th LOS
and j-th poly are closer than epsilon. (True if distance&lt;epsilon)</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_close_los_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.poly_area">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">poly_area</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.poly_area" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.poly_area_and_barycenter">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">poly_area_and_barycenter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.poly_area_and_barycenter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.triangulate_by_earclipping">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">triangulate_by_earclipping</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.triangulate_by_earclipping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.vignetting">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">vignetting</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.vignetting" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>vignett_poly<span class="classifier">(num_vign, 3, num_vertex) double list of arrays</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 3D vignett.
POLY CLOSED</p>
</dd>
<dt>lnvert<span class="classifier">(num_vign) long array</span></dt><dd><p>Number of vertices for each vignett (without counting the rebound)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>goes_through</strong> (<em>(num_vign, nlos) bool array</em>) – Indicates for each vignett if each LOS wents through or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.which_los_closer_vpoly_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">which_los_closer_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.which_los_closer_vpoly_vec" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ind_close_los</strong> (<em>(npoly) int array</em>) – Of the form [ind_0, ind_1, …, ind_(npoly-1)]
where ind_i is the coefficient for the i-th flux surface
such that the ind_i-th ray (LOS) is closest to the extruded polygon
among all other LOS without going over it.</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>which_los_closer_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._GG.which_vpoly_closer_los_vec">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">which_vpoly_closer_los_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._GG.which_vpoly_closer_los_vec" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ind_close_los</strong> (<em>(nlos) int array</em>) – Of the form [ind_0, ind_1, …, ind_(nlos-1)]
where ind_i is the coefficient for the i-th LOS (ray)
such that the ind_i-th poly (flux surface) is closest to the LOS
among all other poly without going over it.</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>which_vpoly_closer_los_vec_core</cite></p>
</dd></dl>

</section>
<section id="id1">
<h2>tofu.geom._GG module<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-0"></span><dl class="py function">
<dt class="sig sig-object py" id="id0">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">ConvertImpact_Theta2Xi</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id2">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Dust_calc_SolidAngle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the solid angle of a moving particle of varying radius as seen
from any number of pixed points</p>
<p>Can be done w/o the approximation that r&lt;&lt;d
If Ves (and optionally LSPoly) are provided, takes into account vignetting</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id3">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_Calc_PInOut_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id3" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the entry and exit point of all provided LOS for the provided
vessel polygon (toroidal or linear) with its associated structures.
Return the normal vector at impact and the index of the impact segment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ray_orig</strong> (<em>(</em><em>3</em><em>, </em><em>nlos</em><em>) </em><em>double array</em>) – LOS origin points coordinates</p></li>
<li><p><strong>ray_vdir</strong> (<em>(</em><em>3</em><em>, </em><em>nlos</em><em>) </em><em>double array</em>) – LOS normalized direction vector</p></li>
<li><p><strong>ves_poly</strong> (<em>(</em><em>2</em><em>, </em><em>num_vertex</em><em>) </em><em>double array</em>) – Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the Vessel</p></li>
<li><p><strong>ves_norm</strong> (<em>(</em><em>2</em><em>, </em><em>num_vertex-1</em><em>) </em><em>double array</em>) – Normal vectors going “inwards” of the edges of the Polygon defined
by ves_poly</p></li>
<li><p><strong>nstruct_tot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Total number of structures (counting each limited structure as one)</p></li>
<li><p><strong>ves_lims</strong> (<em>array</em>) – Contains the limits min and max of vessel</p></li>
<li><p><strong>lstruct_polyx</strong> (<em>array</em>) – List of x coordinates of the vertices of all structures on poloidal plane
If no structures : None</p></li>
<li><p><strong>lstruct_polyy</strong> (<em>array</em>) – List of y coordinates of the vertices of all structures on poloidal plane
If no structures : None</p></li>
<li><p><strong>lstruct_lims</strong> (<em>array</em>) – List of limits of all structures
If no structures : None</p></li>
<li><p><strong>lstruct_nlim</strong> (<em>array of ints</em>) – List of number of limits for all structures
If no structures : None</p></li>
<li><p><strong>lstruct_normx</strong> (<em>array</em>) – List of x coordinates of “inwards” normal vectors of the polygon of all
the structures
If no structures : None</p></li>
<li><p><strong>lstruct_normy</strong> (<em>array</em>) – List of y coordinates of “inwards” normal vectors of the polygon of all
the structures
If no structures : None</p></li>
<li><p><strong>rmin</strong> (<em>double</em>) – Minimal radius of vessel to take into consideration</p></li>
<li><p><strong>eps_&lt;val&gt;</strong> (<em>double</em>) – Small value, acceptance of error</p></li>
<li><p><strong>ves_type</strong> (<em>string</em>) – Type of vessel (“Tor” or “Lin”)</p></li>
<li><p><strong>forbid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Should we forbid values behind visible radius ? (see rmin)</p></li>
<li><p><strong>test</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Should we run tests ?</p></li>
<li><p><strong>num_threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The num_threads argument indicates how many threads the team should
consist of. If not given, OpenMP will decide how many threads to use.
Typically this is the number of cores available on the machine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>coeff_inter_in</strong> (<em>(nlos) array</em>) – scalars level of “in” intersection of the LOS (if k=0 at origin)</p></li>
<li><p><strong>coeff_inter_out</strong> (<em>(nlos) array</em>) – scalars level of “out” intersection of the LOS (if k=0 at origin)</p></li>
<li><p><strong>vperp_out</strong> (<em>(3, nlos) array</em>) – Coordinates of the normal vector of impact of the LOS (NaN if none)</p></li>
<li><p><strong>ind_inter_out</strong> (<em>(3, nlos)</em>) – Index of structure impacted by LOS: ind_inter_out[:,ind_los]=(i,j,k)
where k is the index of edge impacted on the j-th sub structure of the
structure number i. If the LOS impacted the vessel i=j=0</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id4">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_Calc_kMinkMax_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id4" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the entry and exit point of all provided LOS for the provided
polygons (toroidal or linear)  of IN structures (non-solid, or <cite>empty</cite>
inside for the LOS).
Attention: the surfaces can be limited, but they all have to have the
same limits defined by (ves_lims)
Return the set of kmin / kmax for each In struct and for each LOS</p>
<dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>num_surf<span class="classifier">int</span></dt><dd><p>number of surfaxes, aka ‘in’ structures or ‘vessels’</p>
</dd>
<dt>ves_poly<span class="classifier">(num_surf, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the <cite>in</cite> structures</p>
</dd>
<dt>ves_norm<span class="classifier">(num_surf, 2, num_vertex-1) double array</span></dt><dd><p>Normal vectors going “inwards” of the edges of the Polygon defined
by ves_poly</p>
</dd>
<dt>ves_lims<span class="classifier">array</span></dt><dd><p>Contains the limits min and max of vessel</p>
</dd>
<dt>rmin<span class="classifier">double</span></dt><dd><p>Minimal radius of vessel to take into consideration</p>
</dd>
<dt>eps&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
<dt>vtype<span class="classifier">string</span></dt><dd><p>Type of vessel (“Tor” or “Lin”)</p>
</dd>
<dt>forbid<span class="classifier">bool</span></dt><dd><p>Should we forbid values behind visible radius ? (see rmin)</p>
</dd>
<dt>test<span class="classifier">bool</span></dt><dd><p>Should we run tests ?</p>
</dd>
<dt>num_threads<span class="classifier">int</span></dt><dd><p>The num_threads argument indicates how many threads the team should
consist of. If not given, OpenMP will decide how many threads to use.
Typically this is the number of cores available on the machine.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>coeff_inter_in</strong> (<em>(num_surf, nlos) array</em>) – scalars level of “in” intersection of the LOS (if k=0 at origin) for
each surface
[kmin(surf0, los0), kmin(surf0, los1), …, kmin(surf1, los0),….]</p></li>
<li><p><strong>coeff_inter_out</strong> (<em>(num_surf, nlos) array</em>) – scalars level of “out” intersection of the LOS (if k=0 at origin) for
each surface
[kmax(surf0, los0), kmax(surf0, los1), …, kmax(surf1, los0),….]</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id5">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_areVis_PtsFromPts_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id5" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of booleans indicating whether each point in pts1 can see
each point in pts2 considering vignetting a given
configuration.</p>
<blockquote>
<div><p>pts1 : (3, npts1) cartesian coordinates of viewing points
pts2 : (3, npts2) cartesian coordinates of points to check if viewable
dist : optional argument : distance between the points pts1, pts2
ves_* : vessel descriptors (poly, norm, limits)
lstruct_* : config’s structure descriptors (poly, limits, norms,</p>
<blockquote>
<div><p>number of structures, …)</p>
</div></blockquote>
<p>eps_* : values of precision in each direction
forbid : boolean if true forbids checking “behind” the tokamak
test : boolean check if input is valid or not
num_threads : number of threads for parallelization</p>
</div></blockquote>
<dl>
<dt>Output:</dt><dd><dl>
<dt>are_seen: (npts1, npts2) array of ints indicating if viewing points pts1</dt><dd><p>can see the other points pts2.
are_seen[i,j] = 1 if pts1[i] sees point pts2[j]</p>
<blockquote>
<div><p>0 else</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id6">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_calc_signal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the synthetic signal, minimizing either function calls or memory
Params
=====
func : python function st. func(pts, t=None, vect=None) =&gt; data</p>
<blockquote>
<div><dl class="simple">
<dt>with pts<span class="classifier">ndarray (3, npts) - points where function is evaluated</span></dt><dd><p>vect : ndarray(3, npts) - if anisotropic signal vector of emiss.
t: ndarray(m) - times where to compute the function</p>
</dd>
<dt>returns: data<span class="classifier">ndarray(nt,nraf) if nt = 1, the array must be 2D</span></dt><dd><p>values of func at pts, at given time</p>
</dd>
</dl>
<p>func is the function to be integrated along the LOS</p>
</div></blockquote>
<p>ray_orig: ndarray (3, nlos) LOS origins
ray_vdir: ndarray (3, nlos) LOS directional vector
res: double or list of doubles</p>
<blockquote>
<div><p>If res is a single double: discretization step for all LOS.
Else res should be a list of size nlos with the discretization
step for each nlos.</p>
</div></blockquote>
<dl class="simple">
<dt>lims: (2, nlos) double array</dt><dd><p>For each nlos, it given the maximum and minimum limits of the ray</p>
</dd>
<dt>dmethod: string</dt><dd><p>type of discretization step: ‘abs’ for absolute or ‘rel’ for relative</p>
</dd>
<dt>method: string</dt><dd><p>method of quadrature on the LOS</p>
</dd>
<dt>ani<span class="classifier">bool</span></dt><dd><p>to indicate if emission is anisotropic or not</p>
</dd>
<dt>t<span class="classifier">None or array-like</span></dt><dd><p>times where to integrate</p>
</dd>
<dt>minimize: string</dt><dd><p>“calls” : we use algorithm to minimize the calls to ‘func’ (default)
“memory”: we use algorithm to minimize memory used
“hybrid”: a mix of both methods</p>
</dd>
<dt>Test<span class="classifier">bool</span></dt><dd><p>we test if the inputs are giving in a proper way.</p>
</dd>
<dt>num_threads: int</dt><dd><p>number of threads if we want to parallelize the code.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id7">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_get_sample</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sampled line, with the specified method
-   ‘sum’ :     return N segments centers
-   ‘simps’:    return N+1 egdes, N even (for scipy.integrate.simps)
-   ‘romb’ :    return N+1 edges, N+1 = 2**k+1 (for scipy.integrate.romb)</p>
<blockquote>
<div><p>The dmethod defines if the discretization step given is absolute (‘abs’)
or relative (‘rel’)</p>
</div></blockquote>
<dl class="simple">
<dt>dL: double or list of doubles</dt><dd><p>If dL is a single double: discretization step for all LOS.
Else dL should be a list of size nlos with the discretization
step for each nlos.</p>
</dd>
<dt>los_lims: (2, nlos) double array</dt><dd><p>For each nlos, it given the maximum and minimum limits of the ray</p>
</dd>
<dt>dmethod: string</dt><dd><p>type of discretization step: ‘abs’ for absolute or ‘rel’ for relative</p>
</dd>
<dt>method: string</dt><dd><p>method of quadrature on the LOS</p>
</dd>
<dt>Test: bool</dt><dd><p>to indicate if tests should be done or not</p>
</dd>
</dl>
<p>k, res, lind = Los_get_sample(…)
nbrepet = np.r_[lind[0], np.diff(lind), k.size - lind[-1]]
kus = k * np.repeat(ray_vdir, nbrepet, axis=1)
Pts = np.repeat(ray_orig, nbrepet, axis=1) + kus</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id8">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_isVis_PtFromPts_VesStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array of booleans indicating whether each point in pts is
visible from the point P = [pt0, pt1, pt2] considering vignetting a given
configuration.</p>
<blockquote>
<div><p>pt0 : x - coordinate of the viewing point P
pt1 : y - coordinate of the viewing point P
pt2 : z - coordinate of the viewing point P
pts : (3, npts) cartesian coordinates of points to check if viewable
dist : optional argument : distance between points and P
ves_* : vessel descriptors (poly, norm, limits)
lstruct_* : config’s structure descriptors (poly, limits, norms,</p>
<blockquote>
<div><p>number of structures, …)</p>
</div></blockquote>
<p>eps_* : values of precision in each direction
forbid : boolean if true forbids checking “behind” the tokamak
test : boolean check if input is valid or not
num_threads : number of threads for parallelization</p>
</div></blockquote>
<dl>
<dt>Output:</dt><dd><dl>
<dt>is_seen: (npts1) array of ints indicating if viewing point P</dt><dd><p>can see the other points pts.
is_seen[i] = 1 if P sees point pts[i]</p>
<blockquote>
<div><p>0 else</p>
</div></blockquote>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id9">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_sino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id10">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">LOS_sino_findRootkPMin_Tor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd><p>Rendre “vectoriel” sur LOS et sur les cercles (deux boucles “for”)
intersection ligne et cercle
double uParN : composante de u parallel au plan (x,y)</p>
<blockquote>
<div><p>double uN : uz
double Sca : ??? produit scalaire … ?
double RZ0 : Grand rayon du cercle
double RZ1 : Z
=&gt; cercle est centré au point (0, 0, RZ1) et rayon RZ0
double ScaP : …. ?
double DParN : D origine de LOS…. ? N =&gt; norme de la composante du vecteur OD
double kOut : kmax où on peut trouver un résultat
double D0, double D1, double D2 : composantes de D (origine LOS)
double u0, double u1, double u2 : composantes de U (direction LOS)
str Mode=’LOS’ : si LOS pas de sol après kmax)</p>
</div></blockquote>
<p>::: Faire une fonction double mais qui renvoit QUE un tableau de bool avec true si
la distance est plus petite qu’un certain eps, false sinon.
TODO: ……….. &#64;LM</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id11">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Poly_VolAngTor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id12">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Poly_isClockwise</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id12" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming 2D closed Poly !
<a class="reference external" href="http://www.faqs.org/faqs/graphics/algorithms-faq/">http://www.faqs.org/faqs/graphics/algorithms-faq/</a>
Find the lowest vertex (or, if there is more than one vertex with
the same lowest coordinate, the rightmost of those vertices) and then
take the cross product of the edges before and after it.
Both methods are O(n) for n vertices, but it does seem a waste to add up
the total area when a single cross product (of just the right edges)
suffices.  Code for this is available at
<a class="reference external" href="ftp://cs.smith.edu/pub/code/polyorient.C">ftp://cs.smith.edu/pub/code/polyorient.C</a> (2K).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id13">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">Sino_ImpactEnv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id13" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes impact parameters of a Tor enveloppe
(a <cite>Tor</cite> is a closed 2D polygon)</p>
<p>D. VEZINET, Aug. 2014
:param RZ: (2,) array indicating the reference impact point
:type RZ: np.ndarray
:param Poly: (2,N) array containing the coordinatesof a closed polygon
:type Poly: np.ndarray
:param NP: Number of indicating the number of points used for discretising theta between 0 and pi
:type NP: int</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>theta</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id14">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Lin_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id14" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dL)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id15">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Lin_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id15" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by ind,
for the desired resolution (dX,dL)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id16">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_TorStruct_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id17">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_TorStruct_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id17" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi)
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id18">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Tor_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id18" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired surfacic submesh indicated by the limits (DR,DZ,DPhi)
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id19">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Smesh_Tor_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id19" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id20">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Lin_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id20" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dY,dZ)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id21">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Lin_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id21" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DX,DY,DZ),
for the desired resolution (dX,dY,dZ)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id22">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromD_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id22" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the desired submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (rstep,zstep,dRphi).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> (<em>phistep</em>) – </p></li>
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> – </p></li>
<li><p><strong>(</strong><strong>double</strong><strong>)</strong> – </p></li>
<li><p><strong>RMinMax</strong> (array specifying the limits min and max in <cite>r</cite>) – </p></li>
<li><p><strong>ZMinMax</strong> (array specifying the limits min and max in <cite>z</cite>) – </p></li>
<li><p><strong>DR</strong> (array specifying the actual sub-volume limits to get in <cite>r</cite>) – </p></li>
<li><p><strong>DZ</strong> (array specifying the actual sub-volume limits to get in <cite>z</cite>) – </p></li>
<li><p><strong>DPhi</strong> (array specifying the actual sub-volume limits to get in <cite>phi</cite>) – </p></li>
<li><p><strong>limit_vpoly</strong> (array-like defining the <cite>(R,Z)</cite> coordinates of the poloidal) – cut of the limiting flux surface</p></li>
<li><p><strong>out_format</strong><strong>(</strong><strong>string</strong><strong>)</strong> (<em>either &quot;</em><em>(</em><em>X</em><em>,</em><em>Y</em><em>,</em><em>Z</em><em>)</em><em>&quot;</em><em> or </em><em>&quot;</em><em>(</em><em>R</em><em>,</em><em>Z</em><em>,</em><em>Phi</em><em>)</em><em>&quot; for cartesian or</em>) – polar coordinates</p></li>
<li><p><strong>margin</strong><strong>(</strong><strong>double</strong><strong>)</strong> (<em>tolerance error.</em>) – Defaults to <a href="#id57"><span class="problematic" id="id58">|_VSMALL|</span></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>pts</strong> (<em>(3, npts) array in out_format (cartesian or polar) of</em>) – discretized volume</p></li>
<li><p><strong>res3d</strong> (<em>(npts) resolution on each point</em>)</p></li>
<li><p><strong>ind</strong> (<em>(npts) indices to reconstruct the points in 3D (useful only if</em>) – limit_vpoly is not none)</p></li>
<li><p><strong>reso_r</strong> (<em>(double) resolution on r (constant)</em>)</p></li>
<li><p><strong>reso_z</strong> (<em>(double) resolution on z (constant)</em>)</p></li>
<li><p><strong>reso_phi</strong> (<em>(sz_r) array, resolution R*dPhi, phi resolution on each R</em>)</p></li>
<li><p><strong>sz_r</strong> (<em>(int) number of points in r</em>)</p></li>
<li><p><strong>sz_z</strong> (<em>(int) number of points in z</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id23">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromD_cython_old</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id23" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the limits (DR,DZ,DPhi),
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id24">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromInd_cython</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id24" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (rstep, zstep, phistep)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id25">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_Vmesh_Tor_SubFromInd_cython_old</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id25" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the desired submesh indicated by the (numerical) indices,
for the desired resolution (dR,dZ,dRphi)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id26">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_isInside</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id26" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if points Pts are in vessel VPoly.
VPoly should be CLOSED</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id27">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">_Ves_meshCross_FromInd</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id27" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id28">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_circle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id28" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the intersection of a Ray (or Line Of Sight)
and a circle in 3D. It returns <cite>kmin</cite> and <cite>dist</cite>. Where <cite>kmin</cite> is the
coefficient such that the ray of origin O = [ori1, ori2, ori3]
and of directional vector D = [dir1, dir2, dir3] is closest to the circle</p>
<blockquote>
<div><p>of radius <cite>radius</cite> and centered <cite>(0, 0, circ_z)</cite> at the point</p>
</div></blockquote>
<p>P = O + kmin * D.
And <cite>distance</cite> the distance between the two closest points (line closest
and circle closest)
The variable <cite>norm_dir</cite> is the squared norm of the direction of the ray.
Params
=====
ray_vdir: (3) double array</p>
<blockquote>
<div><p>ray’s director vector V such that P in Ray iff P(t) = O + t*V</p>
</div></blockquote>
<dl class="simple">
<dt>ray_orig<span class="classifier">(3) double array</span></dt><dd><p>ray’s origin coordinates O such that P in Ray iff P(t) = O + t*V</p>
</dd>
<dt>radius<span class="classifier">double</span></dt><dd><p>radius r of horizontal circle centered in (0,0,circ_z)</p>
</dd>
<dt>circ_z<span class="classifier">double</span></dt><dd><p>3rd coordinate of horizontal circle centered in (0,0,circ_z) of radius r</p>
</dd>
<dt>norm_dir<span class="classifier">double (optional)</span></dt><dd><p>If for computation reasons it makes sense, you can pass the norm of the
director vector</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul>
<li><p><strong>result</strong> (<em>double (2) array</em>) –</p>
<ul class="simple">
<li><p>result[0] will contain the k coefficient to find the line point closest</p></li>
</ul>
<p>closest point
- result[1] will contain the DISTANCE from line closest point to circle
to the circle</p>
</li>
<li><p><em>—</em></p></li>
<li><p><em>This is the PYTHON function, use only if you need this computation from</em></p></li>
<li><p>Python, if you need it from cython, use <cite>dist_los_circle_core</cite></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id29">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_circle_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id29" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the intersection of a Ray (or Line Of Sight)
and a circle in 3D. It returns <cite>kmin</cite>, the coefficient such that the
ray of origin O = [ori1, ori2, ori3] and of directional vector
D = [dir1, dir2, dir3] is closest to the circle of radius <cite>radius</cite>
and centered <cite>(0, 0, circ_z)</cite> at the point P = O + kmin * D.
The variable <cite>norm_dir</cite> is the squared norm of the direction of the ray.
This is the vectorial version, we expect the directions and origins to be:
dirs = [[dir1_los1, dir2_los1, dir3_los1], [dir1_los2,…]
oris = [[ori1_los1, ori2_los1, ori3_los1], [ori1_los2,…]
:returns: * <strong>res</strong> (<em>(2, nlos, ncircles)</em>) – res = [res_k, res_d] where res_k is a (nlos, ncircles) numpy array</p>
<blockquote>
<div><blockquote>
<div><p>with the k coefficients for each LOS where the minimum distance
to each circle is reached
is met for each circle, and res_d is a (nlos, ncircles) numpy array
with the distance between each LOS to each circle</p>
</div></blockquote>
<ul class="simple">
<li><p><em>—</em></p></li>
<li><p><em>This is the PYTHON function, use only if you need this computation from</em></p></li>
<li><p>Python, if you need it from cython, use <cite>dist_los_circle_core</cite></p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id30">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_vpoly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id30" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the distance (and the associated k) between nlos
Rays (or LOS) and an <cite>IN</cite> structure (a polygon extruded around the axis
(0,0,1), eg. a flux surface).
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the Vessel</p>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>kmin_vpoly</strong> (<em>(nlos) double array</em>) – Of the form [k_0, k_1, …, k_n], where k_i is the coefficient
such that the i-th ray (LOS) is closest to the extruded polygon
at the point P_i = orig[i] + kmin[i] * vdir[i]</p></li>
<li><p><strong>dist_vpoly</strong> (<em>(nlos) double array</em>) – <cite>distance[i]</cite> is the distance from P_i to the extruded polygon.</p></li>
</ul>
</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>simple_dist_los_vpoly_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id31">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">comp_dist_los_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id31" title="Permalink to this definition">¶</a></dt>
<dd><p>This function computes the distance (and the associated k) between nlos
Rays (or LOS) and several <cite>IN</cite> structures (polygons extruded around the axis
(0,0,1), eg. flux surfaces).
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>from inner to outer</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>kmin_vpoly</strong> (<em>(npoly, nlos) double array</em>) – Of the form [k_00, k_01, …, k_0n, k_10, k_11, …, k_1n, …]
where k_ij is the coefficient for the j-th flux surface
such that the i-th ray (LOS) is closest to the extruded polygon
at the point P_i = orig[i] + kmin[i] * vdir[i]</p></li>
<li><p><strong>dist_vpoly</strong> (<em>(npoly, nlos) double array</em>) – <cite>distance[i * num_poly + j]</cite> is the distance from P_i to the i-th
extruded poly.</p></li>
</ul>
</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>comp_dist_los_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id32">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">coord_shift</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id32" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the shape of an array of points coordinates and/or converts from
2D to 3D, 3D to 2D, cylindrical to cartesian…
(CrossRef is an angle (Tor) or a distance (X for Lin))</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id33">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_line1d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id33" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretize a 1D segment LMin-LMax. If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else, if <cite>mode</cite>
is “rel” (relative), the meshing step is relative to the segments norm (ie.
the actual discretization step will be (LMax - LMin)/dstep).
It is possible to only one to discretize the segment on a sub-domain. If so,
the sub-domain limits are given in DL.
:param LMinMax: Gives the limits LMin and LMax of the segment. LMinMax = [LMin, LMax]
:type LMinMax: (2)-double array
:param dstep: Step of discretization, can be absolute (default) or relative
:type dstep: double
:param DL: Sub domain of discretization. If not None and if Lim, LMinMax = DL</p>
<blockquote>
<div><p>(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Lim</strong> (<em>(</em><em>optional</em><em>) </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Indicated if the subdomain should be taken into account</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm
(the actual discretization step will be (LMax - LMin)/dstep).</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ldiscret</strong> (<em>double array</em>) – array of the discretized coordinates on the segment of desired limits</p></li>
<li><p><strong>resolution</strong> (<em>double</em>) – step of discretization</p></li>
<li><p><strong>lindex</strong> (<em>int array</em>) – array of the indices corresponding to ldiscret with respects to the
original segment LMinMax (if no DL, from 0 to N-1)</p></li>
<li><p><strong>N</strong> (<em>int64</em>) – Number of points on LMinMax segment</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id34">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_segment2d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id34" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretizes a 2D segment where the 1st coordinates are defined in LMinMax1
and the second ones in LMinMax2. The refinement in x is defined by dstep1,
and dstep2 defines the resolution on y.
Optionnally you can give a VPoly to which the discretized in which the
segment has to be included.
This function is basically a generalization of discretize_line1d.
:param LMinMax1: Gives the limits LMin and LMax of the x coordinates of the segment.</p>
<blockquote>
<div><p>LMinMax1 = [xmin, xmax]</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>LMinMax2</strong> (<em>(</em><em>2</em><em>)</em><em>-double array</em>) – Gives the limits LMin and LMax of the y coordinates of the segment.
LMinMax2 = [ymin, ymax]</p></li>
<li><p><strong>dstep2</strong> (<em>dstep1 or</em>) – Step of discretization, can be absolute (default) or relative</p></li>
<li><p><strong>D2</strong> (<em>D1 or</em>) – Sub domain of discretization. If not None and if Lim, LMinMax = DL
(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm
(the actual discretization step will be (LMax - LMin)/dstep).</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
<li><p><strong>VPoly</strong> (<em>(</em><em>optional</em><em>) </em><em>2d double array</em>) – If present, we check that the discretized segment is included in the
path defined by VPoly.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>ldiscret</strong> (<em>double 2d array</em>) – array of the discretized coordinates on the segment of desired limits</p></li>
<li><p><strong>resolution</strong> (<em>double array</em>) – step of discretization on 2d (typically resolution-on-x*resolution-on-y)</p></li>
<li><p><strong>lindex</strong> (<em>int array</em>) – array of the indices corresponding to ldiscret with respects to the
original segment LMinMax (if no DL, from 0 to N-1)</p></li>
<li><p><strong>resol1</strong> (<em>double</em>) – Smallest resolution on x</p></li>
<li><p><strong>resol2</strong> (<em>double</em>) – Smallest resolution on y</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id35">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">discretize_vpoly</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id35" title="Permalink to this definition">¶</a></dt>
<dd><p>Discretizes a VPoly (2D polygon of a cross section in (R,Z) coordinates).
The refinement on R and Z is defined dL.
Optionnally you can give a coefficient (DIn) and the normal vectors going
inwards the VPoly (VIn), and the result will be slightly shifted inwards
(or outwards if DIn&lt;0) of DIn*VIn.
:param VPoly: Coordinates of the vertices of the Polygon defining the 2D poloidal</p>
<blockquote>
<div><p>cut of the Vessel</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dL</strong> (<em>double</em>) – Step of discretization, can be absolute (default) or relative</p></li>
<li><p><strong>D2</strong> (<em>D1 or</em>) – Sub domain of discretization.
(can be only on one limit and can be bigger or smaller than original).
Actual desired limits</p></li>
<li><p><strong>mode</strong> (<em>(</em><em>optional</em><em>) </em><em>string</em>) – If <cite>mode</cite> is “abs” (absolute), then the
segment will be discretized in cells each of size <cite>dstep</cite>. Else,
if “rel” (relative), the meshing step is relative to the segments norm</p></li>
<li><p><strong>margin</strong> (<em>(</em><em>optional</em><em>) </em><em>double</em>) – Margin value for cell length</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>return PtsCross, resol, ind_arr, N_arr, Rref_arr, VPolybis</em></p></li>
<li><p><strong>PtsCross</strong> (<em>double 2d array</em>) – array of the discretized coordinates of the VPoly</p></li>
<li><p><strong>resol</strong> (<em>double 1d array</em>) – step of discretization on 2d</p></li>
<li><p><strong>ind_arr</strong> (<em>int  1d array</em>) – array of the indices corresponding to ldiscret with respects to the
original VPoly</p></li>
<li><p><strong>N_arr</strong> (<em>int 1d array</em>) – number of cells on each segment of the VPoly</p></li>
<li><p><strong>Rref_arr</strong> (<em>double 1d array</em>) – reference Radius coordinates, not shifted even if DIn &lt;&gt; 0.
If DIn == 0, then Rref_arr = PtsCross[0, …]</p></li>
<li><p><em>VPolybis</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id36">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">integrate1d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id36" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic integration method [‘sum’,’simps’,’romb’]</p>
<p>Not used internally
Useful when the sampling points need to be interpolated via equilibrium</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id37">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_circle</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id37" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if at maximum a LOS is at a distance epsilon
form a cirlce
The result is True when distance &lt; epsilon
—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_los_close_circle_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id38">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_circle_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id38" title="Permalink to this definition">¶</a></dt>
<dd><p>This function checks if at maximum a LOS is at a distance epsilon
form a cirlce. Vectorial version
The result is True when distance &lt; epsilon
—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_los_close_circle_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id39">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">is_close_los_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id39" title="Permalink to this definition">¶</a></dt>
<dd><p>This function tests if the distance between nlos Rays (or LOS) and
several <cite>IN</cite> structures (polygons extruded around the axis (0,0,1),
eg. flux surfaces) is smaller than <cite>epsilon</cite>.
For more details on the algorithm please see PDF: &lt;name_of_pdf&gt;.pdf #TODO</p>
<blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>epsilon<span class="classifier">double</span></dt><dd><p>Value for testing if distance &lt; epsilon</p>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>are_close</strong> (<em>(npoly * nlos) bool array</em>) – <cite>are_close[i * num_poly + j]</cite> indicates if distance between i-th LOS
and j-th poly are closer than epsilon. (True if distance&lt;epsilon)</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>is_close_los_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id40">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">poly_area</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id40" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id41">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">poly_area_and_barycenter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id41" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id42">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">triangulate_by_earclipping</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id42" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id43">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">vignetting</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id43" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS normalized direction vector</p>
</dd>
<dt>vignett_poly<span class="classifier">(num_vign, 3, num_vertex) double list of arrays</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 3D vignett.
POLY CLOSED</p>
</dd>
<dt>lnvert<span class="classifier">(num_vign) long array</span></dt><dd><p>Number of vertices for each vignett (without counting the rebound)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>goes_through</strong> (<em>(num_vign, nlos) bool array</em>) – Indicates for each vignett if each LOS wents through or not</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id44">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">which_los_closer_vpoly_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id44" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ind_close_los</strong> (<em>(npoly) int array</em>) – Of the form [ind_0, ind_1, …, ind_(npoly-1)]
where ind_i is the coefficient for the i-th flux surface
such that the ind_i-th ray (LOS) is closest to the extruded polygon
among all other LOS without going over it.</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>which_los_closer_vpoly_vec_core</cite></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id45">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._GG.</span></span><span class="sig-name descname"><span class="pre">which_vpoly_closer_los_vec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id45" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><dl>
<dt>nvpoly<span class="classifier">int</span></dt><dd><p>Number of flux surfaces</p>
</dd>
<dt>nlos<span class="classifier">int</span></dt><dd><p>Number of LOS</p>
</dd>
<dt>ray_orig<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS origin points coordinates</p>
</dd>
<dt>ray_vdir<span class="classifier">(3, nlos) double array</span></dt><dd><p>LOS direction vector</p>
</dd>
<dt>ves_poly<span class="classifier">(num_pol, 2, num_vertex) double array</span></dt><dd><p>Coordinates of the vertices of the Polygon defining the 2D poloidal
cut of the different IN surfaces
WARNING : we suppose all poly are nested in each other,</p>
<blockquote>
<div><p>and the first one is the smallest one</p>
</div></blockquote>
</dd>
<dt>eps_&lt;val&gt;<span class="classifier">double</span></dt><dd><p>Small value, acceptance of error</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>ind_close_los</strong> (<em>(nlos) int array</em>) – Of the form [ind_0, ind_1, …, ind_(nlos-1)]
where ind_i is the coefficient for the i-th LOS (ray)
such that the ind_i-th poly (flux surface) is closest to the LOS
among all other poly without going over it.</p>
</dd>
</dl>
<p>—
This is the PYTHON function, use only if you need this computation from
Python, if you need it from cython, use <cite>which_vpoly_closer_los_vec_core</cite></p>
</dd></dl>

</section>
<section id="module-tofu.geom._basic_geom_tools">
<span id="tofu-geom-basic-geom-tools-module"></span><h2>tofu.geom._basic_geom_tools module<a class="headerlink" href="#module-tofu.geom._basic_geom_tools" title="Permalink to this headline">¶</a></h2>
</section>
<section id="id46">
<h2>tofu.geom._basic_geom_tools module<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-1"></span></section>
<section id="module-tofu.geom._comp">
<span id="tofu-geom-comp-module"></span><h2>tofu.geom._comp module<a class="headerlink" href="#module-tofu.geom._comp" title="Permalink to this headline">¶</a></h2>
<p>This module is the computational part of the geometrical module of ToFu</p>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp.LOS_CrossProj">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">LOS_CrossProj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kOuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'All'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#LOS_CrossProj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp.LOS_CrossProj" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the parameters to plot the poloidal projection of the LOS</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp.LOS_PRMin">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">LOS_PRMin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kOut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Eps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#LOS_PRMin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp.LOS_PRMin" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the point on the LOS where the major radius is minimum</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp.LOS_calc_signal">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">LOS_calc_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'romb'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#LOS_calc_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp.LOS_calc_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp.LOS_get_sample">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">LOS_get_sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sum'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#LOS_get_sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp.LOS_get_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sampled line, with the specified method</p>
<p>‘linspace’: return the N+1 edges, including the first and last point
‘sum’ : return the N middle of the segments
‘simps’: return the N+1 egdes, where N has to be even</p>
<blockquote>
<div><p>(scipy.simpson requires an even number of intervals)</p>
</div></blockquote>
<dl class="simple">
<dt>‘romb’<span class="classifier">return the N+1 edges, where N+1 = 2**k+1</span></dt><dd><p>(fed to scipy.romb for integration)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Struct_get_phithetaproj">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Struct_get_phithetaproj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poly_closed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noccur</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Struct_get_phithetaproj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Struct_get_phithetaproj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Struct_set_Poly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Struct_set_Poly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Poly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Clock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Struct_set_Poly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Struct_set_Poly" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute geometrical attributes of a Struct object</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_InsideConvexPoly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_InsideConvexPoly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Poly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P2Min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P2Max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">BaryS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">RelOff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ZLim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Def'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Spline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Splprms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[100.0,</span> <span class="pre">2.0,</span> <span class="pre">3]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">NP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_InsideConvexPoly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_InsideConvexPoly" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_sampleCross">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_sampleCross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Min1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Max1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Min2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Max2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flat'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_sampleCross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_sampleCross" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_sampleEdge">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_sampleEdge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsetIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-09</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_sampleEdge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_sampleEdge" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_sampleS">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_sampleS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offsetIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VLim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nVLim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'(X,Y,Z)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_sampleS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_sampleS" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample the surface</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_sampleV">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_sampleV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">VPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Min1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Max1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Min2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Max2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VType</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">VLim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'(X,Y,Z)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-09</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'new'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">48</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_sampleV"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_sampleV" title="Permalink to this definition">¶</a></dt>
<dd><p>Sample the volume</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._Ves_get_sample_checkinputs">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_Ves_get_sample_checkinputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">which</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'volume'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_Ves_get_sample_checkinputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._Ves_get_sample_checkinputs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check inputs for all sampling routines</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._check_float">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_check_float</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vardef</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_check_float"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._check_float" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._get_phithetaproj_dist">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_get_phithetaproj_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">poly_closed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dtheta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nDtheta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dphi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nDphi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noccur</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_get_phithetaproj_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._get_phithetaproj_dist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp._get_pts_from_path_svg">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">_get_pts_from_path_svg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_str</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#_get_pts_from_path_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp._get_pts_from_path_svg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp.get_paths_from_svg">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp.</span></span><span class="sig-name descname"><span class="pre">get_paths_from_svg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_ref1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_ref2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp.html#get_paths_from_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp.get_paths_from_svg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tofu.geom._comp_optics">
<span id="tofu-geom-comp-optics-module"></span><h2>tofu.geom._comp_optics module<a class="headerlink" href="#module-tofu.geom._comp_optics" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.CrystBragg_get_noute1e2_from_psitheta">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">CrystBragg_get_noute1e2_from_psitheta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sameshape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf_psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf_dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#CrystBragg_get_noute1e2_from_psitheta"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.CrystBragg_get_noute1e2_from_psitheta" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.CrystBragg_sample_outline_plot_sphrect">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">CrystBragg_sample_outline_plot_sphrect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">center</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcurve</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#CrystBragg_sample_outline_plot_sphrect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.CrystBragg_sample_outline_plot_sphrect" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the set of points in (x, y, z) coordinates sampling the crystal
outline</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.CrystBragg_sample_outline_sphrect">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">CrystBragg_sample_outline_sphrect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extent_psi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent_dtheta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#CrystBragg_sample_outline_sphrect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.CrystBragg_sample_outline_sphrect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._are_broadcastable">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_are_broadcastable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_are_broadcastable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._are_broadcastable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._calc_braggphi_from_pts_summits">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_calc_braggphi_from_pts_summits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ve1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ve2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_calc_braggphi_from_pts_summits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._calc_braggphi_from_pts_summits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._calc_spect1d_from_data2d">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_calc_spect1d_from_data2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ldata</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlambfit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphifit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spect1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertsum1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_calc_spect1d_from_data2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._calc_spect1d_from_data2d" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._check_bool">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_check_bool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">var</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vardef</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_check_bool"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._check_bool" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._check_dthetapsi">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_check_dthetapsi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf_psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf_dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_check_dthetapsi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._check_dthetapsi" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._checkformat_pts">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_checkformat_pts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_checkformat_pts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._checkformat_pts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics._checkformat_xixj">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">_checkformat_xixj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#_checkformat_xixj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics._checkformat_xixj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.calc_braggphi_from_xixjpts">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">calc_braggphi_from_xixjpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#calc_braggphi_from_xixjpts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.calc_braggphi_from_xixjpts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return bragg phi for pts or (xj, xi) seen from (summit, nin, e1, e2)</p>
<dl class="simple">
<dt>Either provide:</dt><dd><p>pts =&gt; (3, npts)
xi, xj =&gt; pts with shape (3, nxi, nxj)</p>
</dd>
</dl>
<p>summit, nin, e1, e2 must have the same shape (3, nsumm)</p>
<p>bragg.shape = (nsum, )</p>
<dl>
<dt>if grid is True:</dt><dd><p>all pts evaluated for all summ/nin
return  (nsumm, npts) or (nsum, nxi, nxj) arrays</p>
</dd>
<dt>else:</dt><dd><p>each pts has a unique corresponding summ/nin (except possibly ndtheta)
return (npts,) or (nxi, nxj) arrays</p>
<blockquote>
<div><p>or (npts, ndtheta) or (nxi, nxj, ndtheta) arrays</p>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.calc_dthetapsiphi_from_lambpts">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">calc_dthetapsiphi_from_lambpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcurve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extenthalf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#calc_dthetapsiphi_from_lambpts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.calc_dthetapsiphi_from_lambpts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return (dtheta, psi) of pts on crystal where bragg diffraction happens</p>
<p>For given pts and lamb/bragg</p>
<p>For each pts/lamb, there may be up to 2 arcs on the crystal
Only returns valid solution (inside extenthalf), with nan elsewhere</p>
<p>psi and dtheta returned as (nlamb, npts, 2, ndtheta) arrays</p>
<p>Here nout, e1, e2 are at the unique crystal summit!</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.calc_meridional_sagital_focus">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">calc_meridional_sagital_focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rcurve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#calc_meridional_sagital_focus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.calc_meridional_sagital_focus" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.calc_xixj_from_braggphi">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">calc_xixj_from_braggphi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">det_cent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ei</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ej</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_outline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#calc_xixj_from_braggphi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.calc_xixj_from_braggphi" title="Permalink to this definition">¶</a></dt>
<dd><p>Several options for shapes</p>
<p>de_cent, det_nout, det_ei and det_ej are always of shape (3,)</p>
<dl class="simple">
<dt>option:</dt><dd><dl class="simple">
<dt>0:</dt><dd><p>(summit, e1, e2).shape = (3,)
(bragg, phi).shape = (nbragg,)
=&gt; (xi, xj).shape = (nbragg,)</p>
</dd>
<dt>1:</dt><dd><p>(summit, e1, e2).shape = (3, nlamb, npts, nbragg)
(bragg, phi).shape = (nlamb, npts, nbragg)
=&gt; (xi, xj).shape = (nlamb, npts, nbragg)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.checkformat_vectang">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">checkformat_vectang</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_cent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_ang</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#checkformat_vectang"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.checkformat_vectang" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_approx_detector_rel">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_approx_detector_rel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rcurve</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">braggref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xiref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg01</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist01</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tangent_to_rowland</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_approx_detector_rel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_approx_detector_rel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the approximative detector position on the Rowland circle
relatively to the Bragg crystal.
Possibility to define tangential position of the detector to the Rowland
circle or not.
On WEST, the maximum non-parallelism between two halves can be up to few
arcmin so here, doesn’t need to define the precise location of the detector
The bragg angle is provided and naturally defined as the angle between the
emissed photon vector and the crystal mesh.
So, if non parallelism approuved, bragg is relative
to the vector basis dmat(nout,e1,e2).
The position of the detector, relatively to the crystal, will be so in
another Rowland circle with its center shifted from the original one.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_bragg_from_lamb">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_bragg_from_lamb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_bragg_from_lamb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_bragg_from_lamb" title="Permalink to this definition">¶</a></dt>
<dd><p>n*lamb = 2d*sin(bragg)
The angle bragg is defined as the angle of incidence of the emissed photon
vector and the crystal mesh, and not the crystal dioptre.
For record, both are parallel and coplanar when is defined parallelism
into the crystal.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_det_abs_from_rel">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_det_abs_from_rel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">det_dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_crystdet_rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_nout_rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ei_rel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tilt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_det_abs_from_rel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_det_abs_from_rel" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute detector position, according to tokamak’s frame,
on the Rowland circle from its relative position to the Bragg crystal.
If non parallelism approuved, bragg is relative to the vector basis
dmat(nout,e1,e2).
The position of the detector, relatively to the crystal, will be so in
another Rowland circle with its center shifted from the original one.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_e1e2_detectorplane">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_e1e2_detectorplane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nIn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_e1e2_detectorplane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_e1e2_detectorplane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_lamb_from_bragg">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_lamb_from_bragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_lamb_from_bragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_lamb_from_bragg" title="Permalink to this definition">¶</a></dt>
<dd><p>n*lamb = 2d*sin(bragg)
The angle bragg is defined as the angle of incidence of the emissed photon
vector and the crystal mesh, and not the crystal dioptre.
For record, both are parallel and coplanar when is defined parallelism
into the crystal.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_lambphifit">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_lambphifit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_lambphifit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_lambphifit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_rowland_dist_from_bragg">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_rowland_dist_from_bragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcurve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_rowland_dist_from_bragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_rowland_dist_from_bragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_optics.get_vectors_from_angles">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_optics.</span></span><span class="sig-name descname"><span class="pre">get_vectors_from_angles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alpha</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_optics.html#get_vectors_from_angles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_optics.get_vectors_from_angles" title="Permalink to this definition">¶</a></dt>
<dd><p>Return new unit vectors according to alpha and beta entries from user
caused by the non parallelism assumed on the crystal.</p>
</dd></dl>

</section>
<section id="module-tofu.geom._comp_solidangles">
<span id="tofu-geom-comp-solidangles-module"></span><h2>tofu.geom._comp_solidangles module<a class="headerlink" href="#module-tofu.geom._comp_solidangles" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_solidangles._check_calc_solidangle_particle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_solidangles.</span></span><span class="sig-name descname"><span class="pre">_check_calc_solidangle_particle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aniso</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_solidangles.html#_check_calc_solidangle_particle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_solidangles._check_calc_solidangle_particle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_solidangles.calc_solidangle_particle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_solidangles.</span></span><span class="sig-name descname"><span class="pre">calc_solidangle_particle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aniso</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_solidangles.html#calc_solidangle_particle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_solidangles.calc_solidangle_particle" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the solid angle subtended by a particle along a trajectory</p>
<p>The particle has radius r, and trajectory (array of points) traj
It is observed from pts (array of points)</p>
<p>traj and pts are (3, N) and (3, M) arrays of cartesian coordinates</p>
<p>approx = True =&gt; use approximation
aniso = True =&gt; return also unit vector of emission
block = True consider LOS collisions (with Ves, Struct…)</p>
<dl class="simple">
<dt>if block:</dt><dd><p>config used for LOS collisions</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pts</strong> (<em>np.ndarray</em>) – Array of (3, M) pts coordinates (X, Y, Z) representing the points from
which the particle is observed</p></li>
<li><p><strong>part_traj</strong> (<em>np.ndarray</em>) – Array of (3, N) pts coordinates (X, Y, Z) representing the particle
positions</p></li>
<li><p><strong>part_radius</strong> (<em>float / np.ndarray</em>) – <dl class="simple">
<dt>Unique of multiple values for the radius of the spherical particle</dt><dd><p>if multiple, rad is a np.ndarray of shape (N,)</p>
</dd>
</dl>
</p></li>
<li><p><strong>config</strong> (<em>None / tf.geom.Config</em>) – if block = True, solid angles are non-zero only if the field of view is
not blocked bya structural element in teh chamber</p></li>
<li><p><strong>approx</strong> (<em>None / bool</em>) – Flag indicating whether to compute the solid angle using an 1st-order
series development (in whichcase the solid angle becomes proportional
to the radius of the particle, see Notes_Upgrades/)</p></li>
<li><p><strong>aniso</strong> (<em>None / bool</em>) – Flag indicating whether to consider anisotropic emissivity, meaning the
routine must also compute and return the unit vector directing the flux
from each pts to each position on the trajectory of the particle</p></li>
<li><p><strong>block</strong> (<em>None / bool</em>) – Flag indicating whether to check for vignetting by structural elements
provided by config</p></li>
<li><p><strong>Return</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>sang</strong> (<em>np.ndarray</em>) – (N, M) Array of floats, solid angles</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._comp_solidangles.calc_solidangle_particle_integ">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._comp_solidangles.</span></span><span class="sig-name descname"><span class="pre">calc_solidangle_particle_integ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">part_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DZ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DPhi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_comp_solidangles.html#calc_solidangle_particle_integ"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._comp_solidangles.calc_solidangle_particle_integ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tofu.geom._core">
<span id="tofu-geom-core-module"></span><h2>tofu.geom._core module<a class="headerlink" href="#module-tofu.geom._core" title="Permalink to this headline">¶</a></h2>
<p>This module is the geometrical part of the ToFu general package
It includes all functions and object classes necessary for tomography
on Tokamaks</p>
<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">CamLOS1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lOptics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Etendues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Surfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'optimized'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS1D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tofu.geom._core.Rays" title="tofu.geom._core.Rays"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.Rays</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS1D._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS1D._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS1D._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160; <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'l'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS1D.get_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS1D.get_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS1D.save_to_imas">
<span class="sig-name descname"><span class="pre">save_to_imas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refshot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">occ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restore_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_description_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_occ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS1D.save_to_imas"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS1D.save_to_imas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">CamLOS2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lOptics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Etendues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Surfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dX12</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'optimized'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tofu.geom._core.Rays" title="tofu.geom._core.Rays"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.Rays</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS2D._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS2D._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.CamLOS2D._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D._isImage">
<span class="sig-name descname"><span class="pre">_isImage</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS2D._isImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS2D._isImage" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D.dX12">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dX12</span></span><a class="headerlink" href="#tofu.geom._core.CamLOS2D.dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D.get_X12plot">
<span class="sig-name descname"><span class="pre">get_X12plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imshow'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS2D.get_X12plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS2D.get_X12plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CamLOS2D.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160; <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'l'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CamLOS2D.get_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CamLOS2D.get_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.CoilCS">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">CoilCS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilCS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#tofu.geom._core.CoilPF" title="tofu.geom._core.CoilPF"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.CoilPF</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilCS._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)},</span> <span class="pre">'dphys':</span> <span class="pre">{},</span> <span class="pre">'dreflect':</span> <span class="pre">{'Type':</span> <span class="pre">'specular'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.CoilCS._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilCS._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'k',</span> <span class="pre">'fc':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'linewidth':</span> <span class="pre">1},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'none',</span> <span class="pre">'fc':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)}}}</span></em><a class="headerlink" href="#tofu.geom._core.CoilCS._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilCS._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.CoilCS._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">CoilPF</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.StructOut</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._checkformat_inputs_dmag">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_dmag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._checkformat_inputs_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._checkformat_inputs_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._color">
<span class="sig-name descname"><span class="pre">_color</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'r'</span></em><a class="headerlink" href="#tofu.geom._core.CoilPF._color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)},</span> <span class="pre">'dphys':</span> <span class="pre">{},</span> <span class="pre">'dreflect':</span> <span class="pre">{'Type':</span> <span class="pre">'specular'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.CoilPF._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'k',</span> <span class="pre">'fc':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'linewidth':</span> <span class="pre">1},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'none',</span> <span class="pre">'fc':</span> <span class="pre">(1.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)}}}</span></em><a class="headerlink" href="#tofu.geom._core.CoilPF._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.CoilPF._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._from_dict">
<span class="sig-name descname"><span class="pre">_from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._get_keys_dmag">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dmag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._get_keys_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._get_keys_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._get_largs_dmag">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dmag</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._get_largs_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._get_largs_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._init">
<span class="sig-name descname"><span class="pre">_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._init" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._rebuild_dmag">
<span class="sig-name descname"><span class="pre">_rebuild_dmag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['nturns',</span> <span class="pre">'superconducting',</span> <span class="pre">'active']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._rebuild_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._rebuild_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._reset">
<span class="sig-name descname"><span class="pre">_reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._reset" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._strip">
<span class="sig-name descname"><span class="pre">_strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._strip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._strip_dmag">
<span class="sig-name descname"><span class="pre">_strip_dmag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['nturns',</span> <span class="pre">'superconducting',</span> <span class="pre">'active']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._strip_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._strip_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._strip_init">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_strip_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._strip_init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._strip_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF._to_dict">
<span class="sig-name descname"><span class="pre">_to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF._to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF._to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.current">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">current</span></span><a class="headerlink" href="#tofu.geom._core.CoilPF.current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.dmag">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dmag</span></span><a class="headerlink" href="#tofu.geom._core.CoilPF.dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160; <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'l'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF.get_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF.get_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summary description of the object content</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.nturns">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nturns</span></span><a class="headerlink" href="#tofu.geom._core.CoilPF.nturns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.set_current">
<span class="sig-name descname"><span class="pre">set_current</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">current</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF.set_current"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF.set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the current circulating on the coil (A)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.set_dmag">
<span class="sig-name descname"><span class="pre">set_dmag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF.set_dmag"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF.set_dmag" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.CoilPF.strip">
<span class="sig-name descname"><span class="pre">strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#CoilPF.strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.CoilPF.strip" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove non-essential attributes to save memory / disk usage</p>
<p>Useful to save a very compressed version of the object
The higher strip =&gt; the more stripped the object
Use strip=0 to recover all atributes</p>
<dl class="simple">
<dt>See the difference by doing:</dt><dd><p>&gt; self.get_nbytes()
&gt; self.strip(-1)
&gt; self.get_nbytes()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – <dl>
<dt>Flag indicating how much to strip from the object</dt><dd><blockquote>
<div><p>0: Make complete (retrieve all attributes)
1: Remove dsino and dmag expendables
2: Remove also dgeom, dphys and dmisc expendables</p>
</div></blockquote>
<p>-1: Equivalent to strip=2</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.Config">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">Config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dextraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath_Include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Type',</span> <span class="pre">'Exp',</span> <span class="pre">'Deg',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="tofu.html#tofu.utils.ToFuObject" title="tofu.utils.ToFuObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.utils.ToFuObject</span></code></a></p>
<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.Lim">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Lim</span></span><a class="headerlink" href="#tofu.geom._core.Config.Lim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_fromdict_dStruct">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_fromdict_dStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dStruct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_fromdict_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_fromdict_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_Id">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_Id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_Id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_Id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_Struct">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_Struct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_Struct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_Struct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_dStruct">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_dextraprop">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dextraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dextraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_dextraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_dsino">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._checkformat_inputs_extraval">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_extraval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extraval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._checkformat_inputs_extraval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._checkformat_inputs_extraval" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Config._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'Exp':</span> <span class="pre">'Dummy',</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dStruct':</span> <span class="pre">{'dextraprop':</span> <span class="pre">{'visible':</span> <span class="pre">True},</span> <span class="pre">'order':</span> <span class="pre">['PlasmaDomain',</span> <span class="pre">'Ves',</span> <span class="pre">'PFC',</span> <span class="pre">'CoilPF',</span> <span class="pre">'CoilCS']}}</span></em><a class="headerlink" href="#tofu.geom._core.Config._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Config._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.Config._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._dynamicattr">
<span class="sig-name descname"><span class="pre">_dynamicattr</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._dynamicattr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._dynamicattr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._errmsg_dStruct">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_errmsg_dStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lStruct</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._errmsg_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._errmsg_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._from_SOLEDGE_extract_dict">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_from_SOLEDGE_extract_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._from_SOLEDGE_extract_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._from_SOLEDGE_extract_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._from_dict">
<span class="sig-name descname"><span class="pre">_from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_extraprop">
<span class="sig-name descname"><span class="pre">_get_extraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_extraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_extraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_keys_dStruct">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_keys_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_keys_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_keys_dextraprop">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dextraprop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_keys_dextraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_keys_dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_keys_dsino">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dsino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_keys_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_keys_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_largs_dStruct">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dStruct</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_largs_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_largs_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_largs_dextraprop">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dextraprop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_largs_dextraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_largs_dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_largs_dsino">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dsino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_largs_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_largs_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._get_phithetaproj_dist">
<span class="sig-name descname"><span class="pre">_get_phithetaproj_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._get_phithetaproj_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._get_phithetaproj_dist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._init">
<span class="sig-name descname"><span class="pre">_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dextraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._init" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Config._lclsstr">
<span class="sig-name descname"><span class="pre">_lclsstr</span></span><em class="property"> <span class="pre">=</span> <span class="pre">['PlasmaDomain',</span> <span class="pre">'Ves',</span> <span class="pre">'PFC',</span> <span class="pre">'CoilPF',</span> <span class="pre">'CoilCS']</span></em><a class="headerlink" href="#tofu.geom._core.Config._lclsstr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._reflect_Types">
<span class="sig-name descname"><span class="pre">_reflect_Types</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nRays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._reflect_Types"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._reflect_Types" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an array indicating the Type of reflection for each LOS</p>
<dl class="simple">
<dt>Return a (nRays,) np.ndarray of int indices, each index corresponds to:</dt><dd><ul class="simple">
<li><p>0: specular reflections</p></li>
<li><p>1: diffusive reflections</p></li>
<li><p>2: ccube reflections (corner cube)</p></li>
</ul>
</dd>
</dl>
<p>If indout is provided, the Types are computed according to the
information stored in each corresponding Struct</p>
<p>If Type is provided, the Type is forced (user-defined) for all LOS</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._reflect_geom">
<span class="sig-name descname"><span class="pre">_reflect_geom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vperp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._reflect_geom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._reflect_geom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._reset">
<span class="sig-name descname"><span class="pre">_reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._reset" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._set_color">
<span class="sig-name descname"><span class="pre">_set_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._set_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._set_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._set_dStruct">
<span class="sig-name descname"><span class="pre">_set_dStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._set_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._set_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._set_dextraprop">
<span class="sig-name descname"><span class="pre">_set_dextraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dextraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._set_dextraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._set_dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._set_extraprop">
<span class="sig-name descname"><span class="pre">_set_extraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._set_extraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._set_extraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._strip">
<span class="sig-name descname"><span class="pre">_strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._strip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._strip_dStruct">
<span class="sig-name descname"><span class="pre">_strip_dStruct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._strip_dStruct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._strip_dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._strip_dextraprop">
<span class="sig-name descname"><span class="pre">_strip_dextraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._strip_dextraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._strip_dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._strip_dsino">
<span class="sig-name descname"><span class="pre">_strip_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['RefPt',</span> <span class="pre">'nP']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._strip_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._strip_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._strip_init">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_strip_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._strip_init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._strip_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._to_SOLEDGE3X_get_data">
<span class="sig-name descname"><span class="pre">_to_SOLEDGE3X_get_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_extraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matlab_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matlab_platform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._to_SOLEDGE3X_get_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._to_SOLEDGE3X_get_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config._to_dict">
<span class="sig-name descname"><span class="pre">_to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config._to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config._to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.add_Struct">
<span class="sig-name descname"><span class="pre">add_Struct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">struct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Poly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dextraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.add_Struct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.add_Struct" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a Struct instance to the config</p>
<p>An already existing Struct subclass instance can be added
Or it will be created from the (Cls,Name,Poly,Lim) keyword args</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.add_extraprop">
<span class="sig-name descname"><span class="pre">add_extraprop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.add_extraprop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.add_extraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.calc_solidangle_particle">
<span class="sig-name descname"><span class="pre">calc_solidangle_particle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aniso</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.calc_solidangle_particle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.calc_solidangle_particle" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the solid angle subtended by a particle along a trajectory</p>
<p>The particle has radius r, and trajectory (array of points) traj
It is observed from pts (array of points)
Takes into account blocking of the field of view by structural elements</p>
<p>traj and pts are (3, N) and (3, M) arrays of cartesian coordinates</p>
<p>approx = True =&gt; use approximation
aniso = True =&gt; return also unit vector of emission
block = True consider LOS collisions (with Ves, Struct…)</p>
<dl class="simple">
<dt>if block:</dt><dd><p>config used for LOS collisions</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>traj</strong> (<em>np.ndarray</em>) – Array of (3, N) pts coordinates (X, Y, Z) representing the particle
positions</p></li>
<li><p><strong>pts</strong> (<em>np.ndarray</em>) – Array of (3, M) pts coordinates (X, Y, Z) representing points from
which the particle is observed</p></li>
<li><p><strong>rad</strong> (<em>float / np.ndarray</em>) – <dl class="simple">
<dt>Unique of multiple values for the radius of the spherical particle</dt><dd><p>if multiple, rad is a np.ndarray of shape (N,)</p>
</dd>
</dl>
</p></li>
<li><p><strong>approx</strong> (<em>None / bool</em>) – Flag indicating whether to compute the solid angle using a
1st-order series development (in which case the solid angle becomes
proportional to the radius of the particle, see Notes_Upgrades/)</p></li>
<li><p><strong>aniso</strong> (<em>None / bool</em>) – Flag indicating whether to consider anisotropic emissivity,
meaning the routine must also compute and return the unit vector
directing the flux from each pts to each position on the trajectory</p></li>
<li><p><strong>block</strong> (<em>None / bool</em>) – Flag indicating whether to check for vignetting by structural
elements provided by config</p></li>
<li><p><strong>Return</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>sang</strong> (<em>np.ndarray</em>) – (N, M) Array of floats, solid angles</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.calc_solidangle_particle_integrated">
<span class="sig-name descname"><span class="pre">calc_solidangle_particle_integrated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">part_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">approx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DZ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DPhi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.calc_solidangle_particle_integrated"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.calc_solidangle_particle_integrated" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the integrated solid angle map subtended by particles</p>
<p>Integrates the solid angle toroidally on a volume sampling of Config</p>
<p>The particle has radius r, and trajectory (array of points) traj
It is observed from pts (array of points)
Takes into account blocking of the field of view by structural elements</p>
<p>traj and pts are (3, N) and (3, M) arrays of cartesian coordinates</p>
<p>approx = True =&gt; use approximation
block = True consider LOS collisions (with Ves, Struct…)</p>
<dl class="simple">
<dt>if block:</dt><dd><p>config used for LOS collisions</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>traj</strong> (<em>np.ndarray</em>) – Array of (3, N) pts coordinates (X, Y, Z) representing the particle
positions</p></li>
<li><p><strong>pts</strong> (<em>np.ndarray</em>) – Array of (3, M) pts coordinates (X, Y, Z) representing points from
which the particle is observed</p></li>
<li><p><strong>rad</strong> (<em>float / np.ndarray</em>) – <dl class="simple">
<dt>Unique of multiple values for the radius of the spherical particle</dt><dd><p>if multiple, rad is a np.ndarray of shape (N,)</p>
</dd>
</dl>
</p></li>
<li><p><strong>approx</strong> (<em>None / bool</em>) – Flag indicating whether to compute the solid angle using a
1st-order series development (in which case the solid angle becomes
proportional to the radius of the particle, see Notes_Upgrades/)</p></li>
<li><p><strong>block</strong> (<em>None / bool</em>) – Flag indicating whether to check for vignetting by structural
elements provided by config</p></li>
<li><p><strong>Return</strong> – </p></li>
<li><p><strong>-------</strong> – </p></li>
<li><p><strong>sang</strong> (<em>np.ndarray</em>) – (N, M) Array of floats, solid angles</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.dStruct">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dStruct</span></span><a class="headerlink" href="#tofu.geom._core.Config.dStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.dextraprop">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dextraprop</span></span><a class="headerlink" href="#tofu.geom._core.Config.dextraprop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.dsino">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dsino</span></span><a class="headerlink" href="#tofu.geom._core.Config.dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.fdistfromwall">
<span class="sig-name descname"><span class="pre">fdistfromwall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.fdistfromwall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.fdistfromwall" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a callable (function) for detecting trajectory collisions
with wall</p>
<p>The function is continuous wrt time and space
It takes into account all Struct in Config, including non-axisymmetric
ones</p>
<p>It is desined for iterative root-finding algorithms and is thus called
for a unique position</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.from_SOLEDGE3X">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_SOLEDGE3X</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfe</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.from_SOLEDGE3X"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.from_SOLEDGE3X" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.from_svg">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_svg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pfe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_ref1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">point_ref2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.from_svg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.from_svg" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a config from a svg file (Inkscape)</p>
<dl class="simple">
<dt>The svg shall have only:</dt><dd><ul class="simple">
<li><p>closed polygons (possibly inc. Bezier curves)</p></li>
<li><p>an optional unique 2-points straight line (non-closed)
used for auto-scaling</p></li>
</ul>
</dd>
</dl>
<p>If Beziers curves are included, they will be discretized according to
resolution parameter res (absolute maximum tolerated distance between
points)</p>
<dl class="simple">
<dt>All closed polygons will be interpreted as:</dt><dd><ul class="simple">
<li><p>a Ves instance if it has no fill color</p></li>
<li><p>a PFC instance if it has a fill color</p></li>
</ul>
</dd>
</dl>
<p>The names are derived from Inkscape objects id</p>
<p>The coordinates are extracted from the svg
They can be rescaled either:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>automatically:</dt><dd><p>scaling computed from the unique straight line
and from the corresponding 2 points real-life coordinates
provided by the user as 2 iterables (list, arrays or tuples)
of len() = 2 (point_ref1 and point_ref2)
Alternatively a single point (point_ref1) and the length_ref
of the line can be provided</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>forcefully:</dt><dd><p>the origin (r0, z0) and a common scaling factor (scale) are
provided by the user</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>The result Config instance must have a Name and be associated to an
experiment (Exp).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.get_color">
<span class="sig-name descname"><span class="pre">get_color</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.get_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.get_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of rgba colors (same order as lStruct)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.get_kwdargs_LOS_isVis">
<span class="sig-name descname"><span class="pre">get_kwdargs_LOS_isVis</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.get_kwdargs_LOS_isVis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.get_kwdargs_LOS_isVis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.get_reflections">
<span class="sig-name descname"><span class="pre">get_reflections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vperp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.get_reflections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.get_reflections" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160; <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'l'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.get_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.get_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summary description of the object content</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.isInside">
<span class="sig-name descname"><span class="pre">isInside</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">In</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'(X,Y,Z)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.isInside"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.isInside" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a 2D array of bool</p>
<p>Equivalent to applying isInside to each Struct
Check self.lStruct[0].isInside? for details</p>
<dl class="simple">
<dt>Arg log determines how Struct with multiple Limits are treated</dt><dd><ul class="simple">
<li><p>‘all’ : True only if pts belong to all elements</p></li>
<li><p>‘any’ : True if pts belong to any element</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.lStruct">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">lStruct</span></span><a class="headerlink" href="#tofu.geom._core.Config.lStruct" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of Struct that was used for creation</p>
<p>As tofu objects or SavePath+SaveNames (according to strip status)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.lStructIn">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">lStructIn</span></span><a class="headerlink" href="#tofu.geom._core.Config.lStructIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of StructIn contained in self.lStruct</p>
<p>As tofu objects or SavePath+SaveNames (according to strip status)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.nLim">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nLim</span></span><a class="headerlink" href="#tofu.geom._core.Config.nLim" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Config.nStruct">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nStruct</span></span><a class="headerlink" href="#tofu.geom._core.Config.nStruct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.plot_phithetaproj_dist">
<span class="sig-name descname"><span class="pre">plot_phithetaproj_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refpt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invertx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.plot_phithetaproj_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.plot_phithetaproj_dist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.plot_sino">
<span class="sig-name descname"><span class="pre">plot_sino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.plot_sino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.plot_sino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.remove_Struct">
<span class="sig-name descname"><span class="pre">remove_Struct</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Cls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.remove_Struct"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.remove_Struct" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.save_to_imas">
<span class="sig-name descname"><span class="pre">save_to_imas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refshot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">occ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dryrun</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.save_to_imas"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.save_to_imas" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.set_colors_random">
<span class="sig-name descname"><span class="pre">set_colors_random</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">cmap=&lt;matplotlib.colors.ListedColormap</span> <span class="pre">object&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.set_colors_random"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.set_colors_random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.set_dsino">
<span class="sig-name descname"><span class="pre">set_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RefPt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.set_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.set_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.strip">
<span class="sig-name descname"><span class="pre">strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.strip" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove non-essential attributes to save memory / disk usage</p>
<p>Useful to save a very compressed version of the object
The higher strip =&gt; the more stripped the object
Use strip=0 to recover all atributes</p>
<dl class="simple">
<dt>See the difference by doing:</dt><dd><p>&gt; self.get_nbytes()
&gt; self.strip(-1)
&gt; self.get_nbytes()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – <dl>
<dt>Flag indicating how much to strip from the object</dt><dd><blockquote>
<div><p>0: Make complete (retrieve all attributes)
1: apply strip(1) to objects in self.lStruct
2: apply strip(2) to objects in self.lStruct
3: replace objects in self.lStruct by SavePath + SaveName</p>
</div></blockquote>
<p>-1: Equivalent to strip=3</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Config.to_SOLEDGE3X">
<span class="sig-name descname"><span class="pre">to_SOLEDGE3X</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_extraprop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matlab_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">matlab_platform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Config.to_SOLEDGE3X"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Config.to_SOLEDGE3X" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.PFC">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">PFC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Poly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Clock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath_Include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Type',</span> <span class="pre">'Exp',</span> <span class="pre">'Deg',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#PFC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.PFC" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.StructOut</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PFC._color">
<span class="sig-name descname"><span class="pre">_color</span></span><em class="property"> <span class="pre">=</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)</span></em><a class="headerlink" href="#tofu.geom._core.PFC._color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PFC._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)},</span> <span class="pre">'dphys':</span> <span class="pre">{},</span> <span class="pre">'dreflect':</span> <span class="pre">{'Type':</span> <span class="pre">'specular'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.PFC._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PFC._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'k',</span> <span class="pre">'fc':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8),</span> <span class="pre">'linewidth':</span> <span class="pre">1},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'ec':</span> <span class="pre">'none',</span> <span class="pre">'fc':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)}}}</span></em><a class="headerlink" href="#tofu.geom._core.PFC._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PFC._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.PFC._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.PlasmaDomain">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">PlasmaDomain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Poly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Clock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath_Include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Type',</span> <span class="pre">'Exp',</span> <span class="pre">'Deg',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#PlasmaDomain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.PlasmaDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.StructIn</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PlasmaDomain._color">
<span class="sig-name descname"><span class="pre">_color</span></span><em class="property"> <span class="pre">=</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0)</span></em><a class="headerlink" href="#tofu.geom._core.PlasmaDomain._color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PlasmaDomain._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0)},</span> <span class="pre">'dphys':</span> <span class="pre">{},</span> <span class="pre">'dreflect':</span> <span class="pre">{'Type':</span> <span class="pre">'specular'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.PlasmaDomain._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PlasmaDomain._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core.PlasmaDomain._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.PlasmaDomain._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.PlasmaDomain._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.Rays">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">Rays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lOptics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Etendues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Surfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dX12</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'geom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'optimized'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="tofu.html#tofu.utils.ToFuObject" title="tofu.utils.ToFuObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.utils.ToFuObject</span></code></a></p>
<p>Parent class of rays (ray-tracing), LOS, CamLOS1D and CamLOS2D</p>
<p>Focused on optimizing the computation time for many rays.</p>
<p>Each ray is defined by a starting point (D) and a unit vector(u).
If a vessel (Ves) and structural elements (LStruct) are provided,
the intersection points are automatically computed.</p>
<p>Methods for plootting, computing synthetic signal are provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Id</strong> (str  / <a class="reference internal" href="tofu.html#tofu.pathfile.ID" title="tofu.pathfile.ID"><code class="xref py py-class docutils literal notranslate"><span class="pre">ID</span></code></a>) – A name string or a <a class="reference internal" href="tofu.html#tofu.pathfile.ID" title="tofu.pathfile.ID"><code class="xref py py-class docutils literal notranslate"><span class="pre">ID</span></code></a> to identify this
instance,
if a string is provided, it is fed to <a class="reference internal" href="tofu.html#tofu.pathfile.ID" title="tofu.pathfile.ID"><code class="xref py py-class docutils literal notranslate"><span class="pre">ID</span></code></a></p></li>
<li><p><strong>Du</strong> (<em>iterable</em>) – <dl class="simple">
<dt>Iterable of len=2, containing 2 np.ndarrays represnting, for N rays:</dt><dd><ul>
<li><p>Ds: a (3,N) array of the (X,Y,Z) coordinates of starting points</p></li>
<li><p>us: a (3,N) array of the (X,Y,Z) coordinates of the unit vectors</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>Ves</strong> (None / <code class="xref py py-class docutils literal notranslate"><span class="pre">Ves</span></code>) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Ves</span></code> instance to be associated to the rays</p></li>
<li><p><strong>LStruct</strong> (None / <code class="xref py py-class docutils literal notranslate"><span class="pre">Struct</span></code> / list) – A <code class="xref py py-class docutils literal notranslate"><span class="pre">Struct</span></code> instance or list of such, for obstructions</p></li>
<li><p><strong>Sino_RefPt</strong> (<em>None / np.ndarray</em>) – <dl class="simple">
<dt>Iterable of len=2 with the coordinates of the sinogram reference point</dt><dd><ul>
<li><p>(R,Z) coordinates if the vessel is of Type ‘Tor’</p></li>
<li><p>(Y,Z) coordinates if the vessel is of Type ‘Lin’</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>Exp</strong> (<em>None / str</em>) – <dl class="simple">
<dt>Experiment to which the LOS belongs:</dt><dd><ul>
<li><p>if both Exp and Ves are provided: Exp==Ves.Id.Exp</p></li>
<li><p>if Ves is provided but not Exp: Ves.Id.Exp is used</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>Diag</strong> (<em>None / str</em>) – Diagnostic to which the LOS belongs</p></li>
<li><p><strong>shot</strong> (<em>None / int</em>) – Shot number from which this LOS is valid</p></li>
<li><p><strong>SavePath</strong> (<em>None / str</em>) – If provided, default saving path of the object</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.D">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">D</span></span><a class="headerlink" href="#tofu.geom._core.Rays.D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.Etendues">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Etendues</span></span><a class="headerlink" href="#tofu.geom._core.Rays.Etendues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.Surfaces">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Surfaces</span></span><a class="headerlink" href="#tofu.geom._core.Rays.Surfaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._calc_signal_postformat">
<span class="sig-name descname"><span class="pre">_calc_signal_postformat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">sig</span></em>, <em class="sig-param"><span class="pre">Brightness=True</span></em>, <em class="sig-param"><span class="pre">dataname=None</span></em>, <em class="sig-param"><span class="pre">t=None</span></em>, <em class="sig-param"><span class="pre">E=None</span></em>, <em class="sig-param"><span class="pre">units=None</span></em>, <em class="sig-param"><span class="pre">plot=True</span></em>, <em class="sig-param"><span class="pre">out=&lt;class</span> <span class="pre">'object'&gt;</span></em>, <em class="sig-param"><span class="pre">fs=None</span></em>, <em class="sig-param"><span class="pre">dmargin=None</span></em>, <em class="sig-param"><span class="pre">wintit=None</span></em>, <em class="sig-param"><span class="pre">invert=True</span></em>, <em class="sig-param"><span class="pre">draw=True</span></em>, <em class="sig-param"><span class="pre">connect=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._calc_signal_postformat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._calc_signal_postformat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._calc_signal_preformat">
<span class="sig-name descname"><span class="pre">_calc_signal_preformat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ind=None</span></em>, <em class="sig-param"><span class="pre">DL=None</span></em>, <em class="sig-param"><span class="pre">t=None</span></em>, <em class="sig-param"><span class="pre">out=&lt;class</span> <span class="pre">'object'&gt;</span></em>, <em class="sig-param"><span class="pre">Brightness=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._calc_signal_preformat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._calc_signal_preformat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._check_indch">
<span class="sig-name descname"><span class="pre">_check_indch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ind</span></em>, <em class="sig-param"><span class="pre">out=&lt;class</span> <span class="pre">'int'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._check_indch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._check_indch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_dOptics">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_checkformat_dOptics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lOptics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_dOptics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_dOptics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_dX12">
<span class="sig-name descname"><span class="pre">_checkformat_dX12</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dX12</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_dX12"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_fromdict_dconfig">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_fromdict_dconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dconfig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_fromdict_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_fromdict_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_Id">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_Id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_Id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_Id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dES">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dES</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dES"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dchans">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dchans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dchans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dconfig">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_dconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dgeom">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dmisc">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._checkformat_inputs_dsino">
<span class="sig-name descname"><span class="pre">_checkformat_inputs_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._checkformat_inputs_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._checkformat_inputs_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._complete_dX12">
<span class="sig-name descname"><span class="pre">_complete_dX12</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._complete_dX12"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._complete_dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._compute_dgeom_extra1">
<span class="sig-name descname"><span class="pre">_compute_dgeom_extra1</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._compute_dgeom_extra1"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._compute_dgeom_extra1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._compute_dgeom_extra2D">
<span class="sig-name descname"><span class="pre">_compute_dgeom_extra2D</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._compute_dgeom_extra2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._compute_dgeom_extra2D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._compute_dgeom_kRMin">
<span class="sig-name descname"><span class="pre">_compute_dgeom_kRMin</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._compute_dgeom_kRMin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._compute_dgeom_kRMin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._compute_dsino_extra">
<span class="sig-name descname"><span class="pre">_compute_dsino_extra</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._compute_dsino_extra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._compute_dsino_extra" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._compute_kInOut">
<span class="sig-name descname"><span class="pre">_compute_kInOut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">largs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dkwd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._compute_kInOut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._compute_kInOut" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._dcases">
<span class="sig-name descname"><span class="pre">_dcases</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'A':</span> <span class="pre">{'lk':</span> <span class="pre">[],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'tuple'&gt;},</span> <span class="pre">'B':</span> <span class="pre">{'lk':</span> <span class="pre">['D',</span> <span class="pre">'u'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;},</span> <span class="pre">'C':</span> <span class="pre">{'lk':</span> <span class="pre">['D',</span> <span class="pre">'pinhole'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;},</span> <span class="pre">'D':</span> <span class="pre">{'lk':</span> <span class="pre">['pinhole',</span> <span class="pre">'F',</span> <span class="pre">'nIn',</span> <span class="pre">'e1',</span> <span class="pre">'x1',</span> <span class="pre">'e2',</span> <span class="pre">'x2'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;},</span> <span class="pre">'E':</span> <span class="pre">{'lk':</span> <span class="pre">['pinhole',</span> <span class="pre">'F',</span> <span class="pre">'nIn',</span> <span class="pre">'e1',</span> <span class="pre">'l1',</span> <span class="pre">'n1',</span> <span class="pre">'e2',</span> <span class="pre">'l2',</span> <span class="pre">'n2'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;},</span> <span class="pre">'F':</span> <span class="pre">{'lk':</span> <span class="pre">['pinhole',</span> <span class="pre">'F',</span> <span class="pre">'angles',</span> <span class="pre">'x1',</span> <span class="pre">'x2'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;},</span> <span class="pre">'G':</span> <span class="pre">{'lk':</span> <span class="pre">['pinhole',</span> <span class="pre">'F',</span> <span class="pre">'angles',</span> <span class="pre">'l1',</span> <span class="pre">'n1',</span> <span class="pre">'l2',</span> <span class="pre">'n2'],</span> <span class="pre">'type':</span> <span class="pre">&lt;class</span> <span class="pre">'dict'&gt;}}</span></em><a class="headerlink" href="#tofu.geom._core.Rays._dcases" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">'k'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.Rays._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'m':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core.Rays._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.Rays._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._from_dict">
<span class="sig-name descname"><span class="pre">_from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dOptics">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dOptics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dOptics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dOptics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dX12">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dX12</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dX12"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dchans">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dchans</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dchans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dconfig">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dconfig</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dgeom">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dgeom</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dmisc">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dmisc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_keys_dsino">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dsino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_keys_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_keys_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dOptics">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dOptics</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dOptics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dOptics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dX12">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dX12</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dX12"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dchans">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dchans</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dchans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dconfig">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dconfig</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dgeom">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sino</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dmisc">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dmisc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_largs_dsino">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dsino</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_largs_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_largs_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_plotL">
<span class="sig-name descname"><span class="pre">_get_plotL</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_plotL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_plotL" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the (R,Z) coordinates of the cross-section projections</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._get_x12_fromflat">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_get_x12_fromflat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X12</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._get_x12_fromflat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._get_x12_fromflat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._init">
<span class="sig-name descname"><span class="pre">_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Etendues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Surfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'optimized'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._init" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._is2D">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_is2D</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._is2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._is2D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._isLOS">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_isLOS</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._isLOS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._isLOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._kInOut_Isoflux_inputs">
<span class="sig-name descname"><span class="pre">_kInOut_Isoflux_inputs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lVIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._kInOut_Isoflux_inputs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._kInOut_Isoflux_inputs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._kInOut_Isoflux_inputs_usr">
<span class="sig-name descname"><span class="pre">_kInOut_Isoflux_inputs_usr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lVIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._kInOut_Isoflux_inputs_usr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._kInOut_Isoflux_inputs_usr" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._method">
<span class="sig-name descname"><span class="pre">_method</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'optimized'</span></em><a class="headerlink" href="#tofu.geom._core.Rays._method" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._prepare_inputs_kInOut">
<span class="sig-name descname"><span class="pre">_prepare_inputs_kInOut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indStruct</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._prepare_inputs_kInOut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._prepare_inputs_kInOut" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._reset">
<span class="sig-name descname"><span class="pre">_reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._reset" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._rotate_DPinholeu">
<span class="sig-name descname"><span class="pre">_rotate_DPinholeu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._rotate_DPinholeu"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._rotate_DPinholeu" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._set_color">
<span class="sig-name descname"><span class="pre">_set_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._set_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._set_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._set_color_ddef">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_set_color_ddef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._set_color_ddef"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._set_color_ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._set_dOptics">
<span class="sig-name descname"><span class="pre">_set_dOptics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lOptics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._set_dOptics"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._set_dOptics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._set_dgeom">
<span class="sig-name descname"><span class="pre">_set_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Etendues</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Surfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._set_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._set_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._set_dmisc">
<span class="sig-name descname"><span class="pre">_set_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._set_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._set_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip">
<span class="sig-name descname"><span class="pre">_strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip_dconfig">
<span class="sig-name descname"><span class="pre">_strip_dconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip_dgeom">
<span class="sig-name descname"><span class="pre">_strip_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip_dmisc">
<span class="sig-name descname"><span class="pre">_strip_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['color']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip_dsino">
<span class="sig-name descname"><span class="pre">_strip_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._strip_init">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_strip_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._strip_init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._strip_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._to_dict">
<span class="sig-name descname"><span class="pre">_to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._update_dgeom_from_TransRotFoc">
<span class="sig-name descname"><span class="pre">_update_dgeom_from_TransRotFoc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'x'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._update_dgeom_from_TransRotFoc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._update_dgeom_from_TransRotFoc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays._update_or_copy">
<span class="sig-name descname"><span class="pre">_update_or_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pinhole</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays._update_or_copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays._update_or_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.add_reflections">
<span class="sig-name descname"><span class="pre">add_reflections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.add_reflections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.add_reflections" title="Permalink to this definition">¶</a></dt>
<dd><p>Add relfected LOS to the camera</p>
<dl class="simple">
<dt>Reflected LOS can be of 3 types:</dt><dd><ul class="simple">
<li><p>‘speculiar’:  standard mirror-like reflection</p></li>
<li><p>‘diffusive’:  random reflection</p></li>
<li><p>‘ccube’:      corner-cube reflection (ray goes back its way)</p></li>
</ul>
</dd>
</dl>
<p>As opposed to self.get_reflections_as_cam(), the reflected rays are
stored in the camera object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_kInkOut_Isoflux">
<span class="sig-name descname"><span class="pre">calc_kInkOut_Isoflux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lVIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kInOut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_kInkOut_Isoflux"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_kInkOut_Isoflux" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the intersection points of each ray with each isoflux</p>
<p>The isofluxes are provided as a list of 2D closed polygons</p>
<p>The intersections are the inward and outward intersections
They are retruned as two np.ndarrays: kIn and kOut
Each array contains the length parameter along the ray for each isoflux</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_length_in_isoflux">
<span class="sig-name descname"><span class="pre">calc_length_in_isoflux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lPoly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lVIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kInOut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_length_in_isoflux"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_length_in_isoflux" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the length of each LOS inside each isoflux</p>
<p>Uses self.calc_kInkOut_Isoflux() to compute the linear abscissa (k) of
the entry points (kIn) and exit points (kOut) for each LOS</p>
<p>The isofluxes must be provided as a list of polygons</p>
<p>The length is returned as a (nPoly, nLOS) 2d array</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_min_geom_radius">
<span class="sig-name descname"><span class="pre">calc_min_geom_radius</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_min_geom_radius"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_min_geom_radius" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the minimum geom. radius of each LOS, from an arbitrary axis</p>
<p>The axis mut be provided as a (R,Z) iterable
Uses self.set_dsino()</p>
<dl class="simple">
<dt>p:      np.ndarray</dt><dd><p>(nLOS,) array of minimal radius (or impact parameter)</p>
</dd>
<dt>theta:  np.ndarray</dt><dd><p>(nLOS,) array of associated theta with respect to axis</p>
</dd>
<dt>pts:    np.ndarray</dt><dd><p>(3,nLOS) array of (X,Y,Z) coordinates of associated points on LOS</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_min_rho_from_Plasma2D">
<span class="sig-name descname"><span class="pre">calc_min_rho_from_Plasma2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">plasma</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'min'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sum'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_space</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">nan</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_min_rho_from_Plasma2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_min_rho_from_Plasma2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the min/max value of scalar field quant for each LOS</p>
<p>Typically used to get the minimal normalized minor radius
But can be used for any quantity available in plasma if:</p>
<blockquote>
<div><ul class="simple">
<li><p>it is a 2d profile</p></li>
<li><p>it is a 1d profile that can be interpolated on a 2d mesh</p></li>
</ul>
</div></blockquote>
<p>Currently sample each LOS with desired resolution and returns the
absolute min/max interpolated value (and associated point)</p>
<dl class="simple">
<dt>See self.get_sample() for details on sampling arguments:</dt><dd><ul class="simple">
<li><p>res, resMode, method</p></li>
</ul>
</dd>
<dt>See Plasma2D.interp_pts2profile() for details on interpolation args:</dt><dd><ul class="simple">
<li><p>t, quant, q2dref, q1dref, interp_t, interp_space, fill_value</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>val:        np.ndarray</dt><dd><p>(nt, nLOS) array of min/max values</p>
</dd>
<dt>pts:        np.ndarray</dt><dd><p>(nt, nLOS, 3) array of (X,Y,Z) coordinates of associated points
Only returned if pts = True</p>
</dd>
<dt>t:          np.ndarray</dt><dd><p>(nt,) array of time steps at which the interpolations were made</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_signal">
<span class="sig-name descname"><span class="pre">calc_signal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">func</span></em>, <em class="sig-param"><span class="pre">t=None</span></em>, <em class="sig-param"><span class="pre">ani=None</span></em>, <em class="sig-param"><span class="pre">fkwdargs={}</span></em>, <em class="sig-param"><span class="pre">Brightness=True</span></em>, <em class="sig-param"><span class="pre">res=None</span></em>, <em class="sig-param"><span class="pre">DL=None</span></em>, <em class="sig-param"><span class="pre">resMode='abs'</span></em>, <em class="sig-param"><span class="pre">method='sum'</span></em>, <em class="sig-param"><span class="pre">minimize='calls'</span></em>, <em class="sig-param"><span class="pre">num_threads=16</span></em>, <em class="sig-param"><span class="pre">reflections=True</span></em>, <em class="sig-param"><span class="pre">coefs=None</span></em>, <em class="sig-param"><span class="pre">coefs_reflect=None</span></em>, <em class="sig-param"><span class="pre">ind=None</span></em>, <em class="sig-param"><span class="pre">returnas=&lt;class</span> <span class="pre">'object'&gt;</span></em>, <em class="sig-param"><span class="pre">plot=True</span></em>, <em class="sig-param"><span class="pre">dataname=None</span></em>, <em class="sig-param"><span class="pre">fs=None</span></em>, <em class="sig-param"><span class="pre">dmargin=None</span></em>, <em class="sig-param"><span class="pre">wintit=None</span></em>, <em class="sig-param"><span class="pre">invert=True</span></em>, <em class="sig-param"><span class="pre">units=None</span></em>, <em class="sig-param"><span class="pre">draw=True</span></em>, <em class="sig-param"><span class="pre">connect=True</span></em>, <em class="sig-param"><span class="pre">newcalc=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the line-integrated emissivity</p>
<p>Beware, by default, Brightness=True and it is only a line-integral !</p>
<p>Indeed, to get the received power, you need an estimate of the Etendue
(previously set using self.set_Etendues()) and use Brightness=False.</p>
<p>Hence, if Brightness=True and if
the emissivity is provided in W/m3 (resp. W/m3/sr),
=&gt; the method returns W/m2 (resp. W/m2/sr)
The line is sampled using <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sample()</span></code>,</p>
<p>Except func, arguments common to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_sample()</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable</em>) – <p>The user-provided emissivity function
Shall take at least:</p>
<blockquote>
<div><p>func(pts, t=None, vect=None)</p>
</div></blockquote>
<dl class="simple">
<dt>where:</dt><dd><ul>
<li><p>pts : (3,N) np.ndarray, (X,Y,Z) coordinates of points</p></li>
<li><p>t   : None / (nt,) np.ndarray, time vector</p></li>
<li><p>vect: None / (3,N) np.ndarray, unit direction vectors (X,Y,Z)</p></li>
</ul>
</dd>
<dt>Should return at least:</dt><dd><ul>
<li><p>val : (N,) np.ndarray, local emissivity values</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>method</strong> (<em>string</em><em>, </em><em>the integral can be computed using 3 different methods</em>) – <ul>
<li><p>‘sum’:    A numpy.sum() on the local values (x segments) DEFAULT</p></li>
<li><p>’simps’:  using <code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.integrate.simps()</span></code></p></li>
<li><p>’romb’:   using <code class="xref py py-meth docutils literal notranslate"><span class="pre">scipy.integrate.romb()</span></code></p></li>
</ul>
</p></li>
<li><p><strong>minimize</strong> (<em>string</em><em>, </em><em>method to minimize for computation optimization</em>) – <ul>
<li><p>“calls”: minimal number of calls to <cite>func</cite> (default)</p></li>
<li><p>”memory”: slowest method, to use only if “out of memory” error</p></li>
<li><p>”hybrid”: mix of before-mentioned methods.</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>sig</strong> (<em>np.ndarray</em>) – The computed signal, a 1d or 2d array depending on whether a time
vector was provided.</p></li>
<li><p><strong>units</strong> (<em>str</em>) – Units of the result</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.calc_signal_from_Plasma2D">
<span class="sig-name descname"><span class="pre">calc_signal_from_Plasma2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">plasma2d</span></em>, <em class="sig-param"><span class="pre">t=None</span></em>, <em class="sig-param"><span class="pre">newcalc=True</span></em>, <em class="sig-param"><span class="pre">quant=None</span></em>, <em class="sig-param"><span class="pre">ref1d=None</span></em>, <em class="sig-param"><span class="pre">ref2d=None</span></em>, <em class="sig-param"><span class="pre">q2dR=None</span></em>, <em class="sig-param"><span class="pre">q2dPhi=None</span></em>, <em class="sig-param"><span class="pre">q2dZ=None</span></em>, <em class="sig-param"><span class="pre">Type=None</span></em>, <em class="sig-param"><span class="pre">Brightness=True</span></em>, <em class="sig-param"><span class="pre">interp_t='nearest'</span></em>, <em class="sig-param"><span class="pre">interp_space=None</span></em>, <em class="sig-param"><span class="pre">fill_value=None</span></em>, <em class="sig-param"><span class="pre">res=None</span></em>, <em class="sig-param"><span class="pre">DL=None</span></em>, <em class="sig-param"><span class="pre">resMode='abs'</span></em>, <em class="sig-param"><span class="pre">method='sum'</span></em>, <em class="sig-param"><span class="pre">minimize='calls'</span></em>, <em class="sig-param"><span class="pre">num_threads=16</span></em>, <em class="sig-param"><span class="pre">reflections=True</span></em>, <em class="sig-param"><span class="pre">coefs=None</span></em>, <em class="sig-param"><span class="pre">coefs_reflect=None</span></em>, <em class="sig-param"><span class="pre">ind=None</span></em>, <em class="sig-param"><span class="pre">returnas=&lt;class</span> <span class="pre">'object'&gt;</span></em>, <em class="sig-param"><span class="pre">plot=True</span></em>, <em class="sig-param"><span class="pre">dataname=None</span></em>, <em class="sig-param"><span class="pre">fs=None</span></em>, <em class="sig-param"><span class="pre">dmargin=None</span></em>, <em class="sig-param"><span class="pre">wintit=None</span></em>, <em class="sig-param"><span class="pre">invert=True</span></em>, <em class="sig-param"><span class="pre">units=None</span></em>, <em class="sig-param"><span class="pre">draw=True</span></em>, <em class="sig-param"><span class="pre">connect=True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.calc_signal_from_Plasma2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.calc_signal_from_Plasma2D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.check_ff">
<span class="sig-name descname"><span class="pre">check_ff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ani</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.check_ff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.check_ff" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.compute_dgeom">
<span class="sig-name descname"><span class="pre">compute_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_debug_plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.compute_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.compute_dgeom" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute dictionnary of geometrical attributes (dgeom)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>show_debug_plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – In case some lines of sight have no visibility inside the tokamak,
they will be considered invalid. tofu will issue a warning with
their indices and if show_debug_plot is True, try to plot a 3d
figure to help understand why these los have no visibility</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.config">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">config</span></span><a class="headerlink" href="#tofu.geom._core.Rays.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.dchans">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dchans</span></span><a class="headerlink" href="#tofu.geom._core.Rays.dchans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.dgeom">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dgeom</span></span><a class="headerlink" href="#tofu.geom._core.Rays.dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.dsino">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dsino</span></span><a class="headerlink" href="#tofu.geom._core.Rays.dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_indStruct_computeInOut">
<span class="sig-name descname"><span class="pre">get_indStruct_computeInOut</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">unique_In</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_indStruct_computeInOut"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_indStruct_computeInOut" title="Permalink to this definition">¶</a></dt>
<dd><p>The indices of structures with compute = True</p>
<dl class="simple">
<dt>The indidces refer to self.config.lStruct</dt><dd><ul class="simple">
<li><p>The first array corresponds to Struct of type In</p></li>
<li><p>The second array corresponds to Struct of type Out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_inspector">
<span class="sig-name descname"><span class="pre">get_inspector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_inspector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_inspector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_reflections_as_cam">
<span class="sig-name descname"><span class="pre">get_reflections_as_cam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_reflections_as_cam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_reflections_as_cam" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a camera made of reflected LOS</p>
<dl class="simple">
<dt>Reflected LOS can be of 3 types:</dt><dd><ul class="simple">
<li><p>‘speculiar’:  standard mirror-like reflection</p></li>
<li><p>‘diffusive’:  random reflection</p></li>
<li><p>‘ccube’:      corner-cube reflection (ray goes back its way)</p></li>
</ul>
</dd>
</dl>
<p>As opposed to self.add_reflections(), the reflected rays are
return as an independent camera (CamLOS1D)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_sample">
<span class="sig-name descname"><span class="pre">get_sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resMode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'abs'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">DL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sum'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compact</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_threads</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a linear sampling of the LOS</p>
<p>The LOS is sampled into a series a points and segments lengths
The resolution (segments length) is &lt;= res
The sampling can be done according to different methods
It is possible to sample only a subset of the LOS</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Desired resolution</p></li>
<li><p><strong>resMode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag indicating res should be understood as:</dt><dd><ul>
<li><p>’abs’:    an absolute distance in meters</p></li>
<li><p>’rel’:    a relative distance (fraction of the LOS length)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>DL</strong> (<em>None / iterable</em>) – The fraction [L1;L2] of the LOS that should be sampled, where
L1 and L2 are distances from the starting point of the LOS (LOS.D)
DL can be an iterable of len()==2 (identical to all los), or a
(2,nlos) array</p></li>
<li><p><strong>method</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl>
<dt>Flag indicating which to use for sampling:</dt><dd><ul>
<li><dl>
<dt>’sum’:    the LOS is sampled into N segments of equal length,</dt><dd><dl class="simple">
<dt>where N is the smallest int such that:</dt><dd><ul class="simple">
<li><p>segment length &lt;= resolution(res,resMode)</p></li>
</ul>
</dd>
</dl>
<p>The points returned are the center of each segment</p>
</dd>
</dl>
</li>
<li><dl>
<dt>’simps’:  the LOS is sampled into N segments of equal length,</dt><dd><dl class="simple">
<dt>where N is the smallest int such that:</dt><dd><ul class="simple">
<li><p>segment length &lt;= resolution(res,resMode)</p></li>
<li><p>N is even</p></li>
</ul>
</dd>
</dl>
<p>The points returned are the egdes of each segment</p>
</dd>
</dl>
</li>
<li><dl>
<dt>’romb’:   the LOS is sampled into N segments of equal length,</dt><dd><dl class="simple">
<dt>where N is the smallest int such that:</dt><dd><ul class="simple">
<li><p>segment length &lt;= resolution(res,resMode)</p></li>
<li><p>N = 2^k + 1</p></li>
</ul>
</dd>
</dl>
<p>The points returned are the egdes of each segment</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>ind</strong> (<em>None / iterable of int</em>) – indices of the LOS to be sampled</p></li>
<li><p><strong>pts</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether to return only the abscissa parameter k
(False) or the 3D pts coordinates (True)</p></li>
<li><p><strong>compact</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag incating whether to retrun the sampled pts of all los in a
single concatenated array (True) or splitted into
a list of nlos arrays)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul>
<li><p><strong>k</strong> (<em>np.ndarray</em>) –</p>
<dl>
<dt>if pts == False:</dt><dd><dl class="simple">
<dt>A (npts,) array of the abscissa parameters</dt><dd><p>(i.e.: points distances from the LOS starting points)</p>
</dd>
</dl>
<p>In order to get the 3D cartesian coordinates of pts do:</p>
</dd>
<dt>if pts == True:</dt><dd><p>A (3,npts) array of the sampled points 3D cartesian coordinates</p>
</dd>
</dl>
</li>
<li><p><strong>reseff</strong> (<em>np.ndarray</em>) – A (nlos,) array of the effective resolution (&lt;= res input), as an
absolute distance</p></li>
<li><p><strong>ind</strong> (<em>np.ndarray</em>) – A (nlos-1,) array of integere indices (where to split k to separate
the points of each los). e.g.: lk = np.split(k,ind)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_subset">
<span class="sig-name descname"><span class="pre">get_subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance which is a sub-set of the camera</p>
<p>The subset is the same camera but with only the LOS selected by indch
It can be assigned a new Name (str), or the same one (True)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_touch_colors">
<span class="sig-name descname"><span class="pre">get_touch_colors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dElt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgba</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_touch_colors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_touch_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Get array of colors per LOS (color set by the touched Struct)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.get_touch_dict">
<span class="sig-name descname"><span class="pre">get_touch_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ind=None</span></em>, <em class="sig-param"><span class="pre">out=&lt;class</span> <span class="pre">'bool'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.get_touch_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.get_touch_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dictionnary of Cls_Name struct with indices of Rays touching</p>
<dl class="simple">
<dt>Only includes Struct object with compute = True</dt><dd><p>(as returned by self.lStruct__computeInOut_computeInOut)</p>
</dd>
</dl>
<p>Also return the associated colors
If in is not None, the indices for each Struct are split between:</p>
<blockquote>
<div><ul class="simple">
<li><p>indok : rays touching Struct and in ind</p></li>
<li><p>indout: rays touching Struct but not in ind</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.isInPoloidalPlane">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">isInPoloidalPlane</span></span><a class="headerlink" href="#tofu.geom._core.Rays.isInPoloidalPlane" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.isPinhole">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">isPinhole</span></span><a class="headerlink" href="#tofu.geom._core.Rays.isPinhole" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.kIn">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">kIn</span></span><a class="headerlink" href="#tofu.geom._core.Rays.kIn" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.kMin">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">kMin</span></span><a class="headerlink" href="#tofu.geom._core.Rays.kMin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.kOut">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">kOut</span></span><a class="headerlink" href="#tofu.geom._core.Rays.kOut" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.lOptics">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">lOptics</span></span><a class="headerlink" href="#tofu.geom._core.Rays.lOptics" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.move">
<span class="sig-name descname"><span class="pre">move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Set new position to desired param according to default movement</p>
<p>Can only be used if default movement was set before
See self.set_move()</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.nRays">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">nRays</span></span><a class="headerlink" href="#tofu.geom._core.Rays.nRays" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.pinhole">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pinhole</span></span><a class="headerlink" href="#tofu.geom._core.Rays.pinhole" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'L'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtO</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the Rays / LOS, in the chosen projection(s)</p>
<p>Optionnally also plot associated <code class="xref py py-class docutils literal notranslate"><span class="pre">Ves</span></code> and Struct
The plot can also include:</p>
<blockquote>
<div><ul class="simple">
<li><p>special points</p></li>
<li><p>the unit directing vector</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lax</strong> (<em>list / plt.Axes</em>) – The axes for plotting (list of 2 axes if Proj=’All’)
If None a new figure with new axes is created</p></li>
<li><p><strong>proj</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag specifying the kind of projection:</dt><dd><ul>
<li><p>’Cross’ : cross-section</p></li>
<li><p>’Hor’ : horizontal</p></li>
<li><p>’All’ : both cross-section and horizontal (on 2 axes)</p></li>
<li><p>’3d’ : a (matplotlib) 3d plot</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>projections</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether to plot also the reflected rays
Assuming some reflected rays are present (self.add_reflections())</p></li>
<li><p><strong>element</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <p>Flag specifying which elements to plot
Each capital letter corresponds to an element:</p>
<blockquote>
<div><ul>
<li><p>’L’: LOS</p></li>
<li><p>’D’: Starting point of the LOS</p></li>
<li><p>’I’: Input point (i.e.: where the LOS enters the Vessel)</p></li>
<li><p>’O’: Output point (i.e.: where the LOS exits the Vessel)</p></li>
<li><p>’R’: Point of minimal major radius R (only if Ves.Type=’Tor’)</p></li>
<li><dl class="simple">
<dt>’P’: Point of used for impact parameter (i.e.: with minimal</dt><dd><p>distance to reference point Sino_RefPt)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p></li>
<li><p><strong>Lplot</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag specifying the length to plot:</dt><dd><ul>
<li><p>’Tot’: total length, from starting point (D) to output point</p></li>
<li><p>’In’ : only the in-vessel fraction (from input to output)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>element_config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Fed to self.config.plot()</p></li>
<li><p><strong>Leg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Legend, if Leg=’’ the LOS name is used</p></li>
<li><p><strong>dL</strong> (<em>dict / None</em>) – Dictionary of properties for plotting the lines
Fed to plt.Axes.plot(), set to default if None</p></li>
<li><p><strong>dPtD</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting point ‘D’</p></li>
<li><p><strong>dPtI</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting point ‘I’</p></li>
<li><p><strong>dPtO</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting point ‘O’</p></li>
<li><p><strong>dPtR</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting point ‘R’</p></li>
<li><p><strong>dPtP</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting point ‘P’</p></li>
<li><p><strong>dLeg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><em>None</em></a>) – Dictionary of properties for plotting the legend
Fed to plt.legend(), the legend is not plotted if None</p></li>
<li><p><strong>draw</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether fig.canvas.draw() shall be called</p></li>
<li><p><strong>a4</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether to plot the figure in a4 dimensions</p></li>
<li><p><strong>Test</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – </p></li>
<li><p><strong>a4</strong> – Flag indicating whether to plot the figure in a4 dimensions</p></li>
<li><p><strong>Test</strong> – </p></li>
<li><p><strong>a4</strong> – Flag indicating whether to plot the figure in a4 dimensions</p></li>
<li><p><strong>Test</strong> – </p></li>
<li><p><strong>a4</strong> – Flag indicating whether to plot the figure in a4 dimensions</p></li>
<li><p><strong>Test</strong> – </p></li>
<li><p><strong>Test</strong> – Flag indicating whether the inputs should be tested for conformity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>La</strong> (<em>list / plt.Axes</em>) – Handles of the axes used for plotting (list if Proj=’All’)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.plot_sino">
<span class="sig-name descname"><span class="pre">plot_sino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dVes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'edgecolor':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'facecolor':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'linestyle':</span> <span class="pre">'solid',</span> <span class="pre">'linewidth':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.plot_sino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.plot_sino" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the LOS in projection space (sinogram)</p>
<p>Plot the Rays in projection space (cf. sinograms) as points.
Can also optionnally plot the associated <code class="xref py py-class docutils literal notranslate"><span class="pre">Ves</span></code></p>
<p>Can plot the conventional projection-space (in 2D in a cross-section),
or a 3D extrapolation of it, where the third coordinate is provided by
the angle that the LOS makes with the cross-section plane
(useful in case of multiple LOS with a partially tangential view)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Proj</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag indicating whether to plot:</dt><dd><ul>
<li><p>’Cross’:  a classic sinogram (vessel cross-section)</p></li>
<li><p>’3d’: an extended 3D version (‘3d’), with an additional angle</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>ax</strong> (<em>None / plt.Axes</em>) – The axes on which to plot, if None a new figure is created</p></li>
<li><p><strong>Elt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag indicating which elements to plot (one per capital letter):</dt><dd><ul>
<li><p>’L’: LOS</p></li>
<li><p>’V’: Vessel</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>Ang</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag indicating which angle to use for the impact parameter:</dt><dd><ul>
<li><p>’xi’: the angle of the line itself</p></li>
<li><p>’theta’: its impact parameter (theta)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>AngUnit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag for the angle units to be displayed:</dt><dd><ul>
<li><p>’rad’: for radians</p></li>
<li><p>’deg’: for degrees</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>Sketch</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether to plot a skecth with angles definitions</p></li>
<li><p><strong>dL</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting the Rays points</p></li>
<li><p><strong>dV</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – Dictionary of properties for plotting the vessel envelopp</p></li>
<li><p><strong>dLeg</strong> (<em>None / dict</em>) – Dictionary of properties for plotting the legend
The legend is not plotted if None</p></li>
<li><p><strong>draw</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether to draw the figure</p></li>
<li><p><strong>a4</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether the figure should be a4</p></li>
<li><p><strong>Test</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Flag indicating whether the inputs shall be tested for conformity</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ax</strong> (<em>plt.Axes</em>) – The axes used to plot</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.plot_touch">
<span class="sig-name descname"><span class="pre">plot_touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lengths'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.plot_touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.plot_touch" title="Permalink to this definition">¶</a></dt>
<dd><p>Interactive plot of the camera and the structures it touches</p>
<p>The camera LOS are plotted in poloidal and horizontal projections
The associated Config is also plotted
The plot shows which strutural element is touched by each LOS</p>
<p>In addition, an extra quantity can be mapped to alpha (transparency)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>None / str</em>) – Only relevant if self.dchans was defined
key is then a key to sekf.dchans</p></li>
<li><p><strong>quant</strong> (<em>None / str</em>) – <p>Flag indicating which extra quantity is used to map alpha:
- ‘lengths’ (default): the length of each LOS
- ‘angles’ : the angle of incidence of each LOS</p>
<blockquote>
<div><dl class="simple">
<dt>(with respect to the normal of the surface touched,</dt><dd><p>useful for assessing reflection probabilities)</p>
</dd>
</dl>
</div></blockquote>
<ul>
<li><dl class="simple">
<dt>’indices’: the index of each LOS</dt><dd><p>(useful for checking numbering)</p>
</dd>
</dl>
</li>
<li><p>’Etendues’: the etendue associated to each LOS (user-provided)</p></li>
<li><p>’Surfaces’: the surfaces associated to each LOS (user-provided)</p></li>
</ul>
</p></li>
<li><p><strong>Lplot</strong> (<em>None / str</em>) – <dl class="simple">
<dt>Flag indicating whether to plot:</dt><dd><ul>
<li><p>’tot’: the full length of the LOS</p></li>
<li><p>’in’: only the part that is inside the vessel</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>invert</strong> (<em>None / bool</em>) – Flag indicating whether to plot 2D camera images inverted (pinhole)</p></li>
<li><p><strong>ind</strong> (<em>None / np.ndarray</em>) – Array of bool indices used to select only a subset of the LOS</p></li>
<li><p><strong>Bck</strong> (<em>None / bool</em>) – Flag indicating whether to plot the background LOS</p></li>
<li><p><strong>fs</strong> (<em>None / tuple</em>) – figure size in inches</p></li>
<li><p><strong>wintit</strong> (<em>None / str</em>) – Title for the window</p></li>
<li><p><strong>tit</strong> (<em>None / str</em>) – Title for the figure</p></li>
<li><p><strong>connect</strong> (<em>None / bool</em>) – Flag indicating to connect interactive actuators</p></li>
<li><p><strong>draw</strong> (<em>None / bool</em>) – Flag indicating whether to draw the figure</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.rotate_around_3daxis">
<span class="sig-name descname"><span class="pre">rotate_around_3daxis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.rotate_around_3daxis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.rotate_around_3daxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance around the provided 3d axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.rotate_around_torusaxis">
<span class="sig-name descname"><span class="pre">rotate_around_torusaxis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.rotate_around_torusaxis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.rotate_around_torusaxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance around the torus axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.rotate_in_cross_section">
<span class="sig-name descname"><span class="pre">rotate_in_cross_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_rz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.rotate_in_cross_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.rotate_in_cross_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance in the cross-section</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">key=None</span></em>, <em class="sig-param"><span class="pre">val=None</span></em>, <em class="sig-param"><span class="pre">touch=None</span></em>, <em class="sig-param"><span class="pre">log='any'</span></em>, <em class="sig-param"><span class="pre">out=&lt;class</span> <span class="pre">'int'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the indices of the rays matching selection criteria</p>
<dl class="simple">
<dt>The criterion can be of two types:</dt><dd><ul class="simple">
<li><p>a key found in self.dchans, with a matching value</p></li>
<li><dl class="simple">
<dt>a touch tuple (indicating which element in self.config is touched</dt><dd><p>by the desired rays)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>None / str</em>) – A key to be found in self.dchans</p></li>
<li><p><strong>val</strong> (<em>int / str / float / list of such</em>) – The value to be matched
If a list of values is provided, the behaviour depends on log</p></li>
<li><p><strong>log</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>A flag indicating which behaviour to use when val is a list</dt><dd><ul>
<li><p>any : Returns indices of rays matching any value in val</p></li>
<li><p>all : Returns indices of rays matching all values in val</p></li>
<li><p>not : Returns indices of rays matching None of the val</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>touch</strong> (<em>None / str / int / tuple</em>) – <p>Used if key is None
Tuple that can be of len()=1, 2 or 3
Tuple indicating you want the rays that are touching some specific
elements of self.config:</p>
<blockquote>
<div><ul>
<li><dl class="simple">
<dt>touch[0]<span class="classifier">str / int or list of such</span></dt><dd><p>str : a ‘Cls_Name’ string indicating the element
int : the index of the element in self.config.lStruct</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>touch[1]<span class="classifier">int / list of int</span></dt><dd><p>Indices of the desired segments on the polygon
(i.e.: of the cross-section polygon of the above element)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>touch[2]<span class="classifier">int / list of int</span></dt><dd><p>Indices, if relevant, of the toroidal / linear unit
Only relevant when the element has noccur&gt;1</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>In this case only log=’not’ has an effect</p>
</p></li>
<li><p><strong>out</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>Flag indicating whether to return:</dt><dd><ul>
<li><p>bool : a (nRays,) boolean array of indices</p></li>
<li><dl class="simple">
<dt>int<span class="classifier">a (N,) array of int indices (N=number of matching</span></dt><dd><p>rays)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ind</strong> (<em>np.ndarray</em>) – The array of matching rays</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_Etendues">
<span class="sig-name descname"><span class="pre">set_Etendues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_Etendues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_Etendues" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_Surfaces">
<span class="sig-name descname"><span class="pre">set_Surfaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_Surfaces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_Surfaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_dX12">
<span class="sig-name descname"><span class="pre">set_dX12</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dX12</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_dX12"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_dX12" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_dchans">
<span class="sig-name descname"><span class="pre">set_dchans</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_dchans"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_dchans" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_dconfig">
<span class="sig-name descname"><span class="pre">set_dconfig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcdgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_dconfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_dconfig" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_dsino">
<span class="sig-name descname"><span class="pre">set_dsino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extra</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_dsino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_dsino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.set_move">
<span class="sig-name descname"><span class="pre">set_move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">move</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.set_move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.set_move" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default movement parameters</p>
<p>A default movement can be set for the instance, it can be any of the
pre-implemented movement (rotations or translations)
This default movement is the one that will be called when using
self.move()</p>
<p>Specify the type of movement via the name of the method (passed as a
str to move)</p>
<p>Specify, for the geometry of the instance at the time of defining this
default movement, the current value of the associated movement
parameter (angle / distance). This is used to set an arbitrary
difference for user who want to use absolute position values
The desired incremental movement to be performed when calling self.move
will be deduced by substracting the stored param value to the provided
param value. Just set the current param value to 0 if you don’t care
about a custom absolute reference.</p>
<p>kwdargs must be a parameters relevant to the chosen method (axis,
direction…)</p>
<dl class="simple">
<dt>e.g.:</dt><dd><dl class="simple">
<dt>self.set_move(move=’rotate_around_3daxis’,</dt><dd><p>param=0.,
axis=([0.,0.,0.], [1.,0.,0.]))</p>
</dd>
<dt>self.set_move(move=’translate_3d’,</dt><dd><p>param=0.,
direction=[0.,1.,0.])</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.strip">
<span class="sig-name descname"><span class="pre">strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.strip" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove non-essential attributes to save memory / disk usage</p>
<p>Useful to save a very compressed version of the object
The higher strip =&gt; the more stripped the object
Use strip=0 to recover all atributes</p>
<dl class="simple">
<dt>See the difference by doing:</dt><dd><p>&gt; self.get_nbytes()
&gt; self.strip(-1)
&gt; self.get_nbytes()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – <dl>
<dt>Flag indicating how much to strip from the object</dt><dd><blockquote>
<div><p>0: Make complete (retrieve all attributes)
1: dgeom w/o pts + config.strip(1)
2: dgeom w/o pts + config.strip(2) + dsino empty
3: dgeom w/o pts + config.strip(3) + dsino empty
4: dgeom w/o pts + config=pathfile + dsino empty</p>
</div></blockquote>
<p>-1: Equivalent to strip=4</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.translate_3d">
<span class="sig-name descname"><span class="pre">translate_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.translate_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.translate_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate the instance in provided direction</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.translate_in_cross_section">
<span class="sig-name descname"><span class="pre">translate_in_cross_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction_rz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dchans</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Rays.translate_in_cross_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Rays.translate_in_cross_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate the instance in the cross-section</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core.Rays.u">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">u</span></span><a class="headerlink" href="#tofu.geom._core.Rays.u" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core.Ves">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core.</span></span><span class="sig-name descname"><span class="pre">Ves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Poly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_RefPt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sino_nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Clock</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrayorder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'C'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath_Include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Type',</span> <span class="pre">'Exp',</span> <span class="pre">'Deg',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nturns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superconducting</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temperature_nominal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mag_field_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_lim_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core.html#Ves"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core.Ves" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.geom._core.StructIn</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Ves._color">
<span class="sig-name descname"><span class="pre">_color</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'k'</span></em><a class="headerlink" href="#tofu.geom._core.Ves._color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Ves._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Lim':</span> <span class="pre">[],</span> <span class="pre">'Type':</span> <span class="pre">'Tor',</span> <span class="pre">'arrayorder':</span> <span class="pre">'C'},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1)},</span> <span class="pre">'dphys':</span> <span class="pre">{},</span> <span class="pre">'dreflect':</span> <span class="pre">{'Type':</span> <span class="pre">'specular'},</span> <span class="pre">'dsino':</span> <span class="pre">{}}</span></em><a class="headerlink" href="#tofu.geom._core.Ves._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Ves._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Lim':</span> <span class="pre">None,</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dP':</span> <span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0.0,</span> <span class="pre">'rstride':</span> <span class="pre">1}},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">(0.0,</span> <span class="pre">0.0,</span> <span class="pre">0.0,</span> <span class="pre">1),</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core.Ves._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core.Ves._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1,</span> <span class="pre">2],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core.Ves._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-tofu.geom._core_optics">
<span id="tofu-geom-core-optics-module"></span><h2>tofu.geom._core_optics module<a class="headerlink" href="#module-tofu.geom._core_optics" title="Permalink to this headline">¶</a></h2>
<p>This module is the geometrical part of the ToFu general package
It includes all functions and object classes necessary for tomography on Tokamaks</p>
<dl class="py class">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">tofu.geom._core_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fromdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Home/DV226270/ToFu_All/tofu_git/tofu/doc/source'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath_Include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Type',</span> <span class="pre">'Exp',</span> <span class="pre">'Deg',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="tofu.html#tofu.utils.ToFuObject" title="tofu.utils.ToFuObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">tofu.utils.ToFuObject</span></code></a></p>
<p>A class defining crystals for Bragg diffraction</p>
<p>A crystal can be of Type flat, cylindrical or spherical
It is characterized by its:</p>
<blockquote>
<div><ul class="simple">
<li><p>geometry (Type, dimensions, curvature radii and position/orientation)</p></li>
<li><p>Material and lattice</p></li>
<li><p>Bragg parameters (angle vs lambda)</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Id</strong> (<em>str / tfpf.ID</em>) – A name string or a pre-built tfpf.ID class to be used to identify this
particular instance, if a string is provided, it is fed to tfpf.ID()</p></li>
<li><p><strong>dgeom</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – <dl class="simple">
<dt>An array (2,N) or (N,2) defining the contour of the vacuum vessel in a</dt><dd><p>cross-section, if not closed, will be closed automatically</p>
</dd>
<dt>dspectral:     str</dt><dd><p>Flag indicating whether the vessel will be a torus (‘Tor’) or a linear
device (‘Lin’)</p>
</dd>
</dl>
</p></li>
<li><p><strong>SavePath</strong> (<em>None / str</em>) – If provided, forces the default saving path of the object to the
provided value</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.Type">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">Type</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.Type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the type of structure</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._calc_dthetapsiphi_from_lambpts">
<span class="sig-name descname"><span class="pre">_calc_dthetapsiphi_from_lambpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._calc_dthetapsiphi_from_lambpts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._calc_dthetapsiphi_from_lambpts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._calc_spect1d_from_data2d">
<span class="sig-name descname"><span class="pre">_calc_spect1d_from_data2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlambfit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphifit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spect1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertsum1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._calc_spect1d_from_data2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._calc_spect1d_from_data2d" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._checkformat_bragglamb">
<span class="sig-name descname"><span class="pre">_checkformat_bragglamb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._checkformat_bragglamb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._checkformat_bragglamb" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._checkformat_det">
<span class="sig-name descname"><span class="pre">_checkformat_det</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._checkformat_det"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._checkformat_det" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._checkformat_get_Rays_from">
<span class="sig-name descname"><span class="pre">_checkformat_get_Rays_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._checkformat_get_Rays_from"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._checkformat_get_Rays_from" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._checkformat_inputs_Id">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_checkformat_inputs_Id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._checkformat_inputs_Id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._checkformat_inputs_Id" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._ddef">
<span class="sig-name descname"><span class="pre">_ddef</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'Id':</span> <span class="pre">{'Diag':</span> <span class="pre">'dummy',</span> <span class="pre">'Exp':</span> <span class="pre">'dummy',</span> <span class="pre">'include':</span> <span class="pre">['Mod',</span> <span class="pre">'Cls',</span> <span class="pre">'Exp',</span> <span class="pre">'Diag',</span> <span class="pre">'Name',</span> <span class="pre">'shot',</span> <span class="pre">'version'],</span> <span class="pre">'shot':</span> <span class="pre">0},</span> <span class="pre">'dbragg':</span> <span class="pre">{'braggref':</span> <span class="pre">0.7853981633974483},</span> <span class="pre">'dgeom':</span> <span class="pre">{'Type':</span> <span class="pre">'sph',</span> <span class="pre">'Typeoutline':</span> <span class="pre">'rect'},</span> <span class="pre">'dmat':</span> <span class="pre">{},</span> <span class="pre">'dmisc':</span> <span class="pre">{'color':</span> <span class="pre">'k'}}</span></em><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._dplot">
<span class="sig-name descname"><span class="pre">_dplot</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'3d':</span> <span class="pre">{},</span> <span class="pre">'cross':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'mew':</span> <span class="pre">2,</span> <span class="pre">'ms':</span> <span class="pre">8},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2},</span> <span class="pre">'dVect':</span> <span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}},</span> <span class="pre">'hor':</span> <span class="pre">{'Elt':</span> <span class="pre">'P',</span> <span class="pre">'Nstep':</span> <span class="pre">50,</span> <span class="pre">'dBs':</span> <span class="pre">{'color':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dBv':</span> <span class="pre">{'color':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dI':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--'},</span> <span class="pre">'dP':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}}}</span></em><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._dplot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._dstrip">
<span class="sig-name descname"><span class="pre">_dstrip</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'allowed':</span> <span class="pre">[0,</span> <span class="pre">1],</span> <span class="pre">'strip':</span> <span class="pre">None}</span></em><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._dstrip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._from_dict">
<span class="sig-name descname"><span class="pre">_from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_keys_dbragg">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dbragg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_keys_dbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_keys_dbragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_keys_dgeom">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dgeom</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_keys_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_keys_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_keys_dmat">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dmat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_keys_dmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_keys_dmat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_keys_dmisc">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_keys_dmisc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_keys_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_keys_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_largs_dbragg">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dbragg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_largs_dbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_largs_dbragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_largs_dgeom">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sino</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_largs_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_largs_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_largs_dmat">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dmat</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_largs_dmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_largs_dmat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_largs_dmisc">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">_get_largs_dmisc</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_largs_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_largs_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_local_coordinates_of_det">
<span class="sig-name descname"><span class="pre">_get_local_coordinates_of_det</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_local_coordinates_of_det"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_local_coordinates_of_det" title="Permalink to this definition">¶</a></dt>
<dd><p>Computation of translation (ddist, di, dj) and angular
(dtheta, dpsi, tilt) properties of an arbitrary detector choosen by
the user.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._get_rays_from_cryst">
<span class="sig-name descname"><span class="pre">_get_rays_from_cryst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._get_rays_from_cryst"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._get_rays_from_cryst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._init">
<span class="sig-name descname"><span class="pre">_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dbragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._init" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._rebuild_dbragg">
<span class="sig-name descname"><span class="pre">_rebuild_dbragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._rebuild_dbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._rebuild_dbragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._rebuild_dgeom">
<span class="sig-name descname"><span class="pre">_rebuild_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._rebuild_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._rebuild_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._rebuild_dmat">
<span class="sig-name descname"><span class="pre">_rebuild_dmat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._rebuild_dmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._rebuild_dmat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._rebuild_dmisc">
<span class="sig-name descname"><span class="pre">_rebuild_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['color']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._rebuild_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._rebuild_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._reset">
<span class="sig-name descname"><span class="pre">_reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._reset" title="Permalink to this definition">¶</a></dt>
<dd><p>To be overloaded</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._rotate_or_translate">
<span class="sig-name descname"><span class="pre">_rotate_or_translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._rotate_or_translate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._rotate_or_translate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._set_color">
<span class="sig-name descname"><span class="pre">_set_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._set_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._set_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._set_color_ddef">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_set_color_ddef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._set_color_ddef"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._set_color_ddef" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._set_dmisc">
<span class="sig-name descname"><span class="pre">_set_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._set_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._set_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip">
<span class="sig-name descname"><span class="pre">_strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip_dbragg">
<span class="sig-name descname"><span class="pre">_strip_dbragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip_dbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip_dbragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip_dgeom">
<span class="sig-name descname"><span class="pre">_strip_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip_dmat">
<span class="sig-name descname"><span class="pre">_strip_dmat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip_dmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip_dmat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip_dmisc">
<span class="sig-name descname"><span class="pre">_strip_dmisc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lkeep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['color']</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip_dmisc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip_dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._strip_init">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_strip_init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._strip_init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._strip_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._to_dict">
<span class="sig-name descname"><span class="pre">_to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg._update_or_copy">
<span class="sig-name descname"><span class="pre">_update_or_copy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pinhole</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg._update_or_copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg._update_or_copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.calc_johannerror">
<span class="sig-name descname"><span class="pre">calc_johannerror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lpsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ldtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_interval_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_interval_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.calc_johannerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.calc_johannerror" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the johann error</p>
<dl>
<dt>The johann error is the error (scattering) induced by defocalization</dt><dd><p>due to finite crystal dimensions</p>
</dd>
<dt>There is a johann error on wavelength (lamb =&gt; loss of spectral</dt><dd><p>resolution) and on directionality (phi)</p>
</dd>
<dt>If provided, lpsi and ldtheta are taken as normalized variations with</dt><dd><p>respect to the crystal summit and to its extenthalf.
Typical values are:</p>
<blockquote>
<div><ul class="simple">
<li><p>lpsi   = [-1, 1, 1, -1]</p></li>
<li><p>ldtheta = [-1, -1, 1, 1]</p></li>
</ul>
</div></blockquote>
<p>They must have the same len()</p>
</dd>
<dt>First affecting a reference lambda according to:</dt><dd><ul class="simple">
<li><p>pixel’s position</p></li>
<li><p>crystal’s summit</p></li>
</ul>
</dd>
</dl>
<p>Then, computing error on bragg and phi angles on each pixels by
computing lambda and phi from the crystal’s outline
Provide lambda_interval_min/max to ensure the given wavelength interval
is detected over the whole surface area.
A True/False boolean is then returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.calc_meridional_sagital_focus">
<span class="sig-name descname"><span class="pre">calc_meridional_sagital_focus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rcurve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.calc_meridional_sagital_focus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.calc_meridional_sagital_focus" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute sagittal and meridional focuses distances.
Optionnal result according to non-parallelism, using first the
update_non_parallelism method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rcurve</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – in dgeom dict., curvature radius of the crystal.</p></li>
<li><p><strong>bragg</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – in dbragg dict., reference bragg angle of the crystal.</p></li>
<li><p><strong>alpha</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – in dmat dict., amplitude of the non-parallelism
as an a angle defined by user, in radian.</p></li>
<li><p><strong>use_non_parallelism</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Need to be True to use new alpha angle</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>merid_ref</strong> (<em>float</em>) – Distance crystal-meridional focus (m), for a perfect crystal</p></li>
<li><p><strong>sagit_ref</strong> (<em>float</em>) – Distance crystal-sagital focus (m), for a perfect crystal</p></li>
<li><p><strong>merid_unp</strong> (<em>float</em>) – Distance crystal-meridional focus (m), using non_parallelism</p></li>
<li><p><strong>sagit_unp</strong> (<em>float</em>) – Distance crystal-sagital focus (m), using non_parallelism</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.calc_raytracing_from_lambpts">
<span class="sig-name descname"><span class="pre">calc_raytracing_from_lambpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">johann</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lpsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ldtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.calc_raytracing_from_lambpts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.calc_raytracing_from_lambpts" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize the de-focusing by ray-tracing of chosen lamb</p>
<dl class="simple">
<dt>If plot, 3 different plots can be produced:</dt><dd><ul class="simple">
<li><p>det: plots the intersection of rays with detector plane</p></li>
<li><p>‘2d’: plots the geometry of the rays in 2d cross and hor</p></li>
<li><p>‘3d’: plots the geometry of the rays in 3d</p></li>
</ul>
</dd>
</dl>
<p>Specify the plotting option by setting plot to any of these (or a list)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.calc_xixj_from_braggphi">
<span class="sig-name descname"><span class="pre">calc_xixj_from_braggphi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.calc_xixj_from_braggphi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.calc_xixj_from_braggphi" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming crystal’s summit as frame origin</p>
<p>According to [1], this assumes a local frame centered on the crystal</p>
<dl class="simple">
<dt>These calculations are independent from the tokamak’s frame:</dt><dd><p>The origin of the local frame is the crystal’s summit
The (O, ez) axis is the crystal’s normal
The crystal is tangent to (O, ex, ey)</p>
</dd>
</dl>
<p>[1] tofu/Notes_Upgrades/SpectroX2D/SpectroX2D_EllipsesOnPlane.pdf</p>
<dl class="simple">
<dt>Z:      float</dt><dd><p>Detector’s plane intersection with (O, ez) axis</p>
</dd>
<dt>n:      np.ndarray</dt><dd><p>(3,) array containing local (x,y,z) coordinates of the plane’s
normal vector</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.center">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">center</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.center" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.dbragg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dbragg</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.dbragg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the polygon defining the structure cross-section</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.dgeom">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dgeom</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.dmat">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dmat</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.dmat" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the polygon defining the structure cross-section</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.dmisc">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dmisc</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.dmisc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit1d">
<span class="sig-name descname"><span class="pre">fit1d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dinput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dprepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dconstraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_spectrum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_spectrum_dlamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_half_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dscales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nfev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coefs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit1d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit1d" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit1d_dinput">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">fit1d_dinput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dconstraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dprepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_spectrum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_spectrum_dlamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_half_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_return_fract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit1d_dinput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit1d_dinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a formatted dict of lines and constraints</p>
<p>To be fed to _fit12d.multigausfit1d_from_dlines()
Provides a user-friendly way of defining constraints</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit1d_extract">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">fit1d_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfit1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coefs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit1d_extract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit1d_extract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit1d_from2d">
<span class="sig-name descname"><span class="pre">fit1d_from2d</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit1d_from2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit1d_from2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Useful for optimizing detector or crystal position</p>
<p>Given a set of 2d images on a detector
Transform the 2d (xi, xj) image into (lamb, phi)
Slice nphi 1d spectra
Fit them using a dict of reference lines (dlines)
Optionally provide constraints for the fitting
Return the vertical profiles of the wavelength shitf of each line
To be used as input for an cost function and optimization</p>
<dl class="simple">
<dt>1d fitting is used instead of 2d because:</dt><dd><ul class="simple">
<li><p>faster (for optimization)</p></li>
<li><p>does not require a choice of nbsplines</p></li>
<li><p>easier to understand and decide for user</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit2d">
<span class="sig-name descname"><span class="pre">fit2d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dinput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dprepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dconstraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_half_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbsplines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dx0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dscales</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x0_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bounds_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nfev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jac</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predeclare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coefs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit2d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform 2d fitting of a 2d spectrometre image</p>
<p>Fit the spectrum by a sum of gaussians
Modulate each gaussian parameters by bsplines in the spatial direction</p>
<dl class="simple">
<dt>data must be provided in shape (nt, nxi, nxj), where:</dt><dd><ul class="simple">
<li><p>nt is the number of time steps</p></li>
<li><p>nxi is the nb. of pixels in the horizontal / spectral direction</p></li>
<li><p>nxj is the nb. of pixels in the vertical / spacial direction</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit2d_dinput">
<span class="sig-name descname"><span class="pre">fit2d_dinput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dconstraints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dprepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binning</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbsplines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_nsigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_half_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_return_fract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit2d_dinput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit2d_dinput" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a formatted dict of lines and constraints</p>
<p>To be fed to _fit12d.multigausfit1d_from_dlines()
Provides a user-friendly way of defining constraints</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit2d_extract">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">fit2d_extract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfit2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ti</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts_phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_phi_total</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_lamb_phi_detail</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit2d_extract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit2d_extract" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.fit2d_plot">
<span class="sig-name descname"><span class="pre">fit2d_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dfit2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plotmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angunits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.fit2d_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.fit2d_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_bragg_from_lamb">
<span class="sig-name descname"><span class="pre">get_bragg_from_lamb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_bragg_from_lamb"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_bragg_from_lamb" title="Permalink to this definition">¶</a></dt>
<dd><p>Braggs’ law: n*lamb = 2dsin(bragg)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_color">
<span class="sig-name descname"><span class="pre">get_color</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_detector_approx">
<span class="sig-name descname"><span class="pre">get_detector_approx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rcurve</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tilt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist01</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tangent_to_rowland</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_detector_approx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_detector_approx" title="Permalink to this definition">¶</a></dt>
<dd><p>Return approximate ideal detector geometry</p>
<p>Assumes infinitesimal and ideal crystal
Returns a dict containing the position and orientation of a detector if</p>
<blockquote>
<div><p>it was placed ideally on the rowland circle, centered on the
desired bragg angle (in rad) or wavelength (in m)</p>
</div></blockquote>
<dl class="simple">
<dt>The detector can be tangential to the Rowland circle or perpendicular</dt><dd><p>to the line between the crystal and the detector</p>
</dd>
</dl>
<p>Assumes detector center matching lamb (m) / bragg (rad)</p>
<dl>
<dt>The detector can be translated towards / away from the crystal</dt><dd><p>to make sure the distance between 2 spectral lines</p>
<p>(lamb0 and lamb1) on the detector’s plane matches
a desired distance (dist01, in m)</p>
</dd>
<dt>Finally, a desired offset (translation) can be added</dt><dd><p>via (ddist, di, dj), in m</p>
</dd>
</dl>
<p>Similarly, an extra rotation can be added via (dtheta, dpsi, tilt)</p>
<dl class="simple">
<dt>Detector is described by center position</dt><dd><p>and (nout, ei, ej) unit vectors</p>
</dd>
</dl>
<p>By convention, nout = np.cross(ei, ej)
Vectors (ei, ej) define an orthogonal frame in the detector’s plane
All coordinates are 3d (X, Y, Z in the tokamak’s frame)</p>
<dl class="simple">
<dt>det: dict</dt><dd><dl class="simple">
<dt>dict of detector geometrical characteristics:</dt><dd><dl class="simple">
<dt>‘cent’: np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of detector center</p>
</dd>
<dt>‘nout’: np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of unit vector
perpendicular to detector’ surface
oriented towards crystal</p>
</dd>
<dt>‘ei’:   np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of unit vector
defining first coordinate in detector’s plane</p>
</dd>
<dt>‘ej’:   np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of unit vector
defining second coordinate in detector’s plane</p>
</dd>
<dt>‘outline’:   np.darray</dt><dd><p>(2, N) array to build detector’s contour
where the last point is identical to the first.
(for example for WEST X2D spectrometer:
x*np.r_[-1,-1,1,1,-1], y*np.r_[-1,1,1,-1,-1])</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_lamb_avail_from_pts">
<span class="sig-name descname"><span class="pre">get_lamb_avail_from_pts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_xixj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_lamb_avail_from_pts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_lamb_avail_from_pts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the wavelength accessible from plasma points on the crystal</p>
<p>For a given plasma point, only a certain lambda interval can be
bragg-diffracted on the crystal (due to bragg’s law and the crystal’s
dimensions)</p>
<p>Beware, for a given pts and lamb, there can be up to 2 sets of
solutions
All non-valid solutions are set to nans, such that most of the time
there is only one</p>
<dl class="simple">
<dt>For a set of given:</dt><dd><ul class="simple">
<li><p>pts (3, npts) array, (x, y, z) coordinates</p></li>
</ul>
</dd>
<dt>Using:</dt><dd><ul class="simple">
<li><p>nlamb: sampling of the lamb interval (default: 100)</p></li>
<li><p>ndtheta: sampling of the lamb interval (default: 20)</p></li>
<li><p>npsi: sampling of the lamb interval (default: ‘envelop’)</p></li>
<li><p>det: (optional) a detector dict, for xi and xj</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>- lamb</em> – (npts, nlamb) array of sampled valid wavelength interval
- phi:  (npts, nlamb, ndtheta, npsi, 2) array of phi
- dtheta:  (npts, nlamb, ndtheta, npsi, 2) array of dtheta
- psi:  (npts, nlamb, ndtheta, npsi, 2) array of psi</p>
</dd>
</dl>
<dl class="simple">
<dt>And optionally (return_xixj=True and det provided as dict):</dt><dd><ul class="simple">
<li><p>xi:  (npts, nlamb, ndtheta, npsi, 2) array of xi</p></li>
<li><p>xj:  (npts, nlamb, ndtheta, npsi, 2) array of xj</p></li>
</ul>
</dd>
</dl>
<p>The result is computed with or w/o taking into account non-parallelism</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_lamb_from_bragg">
<span class="sig-name descname"><span class="pre">get_lamb_from_bragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_lamb_from_bragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_lamb_from_bragg" title="Permalink to this definition">¶</a></dt>
<dd><p>Braggs’ law: n*lamb = 2dsin(bragg)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_lambbraggphi_from_ptsxixj_dthetapsi">
<span class="sig-name descname"><span class="pre">get_lambbraggphi_from_ptsxixj_dthetapsi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_lambbraggphi_from_ptsxixj_dthetapsi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_lambbraggphi_from_ptsxixj_dthetapsi" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the lamb, bragg and phi for provided pts and dtheta/psi</p>
<dl class="simple">
<dt>if grid = True:</dt><dd><dl class="simple">
<dt>compute all pts / dtheta/psi comnbinations</dt><dd><p>=&gt; return (npts, ndtheta) arrays</p>
</dd>
</dl>
</dd>
<dt>else:</dt><dd><dl class="simple">
<dt>each pts is associated to a single dtheta/psi</dt><dd><p>=&gt; assumes npts == ndtheta == npsi
=&gt; return (npts,) arrays</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_local_noute1e2">
<span class="sig-name descname"><span class="pre">get_local_noute1e2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_local_noute1e2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_local_noute1e2" title="Permalink to this definition">¶</a></dt>
<dd><p>Return (nout, e1, e2) associated to pts on the crystal’s surface</p>
<dl>
<dt>All points on the spherical crystal’s surface are identified</dt><dd><dl>
<dt>by (dtheta, psi) coordinates, where:</dt><dd><ul class="simple">
<li><p>theta  = np.pi/2 + dtheta (dtheta=0 default) for the center</p></li>
</ul>
<p>(for the diffracted beam), from frame’s basis vector ez
- psi = 0 for the center, positive in direction of e1</p>
</dd>
</dl>
<p>They are the spherical coordinates from a sphere centered on the
crystal’s center of curvature.</p>
</dd>
<dt>Return the pts themselves and the 3 perpendicular unit vectors</dt><dd><p>(nout, e1, e2), where nout is towards the outside of the sphere and
nout = np.cross(e1, e2)</p>
</dd>
</dl>
<dl class="simple">
<dt>summit:     np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of the points on the surface</p>
</dd>
<dt>nout:       np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of outward unit vector</p>
</dd>
<dt>e1:         np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of first unit vector</p>
</dd>
<dt>e2:         np.ndarray</dt><dd><p>(3,) array of (x, y, z) coordinates of second unit vector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_phi_from_magaxis_summit">
<span class="sig-name descname"><span class="pre">get_phi_from_magaxis_summit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_phi_from_magaxis_summit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_phi_from_magaxis_summit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_rays_from_cryst">
<span class="sig-name descname"><span class="pre">get_rays_from_cryst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_xixj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_rays_from_cryst"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_rays_from_cryst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_rockingcurve_func">
<span class="sig-name descname"><span class="pre">get_rockingcurve_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_rockingcurve_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_rockingcurve_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the rocking curve function</p>
<dl class="simple">
<dt>Also return the wavelength (lamb) (in meters) for which it was computed</dt><dd><p>and the associated reference bragg angle (in rad)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_rowland_dist_from_lambbragg">
<span class="sig-name descname"><span class="pre">get_rowland_dist_from_lambbragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_rowland_dist_from_lambbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_rowland_dist_from_lambbragg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the array of dist from cryst summit to pts on rowland</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_summary">
<span class="sig-name descname"><span class="pre">get_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span>&#160; <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'-'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'l'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summary description of the object content</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.get_unit_vectors">
<span class="sig-name descname"><span class="pre">get_unit_vectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.get_unit_vectors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.get_unit_vectors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the unit vectors (direct orthonormal basis)</p>
<dl class="simple">
<dt>Depending on:</dt><dd><p>use_non_parallelism: True  =&gt; return the geometrical basis
use_non_parallelism: False  =&gt; return the mesh basis</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.ismobile">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">ismobile</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.ismobile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.move">
<span class="sig-name descname"><span class="pre">move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.move" title="Permalink to this definition">¶</a></dt>
<dd><p>Set new position to desired param according to default movement</p>
<p>Can only be used if default movement was set before
See self.set_move()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.noise_analysis">
<span class="sig-name descname"><span class="pre">noise_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxerrbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbsplines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nfev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sublab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.noise_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.noise_analysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.noise_analysis_plot">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">noise_analysis_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dnoise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">margin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">valid_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sublab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.noise_analysis_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.noise_analysis_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.noise_analysis_scannbs">
<span class="sig-name descname"><span class="pre">noise_analysis_scannbs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nxerrbin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbsplines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lnbsplines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_nfev</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_solver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tr_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sublab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path_fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.noise_analysis_scannbs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.noise_analysis_scannbs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.noise_analysis_scannbs_plot">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">noise_analysis_scannbs_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dnoise_scan</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sublab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.noise_analysis_scannbs_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.noise_analysis_scannbs_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dleg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the crystal in desired projeection</p>
<p>The projection is 3d, cross-section or horizontal
Optionaly add rays reflected on cryst at:</p>
<blockquote>
<div><ul class="simple">
<li><p>lamb / phi: desired wavelength and incidence angle</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>and either:</dt><dd><ul class="simple">
<li><p>psi, dtheta : desired pts on the crystal surface</p></li>
<li><dl class="simple">
<dt>pts: emitted from desired pts (e.g.: in the plasma)</dt><dd><dl class="simple">
<dt>(need to be refresh with get_rays_from_cryst method</dt><dd><p>if new pts are wanted)</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dax</strong> (<em>None / dict</em>) – <dl class="simple">
<dt>dict of axes to be used, with keys:</dt><dd><ul>
<li><p>’cross’: axe where to plot cross-section view</p></li>
<li><p>’hor’:   axe where to plot horizontal (from top) view</p></li>
<li><p>’3d’:    axe where to plot 3d view</p></li>
</ul>
</dd>
</dl>
<p>if None, a new figure and axes are created</p>
</p></li>
<li><p><strong>proj</strong> (<em>None / str</em>) – <dl class="simple">
<dt>key indicating which plot to make:</dt><dd><ul>
<li><p>’cross’:  cross-section projection</p></li>
<li><p>’hor’:    horizontal projection</p></li>
<li><p>’all’:    cross-section + horizontal view</p></li>
<li><p>’3d’:     3d view</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>element</strong> (<em>None / str</em>) – <dl class="simple">
<dt>char string where each letter indicates an element to plot</dt><dd><ul>
<li><p>’o’: outline (edges of crystal)</p></li>
<li><p>’s’: summit (geometrical center of the crystal)</p></li>
<li><p>’c’: center (of the sphere of curvature)</p></li>
<li><p>’r’: rowland circle (plotted in e1 direction)</p></li>
<li><p>’v’: local unit vectors e1, e2, nout</p></li>
</ul>
</dd>
</dl>
<p>If None, default to ‘oscvr’</p>
</p></li>
<li><p><strong>res</strong> (<em>None / float</em>) – Resolution for the discretization of the outline</p></li>
<li><p><strong>dcryst</strong> (<em>None / dict</em>) – <dl class="simple">
<dt>dict of dict for plotting the various elements of the crystal:</dt><dd><ul>
<li><p>’outline’: dict of properties fed to plot()</p></li>
<li><p>’cent’: dict of properties fed to plot()</p></li>
<li><p>’summit’: dict of properties fed to plot()</p></li>
<li><p>’rowland’: dict of properties fed to plot()</p></li>
<li><p>’vectors’: dict of properties fed to quiver()</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>ddet</strong> (<em>None / dict</em>) – <dl class="simple">
<dt>dict of dict for plotting the various elements of the det:</dt><dd><ul>
<li><p>’outline’: dict of properties fed to plot()</p></li>
<li><p>’cent’: dict of properties fed to plot()</p></li>
<li><p>’vectors’: dict of properties fed to quiver()</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>color</strong> (<em>None / str / tuple</em>) – color to be used for plotting
Overwrites all colors in dcryst and ddet</p></li>
<li><p><strong>det</strong> (<em>None / dict</em>) – <dl class="simple">
<dt>Optionnal associated detector to be plotted, as a dict with keys:</dt><dd><ul>
<li><p>’cent’: 1d array of cartesian coordinates of the center</p></li>
<li><dl class="simple">
<dt>’nout’: 1d array of cartesian coordinates of unit vector</dt><dd><p>oriented towards the crystal</p>
</dd>
</dl>
</li>
<li><p>’ei’:   1d array of cartesian coordinates of unit vector</p></li>
<li><p>’ej’:   1d array of cartesian coordinates of unit vector</p></li>
<li><p>’outline’: 2d array of outline coordinates in (ei, ej)</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>dleg</strong> (<em>None / dict</em>) – dict of properties to be passed to plt.legend()
if False legend is not plotted</p></li>
<li><p><strong>use_non_parallelism</strong> (<em>None / str</em>) – <p>Return the unit vectors (direct orthonormal basis)
Depending on:</p>
<blockquote>
<div><ul>
<li><p>use_non_parallelism: True  =&gt; return the geometrical basis</p></li>
<li><p>use_non_parallelism: False  =&gt; return the mesh basis</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.plot_data_vs_lambphi">
<span class="sig-name descname"><span class="pre">plot_data_vs_lambphi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">psi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nlambfit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphifit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magaxis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npaxis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dlines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spect1d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xjcut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dxj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.plot_data_vs_lambphi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.plot_data_vs_lambphi" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.plot_focal_error_summed">
<span class="sig-name descname"><span class="pre">plot_focal_error_summed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dist_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ndi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tangent_to_rowland</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_interval_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_interval_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.plot_focal_error_summed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.plot_focal_error_summed" title="Permalink to this definition">¶</a></dt>
<dd><p>Using the calc_johannerror method, computing the sum of the
focalization error over the whole detector for different positions
characterized by the translations ddist and di in the equatorial plane
(dist_min, dist_max, ndist) (di_min, di_max, ndi).</p>
<ul class="simple">
<li><dl class="simple">
<dt>lamb/bragg<span class="classifier">float</span></dt><dd><p>Automatically set to crystal’s references</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>xi, xj<span class="classifier">np.ndarray</span></dt><dd><p>pixelization of the detector
(from “inputs_temp/XICS_allshots_C34.py” l.649)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>alpha, beta<span class="classifier">float</span></dt><dd><p>Values of Non Parallelism references angles</p>
</dd>
</dl>
</li>
<li><p>use_non_parallelism : str</p></li>
<li><p>tangent_to_rowland :  str</p></li>
<li><dl class="simple">
<dt>plot_dets<span class="classifier">str</span></dt><dd><p>Possibility to plot the nsort- detectors with the lowest
summed focalization error, next to the Best Approximate Real
detector
dict(np.load(‘det37_CTVD_incC4_New.npz’, allow_pickle=True))</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nsort<span class="classifier">float</span></dt><dd><p>Number of best detector’s position to plot</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>lambda_interv_min/max<span class="classifier">float</span></dt><dd><p>To ensure the given wavelength interval is detected over the whole
surface area. A True/False boolean is then returned.</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.plot_line_on_det_tracing">
<span class="sig-name descname"><span class="pre">plot_line_on_det_tracing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nphi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">johann</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lpsi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ldtheta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dleg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.plot_line_on_det_tracing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.plot_line_on_det_tracing" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize the de-focusing by ray-tracing of chosen lamb
Possibility to plot few wavelength’ arcs on the same plot.
:param - lamb: array of min size 1, in 1e-10 [m]
:param - det: dict
:param - xi_bounds: np.min &amp; np.max of _XI
:param - xj_bounds: np.min &amp; np.max of _XJ
:param (from “inputs_temp/XICS_allshots_C34.py” l.649):
:param - johann: True or False</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.plot_rockingcurve">
<span class="sig-name descname"><span class="pre">plot_rockingcurve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ang_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.plot_rockingcurve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.plot_rockingcurve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.rockingcurve">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">rockingcurve</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.rockingcurve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.rotate_around_3daxis">
<span class="sig-name descname"><span class="pre">rotate_around_3daxis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.rotate_around_3daxis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.rotate_around_3daxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance around the provided 3d axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.rotate_around_torusaxis">
<span class="sig-name descname"><span class="pre">rotate_around_torusaxis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.rotate_around_torusaxis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.rotate_around_torusaxis" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance around the torus axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.rotate_in_cross_section">
<span class="sig-name descname"><span class="pre">rotate_in_cross_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_rz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.rotate_in_cross_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.rotate_in_cross_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate the instance in the cross-section</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.sample_outline_plot">
<span class="sig-name descname"><span class="pre">sample_outline_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.sample_outline_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.sample_outline_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.set_color">
<span class="sig-name descname"><span class="pre">set_color</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.set_color"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.set_color" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.set_dbragg">
<span class="sig-name descname"><span class="pre">set_dbragg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.set_dbragg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.set_dbragg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.set_dgeom">
<span class="sig-name descname"><span class="pre">set_dgeom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dgeom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.set_dgeom"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.set_dgeom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.set_dmat">
<span class="sig-name descname"><span class="pre">set_dmat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dmat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.set_dmat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.set_dmat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.set_move">
<span class="sig-name descname"><span class="pre">set_move</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">move</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.set_move"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.set_move" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the default movement parameters</p>
<p>A default movement can be set for the instance, it can be any of the
pre-implemented movement (rotations or translations)
This default movement is the one that will be called when using
self.move()</p>
<p>Specify the type of movement via the name of the method (passed as a
str to move)</p>
<p>Specify, for the geometry of the instance at the time of defining this
default movement, the current value of the associated movement
parameter (angle / distance). This is used to set an arbitrary
difference for user who want to use absolute position values
The desired incremental movement to be performed when calling self.move
will be deduced by substracting the stored param value to the provided
param value. Just set the current param value to 0 if you don’t care
about a custom absolute reference.</p>
<p>kwdargs must be a parameters relevant to the chosen method (axis,
direction…)</p>
<dl class="simple">
<dt>e.g.:</dt><dd><dl class="simple">
<dt>self.set_move(move=’rotate_around_3daxis’,</dt><dd><p>param=0.,
axis=([0.,0.,0.], [1.,0.,0.]))</p>
</dd>
<dt>self.set_move(move=’translate_3d’,</dt><dd><p>param=0.,
direction=[0.,1.,0.])</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.split">
<span class="sig-name descname"><span class="pre">split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.split" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.strip">
<span class="sig-name descname"><span class="pre">strip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.strip"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.strip" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove non-essential attributes to save memory / disk usage</p>
<p>Useful to save a very compressed version of the object
The higher strip =&gt; the more stripped the object
Use strip=0 to recover all atributes</p>
<dl class="simple">
<dt>See the difference by doing:</dt><dd><p>&gt; self.get_nbytes()
&gt; self.strip(-1)
&gt; self.get_nbytes()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – <dl>
<dt>Flag indicating how much to strip from the object</dt><dd><blockquote>
<div><p>0: Make complete (retrieve all attributes)
1: Remove nothing</p>
</div></blockquote>
<p>-1: Equivalent to strip=1</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.summit">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">summit</span></span><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.summit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.translate_3d">
<span class="sig-name descname"><span class="pre">translate_3d</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.translate_3d"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.translate_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate the instance in provided direction</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.translate_in_cross_section">
<span class="sig-name descname"><span class="pre">translate_in_cross_section</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction_rz</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.translate_in_cross_section"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.translate_in_cross_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate the instance in the cross-section</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tofu.geom._core_optics.CrystalBragg.update_non_parallelism">
<span class="sig-name descname"><span class="pre">update_non_parallelism</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_core_optics.html#CrystalBragg.update_non_parallelism"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._core_optics.CrystalBragg.update_non_parallelism" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute new values of unit vectors nout, e1 and e2 into
dmat basis, due to non parallelism</p>
<p>Update new values into dmat dict</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-tofu.geom._def">
<span id="tofu-geom-def-module"></span><h2>tofu.geom._def module<a class="headerlink" href="#module-tofu.geom._def" title="Permalink to this headline">¶</a></h2>
<p>This module stores all the default setting of ToFu
Including in particular computing parameters, dictionnaries and figures</p>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def.Plot_3D_plt_Tor_DefAxes">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">Plot_3D_plt_Tor_DefAxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#Plot_3D_plt_Tor_DefAxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def.Plot_3D_plt_Tor_DefAxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def.Plot_AllCryst">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">Plot_AllCryst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#Plot_AllCryst"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def.Plot_AllCryst" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def.Plot_CrystIm">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">Plot_CrystIm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#Plot_CrystIm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def.Plot_CrystIm" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def.Plot_Impact_DefAxes">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">Plot_Impact_DefAxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Proj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#Plot_Impact_DefAxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def.Plot_Impact_DefAxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def.Plot_LOSProj_DefAxes">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">Plot_LOSProj_DefAxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#Plot_LOSProj_DefAxes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def.Plot_LOSProj_DefAxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._def._Config_phithetaproj_default">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">_Config_phithetaproj_default</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labelpad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ntMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_def.html#_Config_phithetaproj_default"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._def._Config_phithetaproj_default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tofu.geom._def._DET_PLOT_DDICT">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">_DET_PLOT_DDICT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'cent':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'marker':</span> <span class="pre">'o',</span> <span class="pre">'ms':</span> <span class="pre">6},</span> <span class="pre">'outline':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'-',</span> <span class="pre">'lw':</span> <span class="pre">2.0},</span> <span class="pre">'rowland':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'--',</span> <span class="pre">'lw':</span> <span class="pre">1.0},</span> <span class="pre">'summit':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'marker':</span> <span class="pre">'^',</span> <span class="pre">'ms':</span> <span class="pre">6},</span> <span class="pre">'vectors':</span> <span class="pre">{'color':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'-',</span> <span class="pre">'lw':</span> <span class="pre">1.0}}</span></em><a class="headerlink" href="#tofu.geom._def._DET_PLOT_DDICT" title="Permalink to this definition">¶</a></dt>
<dd><p># ————– Figures ————————</p>
<dl>
<dt>def Plot_Lens_Alone_DefAxes(fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (20,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
axPos = [0.05, 0.1, 0.9, 0.85]
ax = f.add_axes(axPos,facecolor=axCol)
ax.set_xlabel(r”x (m)”)
ax.set_ylabel(r”y (m)”)
return ax</p>
</dd>
</dl>
<p># ———— Computing settings —————</p>
<p>DetSpanRMinMargin = 0.9
DetSpanNEdge = 5
DetSpanNRad = 5</p>
<p>DetConeNEdge = 8
DetConeNRad = 6</p>
<p>DetPreConedX12 = [0.01, 0.01]
DetPreConedX12Mode = ‘abs’
DetPreConeds = 0.01
DetPreConedsMode = ‘abs’
DetPreConeMarginS = 0.002</p>
<p>DetConeDX = 0.002
DetConeDRY = 0.0025 # 0.0025
DetConeDTheta = np.pi/1024. # 512.
DetConeDZ = 0.0025 # 0.0025
#DetConeNTheta = 25 # 25
#DetConeNZ = 50 # 50</p>
<p>DetConeRefdMax = 0.02</p>
<p>DetEtendMethod = ‘quad’
DetEtenddX12 = [0.01, 0.01]
DetEtenddX12Mode = ‘rel’
DetEtendepsrel = 1.e-3
DetEtendRatio = 0.02
DetCalcEtendColis = False</p>
<p>DetCalcSAngVectColis = True
DetCalcSAngVectCone = True</p>
<p>DetSynthEpsrel = 1.e-4
DetSynthdX12 = [0.005, 0.005]
DetSynthdX12Mode = ‘abs’
DetSynthds = 0.005
DetSynthdsMode = ‘abs’
DetSynthMarginS = 0.001</p>
<p># — Plotting dictionaries and parameters ——</p>
<p>ApPd = {‘c’:’k’,’lw’:2,’ls’:’solid’}
ApVd = {‘color’:’r’,’lw’:2,’ls’:’solid’}
DetPd = {‘c’:’k’,’lw’:2,’ls’:’solid’}
DetVd = {‘color’:’r’,’lw’:2,’ls’:’solid’}
DetSAngPld = {‘cmap’:plt.cm.YlOrRd,’lw’:0.,’rstride’:1,’cstride’:1, ‘antialiased’:False, ‘edgecolor’:’None’}
DetSangPlContd = {‘linewidths’:0.}
DetConed = {‘edgecolors’:’k’, ‘facecolors’:(0.8,0.8,0.8,0.2), ‘alpha’:0.2, ‘linewidths’:0., ‘linestyles’:’-’, ‘antialiaseds’:False}
DetImpd = {‘ls’:’solid’,’c’:’k’,’lw’:1}</p>
<p>ApLVin = 0.1
DetSAngPlRa = 0.5
DetSAngPldX12 = [0.025,0.025]
DetSAngPldX12Mode = ‘rel’
DetSAngPlRatio = 0.01
DetEtendOnLOSNP = 20
DetEtendOnLOSModes = [‘trapz’]
DetEtendOnLOSLd = {‘ls’:’solid’,’c’:’k’,’lw’:2}</p>
<p>DetSAngPlot = ‘Int’
DetSAngPlotMode = ‘scatter’
DetSAngPlotd = {‘cmap’:plt.cm.YlOrRd}
DetSAngPlotLvl = 20</p>
<p>DetSliceAGdR = 0.005
DetSliceAGdY = 0.005
DetSliceAGdX = 0.01
DetSliceAGdTheta = np.pi/512.
DetSliceAGdZ = 0.005
DetSliceNbd = {‘scatter’:{‘cmap’:plt.cm.Greys,’marker’:’s’,’edgecolors’:’None’,’s’:10},</p>
<blockquote>
<div><p>‘contour’:{‘cmap’:plt.cm.Greys},
‘contourf’:{‘cmap’:plt.cm.Greys},
‘imshow’:{‘cmap’:plt.cm.Greys}}</p>
</div></blockquote>
<dl class="simple">
<dt>DetSliceSAd = {‘scatter’:{‘cmap’:plt.cm.YlOrRd,’marker’:’s’,’edgecolors’:’None’,’s’:10, ‘vmin’:0},</dt><dd><p>‘contour’:{‘cmap’:plt.cm.YlOrRd, ‘vmin’:0},
‘contourf’:{‘cmap’:plt.cm.YlOrRd, ‘vmin’:0},
‘imshow’:{‘cmap’:plt.cm.YlOrRd, ‘vmin’:0}}</p>
</dd>
</dl>
<p>DetPolProjNTheta = 50
DetPolProjNZ = 25
DetSAngColis = True</p>
<p>GDetEtendMdA = {‘ls’:’None’,’c’:’k’,’lw’:2,’marker’:’+’}
GDetEtendMdR = {‘ls’:’None’,’c’:’b’,’lw’:2,’marker’:’x’}
GDetEtendMdS = {‘ls’:’None’,’c’:’g’,’lw’:2,’marker’:’o’}
GDetEtendMdP = {‘ls’:’None’,’c’:’r’,’lw’:2,’marker’:’*’}</p>
<p>GDetSigd = {‘ls’:’solid’,’c’:’k’,’lw’:2,’marker’:’+’}</p>
<p>Apertdict = dict(Lax=None, Proj=’All’, Elt=’PV’, EltVes=’’, Leg=’’, LVIn=ApLVin, Pdict=ApPd, Vdict=ApVd, Vesdict=Vesdict, LegDict=TorLegd, draw=True, Test=True)
#Detdict =</p>
<p># ————– Figures ————————</p>
<dl>
<dt>def Plot_SAng_Plane_DefAxes(fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (10,8,80,’w’)
axPos = [0.05, 0.05, 0.9, 0.9]
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
ax = f.add_axes(axPos,facecolor=axCol,projection=’3d’)
ax.set_xlabel(r”X1 (m)”)
ax.set_ylabel(r”X2 (m)”)
ax.set_zlabel(r”$Omega$ (sr)”)
return ax</p>
</dd>
<dt>def Plot_Etendue_AlongLOS_DefAxes(kMode=’rel’,fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (14,8,80,’w’)
axPos = [0.06, 0.08, 0.70, 0.86]
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
ax = f.add_axes(axPos,frameon=True,facecolor=axCol)
if kMode.lower()==’rel’:</p>
<blockquote>
<div><p>ax.set_xlabel(r”Rel. length (adim.)”)</p>
</div></blockquote>
<dl class="simple">
<dt>else:</dt><dd><p>ax.set_xlabel(r”Length (m)”)</p>
</dd>
</dl>
<p>ax.set_ylabel(r”Etendue ($sr.m^2$)”)
return ax</p>
</dd>
<dt>def Plot_CrossSlice_SAngNb_DefAxes(VType=’Tor’, fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (15,8,80,’w’)
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
axSAng = f.add_axes([0.05, 0.06, 0.40, 0.85],frameon=True,facecolor=axCol)
axNb = f.add_axes([0.60, 0.06, 0.40, 0.85],frameon=True,facecolor=axCol)
if VType==’Tor’:</p>
<blockquote>
<div><p>axSAng.set_xlabel(r”R (m)”),    axNb.set_xlabel(r”R (m)”)</p>
</div></blockquote>
<dl class="simple">
<dt>elif VType==’Lin’:</dt><dd><p>axSAng.set_xlabel(r”Y (m)”),    axNb.set_xlabel(r”Y (m)”)</p>
</dd>
</dl>
<p>axSAng.set_ylabel(r”Z (m)”),      axNb.set_ylabel(r”Z (m)”)
axSAng.set_aspect(aspect=”equal”, adjustable=’datalim’)
axNb.set_aspect(aspect=”equal”, adjustable=’datalim’)
return axSAng, axNb</p>
</dd>
<dt>def Plot_HorSlice_SAngNb_DefAxes(fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (15,8,80,’w’)
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
axSAng = f.add_axes([0.07, 0.12, 0.35, 0.8],frameon=True,facecolor=axCol)
axNb = f.add_axes([0.55, 0.12, 0.35, 0.8],frameon=True,facecolor=axCol)
axSAng.set_xlabel(r”X (m)”),    axSAng.set_ylabel(r”Y (m)”)
axNb.set_xlabel(r”X (m)”),      axNb.set_ylabel(r”Y (m)”)
axSAng.set_aspect(aspect=”equal”, adjustable=’datalim’)
axNb.set_aspect(aspect=”equal”, adjustable=’datalim’)
return axSAng, axNb</p>
</dd>
<dt>def Plot_Etendues_GDetect_DefAxes(fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (18,8,80,’w’)
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
ax = f.add_axes([0.05,0.1,0.85,0.80],frameon=True,facecolor=axCol)
ax.set_xlabel(r””)
ax.set_ylabel(r”Etendue (sr.m^2)”)
return ax</p>
</dd>
<dt>def Plot_Sig_GDetect_DefAxes(fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
(fW,fH,fdpi,axCol) = (11.69,8.27,80,’w’) if a4 else (18,8,80,’w’)
f = plt.figure(facecolor=”w”,figsize=(fW,fH),dpi=fdpi)
ax = f.add_axes([0.05,0.1,0.85,0.80],frameon=True,facecolor=axCol)
ax.set_xlabel(r””)
ax.set_ylabel(r”Signal (W)”)
return ax</p>
</dd>
</dl>
<p>#Ldict_mlab_Def = {‘color’:(0.,0.,0.),’tube_radius’:None}
#Mdict_mlab_Def = {‘color’:(0.,0.,0.),’line_width’:1,’mode’:’sphere’}
#Dict_3D_mlab_Tor_Def = {‘color’:(0.8,0.8,0.8),’opacity’:0.15,’transparent’:False,’scale_factor’:0.1}</p>
<dl>
<dt>def Plot_GDetect_Resolution_DefAxes(VType=’Tor’, fs=None, wintit=’tofu’):</dt><dd><p>axCol, fdpi = ‘w’, 80
if fs is None:</p>
<blockquote>
<div><p>fs = (16,8) if Mode.lower()==’all’ else (6,8)</p>
</div></blockquote>
<dl class="simple">
<dt>elif type(fs) is str and fs==’a4’:</dt><dd><p>fs = (11.69,8.27) if Mode.lower()==’all’ else (8.27,11.69)</p>
</dd>
</dl>
<p>f = plt.figure(facecolor=”w”, figsize=fs, dpi=fdpi)
axCol = “w”
(fW,fH) = (11.69,8.27) if a4 else (16,10)
f = plt.figure(figsize=(fW,fH),facecolor=axCol)
ax1 = f.add_axes([0.05, 0.06, 0.32, 0.80], frameon=True, facecolor=axCol)
ax2 = f.add_axes([0.50, 0.55, 0.47, 0.40], frameon=True, facecolor=axCol)
ax3 = f.add_axes([0.50, 0.06, 0.47, 0.40], frameon=True, facecolor=axCol)
X1 = r”R (m)” if VType==’Tor’ else r”Y (m)”
ax1.set_xlabel(X1)
ax1.set_ylabel(r”Z (m)”)
ax2.set_xlabel(r”size (a.u.)”)
ax2.set_ylabel(r”Signal (mW)”)
ax3.set_xlabel(r”Channels index (from 0)”)
ax3.set_ylabel(r”Signal (mW)”)
ax1.set_aspect(aspect=’equal’,adjustable=’datalim’)
return ax1, ax2, ax3</p>
</dd>
</dl>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tofu.geom._def._labelpad">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._def.</span></span><span class="sig-name descname"><span class="pre">_labelpad</span></span><em class="property"> <span class="pre">=</span> <span class="pre">0</span></em><a class="headerlink" href="#tofu.geom._def._labelpad" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Defaults settings generic</p>
</div></blockquote>
</dd></dl>

</section>
<section id="module-tofu.geom._def_config">
<span id="tofu-geom-def-config-module"></span><h2>tofu.geom._def_config module<a class="headerlink" href="#module-tofu.geom._def_config" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-tofu.geom._distance_tools">
<span id="tofu-geom-distance-tools-module"></span><h2>tofu.geom._distance_tools module<a class="headerlink" href="#module-tofu.geom._distance_tools" title="Permalink to this headline">¶</a></h2>
</section>
<section id="id47">
<h2>tofu.geom._distance_tools module<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-2"></span></section>
<section id="module-tofu.geom._openmp_tools">
<span id="tofu-geom-openmp-tools-module"></span><h2>tofu.geom._openmp_tools module<a class="headerlink" href="#module-tofu.geom._openmp_tools" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._openmp_tools.get_effective_num_threads">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._openmp_tools.</span></span><span class="sig-name descname"><span class="pre">get_effective_num_threads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._openmp_tools.get_effective_num_threads" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on Scikit-learn:  scikit-learn/sklearn/utils/_openmp_helpers.pyx
Determine the effective number of threads to be used for OpenMP calls</p>
<blockquote>
<div><ul>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">None</span></code>,
- if the <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> environment variable is set, return</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">openmp.omp_get_max_threads()</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>otherwise return the minimum between <code class="docutils literal notranslate"><span class="pre">openmp.omp_get_max_threads()</span></code>
and the number of cpus, taking cgroups quotas into account. Cgroups
quotas can typically be set by tools such as Docker.</p></li>
</ul>
<p>The result of <code class="docutils literal notranslate"><span class="pre">omp_get_max_threads</span></code> can be influenced by environment
variable <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> or at runtime by <code class="docutils literal notranslate"><span class="pre">omp_set_num_threads</span></code>.</p>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, return this as the maximal number of threads for
parallel OpenMP calls.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>, return the maximal number of threads minus
<code class="docutils literal notranslate"><span class="pre">|n_threads</span> <span class="pre">+</span> <span class="pre">1|</span></code>. In particular <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">-1</span></code> will use as many
threads as there are available cores on the machine.</p></li>
<li><p>Raise a ValueError for <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p></li>
</ul>
<p>If scikit-learn is built without OpenMP support, always return 1.</p>
</div></blockquote>
</dd></dl>

</section>
<section id="id48">
<h2>tofu.geom._openmp_tools module<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-3"></span><dl class="py function">
<dt class="sig sig-object py" id="id49">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._openmp_tools.</span></span><span class="sig-name descname"><span class="pre">get_effective_num_threads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id49" title="Permalink to this definition">¶</a></dt>
<dd><p>Based on Scikit-learn:  scikit-learn/sklearn/utils/_openmp_helpers.pyx
Determine the effective number of threads to be used for OpenMP calls</p>
<blockquote>
<div><ul>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">None</span></code>,
- if the <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> environment variable is set, return</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">openmp.omp_get_max_threads()</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>otherwise return the minimum between <code class="docutils literal notranslate"><span class="pre">openmp.omp_get_max_threads()</span></code>
and the number of cpus, taking cgroups quotas into account. Cgroups
quotas can typically be set by tools such as Docker.</p></li>
</ul>
<p>The result of <code class="docutils literal notranslate"><span class="pre">omp_get_max_threads</span></code> can be influenced by environment
variable <code class="docutils literal notranslate"><span class="pre">OMP_NUM_THREADS</span></code> or at runtime by <code class="docutils literal notranslate"><span class="pre">omp_set_num_threads</span></code>.</p>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, return this as the maximal number of threads for
parallel OpenMP calls.</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">&lt;</span> <span class="pre">0</span></code>, return the maximal number of threads minus
<code class="docutils literal notranslate"><span class="pre">|n_threads</span> <span class="pre">+</span> <span class="pre">1|</span></code>. In particular <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">-1</span></code> will use as many
threads as there are available cores on the machine.</p></li>
<li><p>Raise a ValueError for <code class="docutils literal notranslate"><span class="pre">n_threads</span> <span class="pre">=</span> <span class="pre">0</span></code>.</p></li>
</ul>
<p>If scikit-learn is built without OpenMP support, always return 1.</p>
</div></blockquote>
</dd></dl>

</section>
<section id="module-tofu.geom._plot">
<span id="tofu-geom-plot-module"></span><h2>tofu.geom._plot module<a class="headerlink" href="#module-tofu.geom._plot" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Config_phithetaproj_dist">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Config_phithetaproj_dist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">refpt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indStruct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distonly</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invertx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Config_phithetaproj_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Config_phithetaproj_dist" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Config_plot_solidangle_map_particle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Config_plot_solidangle_map_particle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_traj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ptsRZ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reseff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Config_plot_solidangle_map_particle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Config_plot_solidangle_map_particle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.GLOS_plot_Sino">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">GLOS_plot_Sino</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">GLos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Cross'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dVes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'edgecolor':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'facecolor':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'linestyle':</span> <span class="pre">'solid',</span> <span class="pre">'linewidth':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#GLOS_plot_Sino"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.GLOS_plot_Sino" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Get_FieldsFrom_LLOS">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Get_FieldsFrom_LLOS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Fields</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Get_FieldsFrom_LLOS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Get_FieldsFrom_LLOS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Plot_Impact_3DPoly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Plot_Impact_3DPoly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Pdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.4),</span> <span class="pre">'linestyle':</span> <span class="pre">'solid',</span> <span class="pre">'linewidth':</span> <span class="pre">0}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Plot_Impact_3DPoly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Plot_Impact_3DPoly" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting the toroidal projection of a Ves instance</p>
<p>D. VEZINET, Aug. 2014
Inputs :</p>
<blockquote>
<div><p>T           A Ves instance
Leg         A str (the legend label to be used if T is not a Ves instance)
ax          A plt.Axes instance (if given) on which to plot the projection space, otherwise (‘None’) a new figure/axes is created
Dict        A dictionnary specifying the style of the boundary polygon plot
dLeg        A dictionnary specifying the style of the legend box</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs :</dt><dd><p>ax          The plt.Axes instance on which the poloidal plot was performed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Plot_Impact_PolProjPoly">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Plot_Impact_PolProjPoly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Plot_Impact_PolProjPoly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Plot_Impact_PolProjPoly" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting the toroidal projection of a Ves instance</p>
<p>D. VEZINET, Aug. 2014
Inputs :</p>
<blockquote>
<div><p>T           A Ves instance
Leg         A str (the legend label to be used if T is not a Ves instance)
ax          A plt.Axes instance (if given) on which to plot the projection space, otherwise (‘None’) a new figure/axes is created
Dict        A dictionnary specifying the style of the boundary polygon plot
dLeg        A dictionnary specifying the style of the legend box</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs :</dt><dd><p>ax          The plt.Axes instance on which the poloidal plot was performed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Rays_plot">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Rays_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">GLos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LDIORP'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtO</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Rays_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Rays_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Rays_plot_touch">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Rays_plot_touch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cam</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lengths'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cdef</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">10]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'touch'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt_ch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'02.0f'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labelpad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lcch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[(0.8392156862745098,</span> <span class="pre">0.15294117647058825,</span> <span class="pre">0.1568627450980392),</span> <span class="pre">(0.5803921568627451,</span> <span class="pre">0.403921568627451,</span> <span class="pre">0.7411764705882353),</span> <span class="pre">(0.5490196078431373,</span> <span class="pre">0.33725490196078434,</span> <span class="pre">0.29411764705882354),</span> <span class="pre">(1.0,</span> <span class="pre">0.596078431372549,</span> <span class="pre">0.5882352941176471),</span> <span class="pre">(0.7725490196078432,</span> <span class="pre">0.6901960784313725,</span> <span class="pre">0.8352941176470589),</span> <span class="pre">(0.7686274509803922,</span> <span class="pre">0.611764705882353,</span> <span class="pre">0.5803921568627451)]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Rays_plot_touch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Rays_plot_touch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot.Struct_plot">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">Struct_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dBs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dBv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dVect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dIHor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dBsHor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dBvHor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#Struct_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot.Struct_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the projections of a list of Struct subclass instances</p>
<p>D. VEZINET, Aug. 2014
Inputs :</p>
<blockquote>
<div><p>V           A Ves instance
Nstep      An int (the number of points for evaluation of theta by np.linspace)
axP         A plt.Axes instance (if given) on which to plot the poloidal projection, otherwise (‘None’) a new figure/axes is created
axT         A plt.Axes instance (if given) on which to plot the toroidal projection, otherwise (‘None’) a new figure/axes is created
Tdict       A dictionnary specifying the style of the polygon plot
dLeg     A dictionnary specifying the style of the legend box (if None =&gt; no legend)</p>
</div></blockquote>
<dl class="simple">
<dt>Outputs :</dt><dd><p>axP          The plt.Axes instance on which the poloidal plot was performed
axT          The plt.Axes instance on which the toroidal plot was performed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Cam12D_plot_touch_init">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Cam12D_plot_touch_init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Cam12D_plot_touch_init"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Cam12D_plot_touch_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Cam12D_plottouch">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Cam12D_plottouch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cam</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quant</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lengths'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nchMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lcch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[(0.8392156862745098,</span> <span class="pre">0.15294117647058825,</span> <span class="pre">0.1568627450980392),</span> <span class="pre">(0.5803921568627451,</span> <span class="pre">0.403921568627451,</span> <span class="pre">0.7411764705882353),</span> <span class="pre">(0.5490196078431373,</span> <span class="pre">0.33725490196078434,</span> <span class="pre">0.29411764705882354),</span> <span class="pre">(1.0,</span> <span class="pre">0.596078431372549,</span> <span class="pre">0.5882352941176471),</span> <span class="pre">(0.7725490196078432,</span> <span class="pre">0.6901960784313725,</span> <span class="pre">0.8352941176470589),</span> <span class="pre">(0.7686274509803922,</span> <span class="pre">0.611764705882353,</span> <span class="pre">0.5803921568627451)]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cbck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[1,</span> <span class="pre">5]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">4</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plotmethod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'imshow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fmt_ch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'01.0f'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dlab</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labelpad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connect</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Cam12D_plottouch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Cam12D_plottouch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._LOS_calc_InOutPolProj_Debug">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_LOS_calc_InOutPolProj_Debug</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PIns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">POuts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nptstot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_LOS_calc_InOutPolProj_Debug"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._LOS_calc_InOutPolProj_Debug" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Plot_3D_plt_Ves">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Plot_3D_plt_Ves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'P'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.15707963267948966</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Pdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'antialiased':</span> <span class="pre">False,</span> <span class="pre">'color':</span> <span class="pre">(0.8,</span> <span class="pre">0.8,</span> <span class="pre">0.8,</span> <span class="pre">1.0),</span> <span class="pre">'cstride':</span> <span class="pre">1,</span> <span class="pre">'linewidth':</span> <span class="pre">0,</span> <span class="pre">'rstride':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LegDict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Plot_3D_plt_Ves"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Plot_3D_plt_Ves" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Plot_CrossProj_Ves">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Plot_CrossProj_Ves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PIBsBvV'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Pdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Idict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'dashed',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bsdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'dashed',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bvdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'dashed',</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Vdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'color':</span> <span class="pre">'r',</span> <span class="pre">'scale':</span> <span class="pre">10}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LegDict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Plot_CrossProj_Ves"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Plot_CrossProj_Ves" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the poloidal projection of a Ves instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>V</strong> (<em>tfg.Ves / tfg.Struct</em>) – A Ves instance</p></li>
<li><p><strong>ax</strong> (<em>None / plt.Axes</em>) – A plt.Axes instance (if given) on which to plot, otherwise (‘None’) a new figure/axes is created</p></li>
<li><p><strong>Pdict</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><em>dict</em></a>) – A dictionnary specifying the style of the polygon plot</p></li>
<li><p><strong>LegDict</strong> (<em>None / dict</em>) – A dictionnary specifying the style of the legend box (if None =&gt; no legend)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ax          The plt.Axes instance on which the plot was performed</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Plot_HorProj_Ves">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Plot_HorProj_Ves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">V</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Nstep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Pdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Idict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'dashed'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bsdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'b',</span> <span class="pre">'ls':</span> <span class="pre">'dashed'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bvdict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'g',</span> <span class="pre">'ls':</span> <span class="pre">'dashed'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LegDict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Plot_HorProj_Ves"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Plot_HorProj_Ves" title="Permalink to this definition">¶</a></dt>
<dd><p>Plotting the toroidal projection of a Ves instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance</strong> (<em>V           A Ves</em>) – </p></li>
<li><p><strong>np.linspace</strong><strong>)</strong> (<em>Nstep      An int</em><em> (</em><em>the number of points for evaluation of theta by</em>) – </p></li>
<li><p><strong>plot</strong> (<em>Tdict       A dictionnary specifying the style of the polygon</em>) – </p></li>
<li><p><strong>created</strong> (<em>otherwise</em><em> (</em><em>'None'</em><em>) </em><em>a new figure/axes is</em>) – </p></li>
<li><p><strong>plot</strong> – </p></li>
<li><p><strong>legend</strong><strong>)</strong> (<em>LegDict     A dictionnary specifying the style of the legend box</em><em> (</em><em>if None =&gt; no</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>ax          The plt.Axes instance on which the plot was performed</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Plot_Sinogram_3D">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Plot_Sinogram_3D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LegDict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Plot_Sinogram_3D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Plot_Sinogram_3D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Plot_Sinogram_CrossProj">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Plot_Sinogram_CrossProj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ang</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'theta'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AngUnit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Sketch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">LegDict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Plot_Sinogram_CrossProj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Plot_Sinogram_CrossProj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Rays_plot_3D">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Rays_plot_3D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LDIORr'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtO</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Rays_plot_3D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Rays_plot_3D" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Rays_plot_Cross">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Rays_plot_Cross</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LDIORP'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtO</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Rays_plot_Cross"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Rays_plot_Cross" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Rays_plot_Hor">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Rays_plot_Hor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">L</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lplot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tot'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Elt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'LDIORP'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'lw':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtD</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtI</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtO</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dPtP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'c':</span> <span class="pre">'k',</span> <span class="pre">'ls':</span> <span class="pre">'None',</span> <span class="pre">'lw':</span> <span class="pre">2,</span> <span class="pre">'marker':</span> <span class="pre">'x',</span> <span class="pre">'markersize':</span> <span class="pre">8,</span> <span class="pre">'mew':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dLeg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'bbox_to_anchor':</span> <span class="pre">(1.01,</span> <span class="pre">1),</span> <span class="pre">'borderaxespad':</span> <span class="pre">0.0,</span> <span class="pre">'frameon':</span> <span class="pre">False,</span> <span class="pre">'loc':</span> <span class="pre">2,</span> <span class="pre">'ncol':</span> <span class="pre">1,</span> <span class="pre">'prop':</span> <span class="pre">{'size':</span> <span class="pre">10}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'tofu-1.4.15</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">report</span> <span class="pre">issues</span> <span class="pre">/</span> <span class="pre">requests</span> <span class="pre">at</span> <span class="pre">https://github.com/ToFuProject/tofu/issues'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Rays_plot_Hor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Rays_plot_Hor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._Struct_plot_format">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_Struct_plot_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ss</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_Struct_plot_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._Struct_plot_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._check_Lax">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_check_Lax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_check_Lax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._check_Lax" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot._get_LLOS_Leg">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot.</span></span><span class="sig-name descname"><span class="pre">_get_LLOS_Leg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">GLLOS</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Crit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PreExp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">PostExp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Log</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'any'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">InOut</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'In'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot.html#_get_LLOS_Leg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot._get_LLOS_Leg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tofu.geom._plot_optics">
<span id="tofu-geom-plot-optics-module"></span><h2>tofu.geom._plot_optics module<a class="headerlink" href="#module-tofu.geom._plot_optics" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dleg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_approx_detector_params">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_approx_detector_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Rrow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame_cent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nn</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_approx_detector_params"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_approx_detector_params" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_braggangle_from_xixj">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_braggangle_from_xixj</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">braggunits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angunits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">leg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwdargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_braggangle_from_xixj"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_braggangle_from_xixj" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_focal_error_summed">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_focal_error_summed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_lambda</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddist</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddist0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">di0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dj0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtheta0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpsi0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tilt0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle_nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tangent_to_rowland</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_lamb_interv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_focal_error_summed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_focal_error_summed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_johannerror">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_johannerror</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_phi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_lamb_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_phi_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angunits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_johannerror"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_johannerror" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_line_tracing_on_det">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_line_tracing_on_det</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lamb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi_err</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj_err</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">johann</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dleg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_line_tracing_on_det"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_line_tracing_on_det" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_raytracing_from_lambpts">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_raytracing_from_lambpts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ptscryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ptsdet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_cent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ei</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det_ej</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_raytracing_from_lambpts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_raytracing_from_lambpts" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_rockingcurve">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_rockingcurve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lamb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sigma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ang_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axtit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_rockingcurve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_rockingcurve" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics.CrystalBragg_plot_xixj_from_braggangle">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">CrystalBragg_plot_xixj_from_braggangle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bragg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#CrystalBragg_plot_xixj_from_braggangle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics.CrystalBragg_plot_xixj_from_braggangle" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics._CrystalBragg_plot">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">_CrystalBragg_plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outline</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiver_cmap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#_CrystalBragg_plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics._CrystalBragg_plot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics._CrystalBragg_plot_check">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">_CrystalBragg_plot_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dcryst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">det</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">element</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts_summit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pts2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rays_npts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dleg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_non_parallelism</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#_CrystalBragg_plot_check"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics._CrystalBragg_plot_check" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._plot_optics._check_projdax_mpl">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._plot_optics.</span></span><span class="sig-name descname"><span class="pre">_check_projdax_mpl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">proj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dmargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wintit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/_plot_optics.html#_check_projdax_mpl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom._plot_optics._check_projdax_mpl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tofu.geom._raytracing_tools">
<span id="tofu-geom-raytracing-tools-module"></span><h2>tofu.geom._raytracing_tools module<a class="headerlink" href="#module-tofu.geom._raytracing_tools" title="Permalink to this headline">¶</a></h2>
</section>
<section id="id50">
<h2>tofu.geom._raytracing_tools module<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-4"></span></section>
<section id="module-tofu.geom._sampling_tools">
<span id="tofu-geom-sampling-tools-module"></span><h2>tofu.geom._sampling_tools module<a class="headerlink" href="#module-tofu.geom._sampling_tools" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._sampling_tools.get_nb_dmode">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._sampling_tools.</span></span><span class="sig-name descname"><span class="pre">get_nb_dmode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._sampling_tools.get_nb_dmode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom._sampling_tools.get_nb_imode">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._sampling_tools.</span></span><span class="sig-name descname"><span class="pre">get_nb_imode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tofu.geom._sampling_tools.get_nb_imode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="id51">
<h2>tofu.geom._sampling_tools module<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-5"></span><dl class="py function">
<dt class="sig sig-object py" id="id52">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._sampling_tools.</span></span><span class="sig-name descname"><span class="pre">get_nb_dmode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id52" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id53">
<span class="sig-prename descclassname"><span class="pre">tofu.geom._sampling_tools.</span></span><span class="sig-name descname"><span class="pre">get_nb_imode</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id53" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-tofu.geom._vignetting_tools">
<span id="tofu-geom-vignetting-tools-module"></span><h2>tofu.geom._vignetting_tools module<a class="headerlink" href="#module-tofu.geom._vignetting_tools" title="Permalink to this headline">¶</a></h2>
</section>
<section id="id54">
<h2>tofu.geom._vignetting_tools module<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-6"></span></section>
<section id="module-tofu.geom.openmp_enabled">
<span id="tofu-geom-openmp-enabled-module"></span><h2>tofu.geom.openmp_enabled module<a class="headerlink" href="#module-tofu.geom.openmp_enabled" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.openmp_enabled.is_openmp_enabled">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.openmp_enabled.</span></span><span class="sig-name descname"><span class="pre">is_openmp_enabled</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/openmp_enabled.html#is_openmp_enabled"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.openmp_enabled.is_openmp_enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether this package was built with OpenMP support.</p>
</dd></dl>

</section>
<section id="module-tofu.geom.utils">
<span id="tofu-geom-utils-module"></span><h2>tofu.geom.utils module<a class="headerlink" href="#module-tofu.geom.utils" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.compute_RaysCones">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">compute_RaysCones</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">us</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.03490658503988659</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#compute_RaysCones"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.compute_RaysCones" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.coords_transform">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">coords_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords_in</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'11'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coords_out</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'11'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#coords_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.coords_transform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.create_CamLOS1D">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">create_CamLOS1D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">case=None,</span> <span class="pre">pinhole=None,</span> <span class="pre">P=None,</span> <span class="pre">focal=None,</span> <span class="pre">F=None,</span> <span class="pre">sensor_nb=None,</span> <span class="pre">N12=None,</span> <span class="pre">sensor_size=None,</span> <span class="pre">D12=None,</span> <span class="pre">orientation=None,</span> <span class="pre">angs=None,</span> <span class="pre">config=None,</span> <span class="pre">Etendues=None,</span> <span class="pre">etendues=None,</span> <span class="pre">Surfaces=None,</span> <span class="pre">surfaces=None,</span> <span class="pre">Exp=None,</span> <span class="pre">Diag=None,</span> <span class="pre">Name=None,</span> <span class="pre">nD=None,</span> <span class="pre">dchans=None,</span> <span class="pre">color=None,</span> <span class="pre">method=None,</span> <span class="pre">nIn=None,</span> <span class="pre">VType='Tor',</span> <span class="pre">dcam={'V1':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1,</span> <span class="pre">1],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">-3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V10':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[5,</span> <span class="pre">2],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V100':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[20,</span> <span class="pre">5],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V1000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[50,</span> <span class="pre">20],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V10000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[125,</span> <span class="pre">80],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V100000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[500,</span> <span class="pre">200],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V1000000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1,</span> <span class="pre">1],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA10':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[5,</span> <span class="pre">2],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA100':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[20,</span> <span class="pre">5],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[50,</span> <span class="pre">20],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA10000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[125,</span> <span class="pre">80],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA100000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[500,</span> <span class="pre">200],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1000000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'testV':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.4,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]}},</span> <span class="pre">defRY=None,</span> <span class="pre">Lim=None,</span> <span class="pre">returnas=&lt;class</span> <span class="pre">'object'&gt;,</span> <span class="pre">SavePath='./'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#create_CamLOS1D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.create_CamLOS1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pinhole CamLOS1D</p>
<dl>
<dt>Typical use case:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tofu</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;WEST&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cam1d</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_CamLOS1D</span><span class="p">(</span>
<span class="go">    pinhole=[3., 0., 0.],       # pinhole position [X, Y, Z] [m]</span>
<span class="go">    focal=0.1,                  # pinhole-sensors distance [m]</span>
<span class="go">    sensor_nb=100,              # number of sensors on sensor plane</span>
<span class="go">    sensor_size=0.1,            # size of sensor plane [m]</span>
<span class="go">    orientation=[np.pi, 0., 0.],# 3 angles orienting whole camera [rad]</span>
<span class="go">    config=conf,                # configuration (for computing LOS)</span>
<span class="go">    Etendues=None,              # Etendues (optional)</span>
<span class="go">    Surfaces=None,              # Surfaces (optional) [m^2]</span>
<span class="go">    Exp=&#39;WEST&#39;,                 # Experiment</span>
<span class="go">    Diag=&#39;Bolo&#39;,                # Diagnostic</span>
<span class="go">    Name=&#39;Cam1&#39;,                # Name of this particular camera</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cam2d</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_CamLOS2D</span><span class="p">(</span>
<span class="go">    pinhole=[3., 0., 0.],       # pinhole position [X, Y, Z] [m]</span>
<span class="go">    focal=0.1,                  # pinhole-sensors distance [m]</span>
<span class="go">    sensor_nb=[100, 100],       # number of sensors on sensor plane</span>
<span class="go">    sensor_size=[0.1, 0.1],     # size of sensor plane [m]</span>
<span class="go">    orientation=[np.pi, 0., 0.],# 3 angles orienting whole camera [rad]</span>
<span class="go">    config=conf,                # configuration (for computing LOS)</span>
<span class="go">    Etendues=None,              # Etendues (optional)</span>
<span class="go">    Surfaces=None,              # Surfaces (optional) [m^2]</span>
<span class="go">    Exp=&#39;WEST&#39;,                 # Experiment</span>
<span class="go">    Diag=&#39;Bolo&#39;,                # Diagnostic</span>
<span class="go">    Name=&#39;Cam1&#39;,                # Name of this particular camera</span>
<span class="go">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>In tofu, a CamLOS is a camera described as a set of Lines of Sight (LOS),
as opposed to a Cam, where the Volume of Sight (VOS) of all pixels are
computed in 3D. The CamLOS is then a simplified approximation of the Cam.
It can be:</p>
<blockquote>
<div><ul class="simple">
<li><p>1D : like when all LOS are included in a common plane</p></li>
<li><p>2D : like a regular everyday camera, producing a 2D image</p></li>
</ul>
</div></blockquote>
<p>For a pinhole camera, all LOS pass through a common point (pinhole)</p>
<p>This function provides an easy way to create a pinhole CamLOS1D
In tofu, LOS are described as semi-lines using:</p>
<blockquote>
<div><ul class="simple">
<li><p>a starting point (D)</p></li>
<li><p>a unit vector (u)</p></li>
</ul>
</div></blockquote>
<p>All coordinates are 3D cartesian (X,Y,Z)</p>
<dl class="simple">
<dt>Here, you simply need to provide, either:</dt><dd><ul class="simple">
<li><p>the name of a standard test case</p></li>
<li><dl class="simple">
<dt>a set of geometrical parameters:</dt><dd><ul>
<li><p>pinhole: throught which the camera axis passes</p></li>
<li><p>focal: distance between pinhole and sensor plane</p></li>
<li><p>size: dimensions of the sensor planendicular to the camera axis</p></li>
<li><p>N12 : number of pixels (LOS)</p></li>
<li><p>angs: 3 angles defining the orientation of the camera</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>The computed set of LOS, optionnaly associated to a Config, can then be
returned as:</p>
<blockquote>
<div><ul class="simple">
<li><p>a tofu object (i.e.: a CamLOS1D)</p></li>
<li><p>a set of starting points (D) and unit vectors (u)</p></li>
<li><p>a set of starting points (D), a pinhole, and and the coordinates of D</p></li>
</ul>
<p>in the camera frame</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.create_CamLOS2D">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">create_CamLOS2D</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">case=None,</span> <span class="pre">pinhole=None,</span> <span class="pre">P=None,</span> <span class="pre">focal=None,</span> <span class="pre">F=None,</span> <span class="pre">sensor_nb=None,</span> <span class="pre">N12=None,</span> <span class="pre">sensor_size=None,</span> <span class="pre">D12=None,</span> <span class="pre">orientation=None,</span> <span class="pre">angs=None,</span> <span class="pre">config=None,</span> <span class="pre">Etendues=None,</span> <span class="pre">etendues=None,</span> <span class="pre">Surfaces=None,</span> <span class="pre">surfaces=None,</span> <span class="pre">Exp=None,</span> <span class="pre">Diag=None,</span> <span class="pre">Name=None,</span> <span class="pre">nD=None,</span> <span class="pre">dchans=None,</span> <span class="pre">color=None,</span> <span class="pre">method=None,</span> <span class="pre">nIn=None,</span> <span class="pre">VType='Tor',</span> <span class="pre">dcam={'V1':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1,</span> <span class="pre">1],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">-3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V10':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[5,</span> <span class="pre">2],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V100':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[20,</span> <span class="pre">5],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V1000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[50,</span> <span class="pre">20],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V10000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[125,</span> <span class="pre">80],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V100000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[500,</span> <span class="pre">200],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'V1000000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1,</span> <span class="pre">1],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA10':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[5,</span> <span class="pre">2],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA100':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[20,</span> <span class="pre">5],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[50,</span> <span class="pre">20],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA10000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[125,</span> <span class="pre">80],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA100000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[500,</span> <span class="pre">200],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'VA1000000':</span> <span class="pre">{'D12':</span> <span class="pre">[0.4,</span> <span class="pre">0.3],</span> <span class="pre">'F':</span> <span class="pre">0.1,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[4.9,</span> <span class="pre">-6.9,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.75,</span> <span class="pre">1.0,</span> <span class="pre">0.0]},</span> <span class="pre">'testV':</span> <span class="pre">{'D12':</span> <span class="pre">[0.3,</span> <span class="pre">0.1],</span> <span class="pre">'F':</span> <span class="pre">0.4,</span> <span class="pre">'N12':</span> <span class="pre">[1600,</span> <span class="pre">625],</span> <span class="pre">'P':</span> <span class="pre">[1.5,</span> <span class="pre">3.2,</span> <span class="pre">0.0],</span> <span class="pre">'nIn':</span> <span class="pre">[-0.5,</span> <span class="pre">-1.0,</span> <span class="pre">0.0]}},</span> <span class="pre">defRY=None,</span> <span class="pre">Lim=None,</span> <span class="pre">returnas=&lt;class</span> <span class="pre">'object'&gt;,</span> <span class="pre">SavePath='./'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#create_CamLOS2D"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.create_CamLOS2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pinhole CamLOS2D</p>
<dl>
<dt>Typical use case:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tofu</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">load_config</span><span class="p">(</span><span class="s1">&#39;WEST&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cam1d</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_CamLOS1D</span><span class="p">(</span>
<span class="go">    pinhole=[3., 0., 0.],       # pinhole position [X, Y, Z] [m]</span>
<span class="go">    focal=0.1,                  # pinhole-sensors distance [m]</span>
<span class="go">    sensor_nb=100,              # number of sensors on sensor plane</span>
<span class="go">    sensor_size=0.1,            # size of sensor plane [m]</span>
<span class="go">    orientation=[np.pi, 0., 0.],# 3 angles orienting whole camera [rad]</span>
<span class="go">    config=conf,                # configuration (for computing LOS)</span>
<span class="go">    Etendues=None,              # Etendues (optional)</span>
<span class="go">    Surfaces=None,              # Surfaces (optional) [m^2]</span>
<span class="go">    Exp=&#39;WEST&#39;,                 # Experiment</span>
<span class="go">    Diag=&#39;Bolo&#39;,                # Diagnostic</span>
<span class="go">    Name=&#39;Cam1&#39;,                # Name of this particular camera</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cam2d</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">create_CamLOS2D</span><span class="p">(</span>
<span class="go">    pinhole=[3., 0., 0.],       # pinhole position [X, Y, Z] [m]</span>
<span class="go">    focal=0.1,                  # pinhole-sensors distance [m]</span>
<span class="go">    sensor_nb=[100, 100],       # number of sensors on sensor plane</span>
<span class="go">    sensor_size=[0.1, 0.1],     # size of sensor plane [m]</span>
<span class="go">    orientation=[np.pi, 0., 0.],# 3 angles orienting whole camera [rad]</span>
<span class="go">    config=conf,                # configuration (for computing LOS)</span>
<span class="go">    Etendues=None,              # Etendues (optional)</span>
<span class="go">    Surfaces=None,              # Surfaces (optional) [m^2]</span>
<span class="go">    Exp=&#39;WEST&#39;,                 # Experiment</span>
<span class="go">    Diag=&#39;Bolo&#39;,                # Diagnostic</span>
<span class="go">    Name=&#39;Cam1&#39;,                # Name of this particular camera</span>
<span class="go">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>In tofu, a CamLOS is a camera described as a set of Lines of Sight (LOS),
as opposed to a Cam, where the Volume of Sight (VOS) of all pixels are
computed in 3D. The CamLOS is then a simplified approximation of the Cam.
It can be:</p>
<blockquote>
<div><ul class="simple">
<li><p>1D : like when all LOS are included in a common plane</p></li>
<li><p>2D : like a regular everyday camera, producing a 2D image</p></li>
</ul>
</div></blockquote>
<p>For a pinhole camera, all LOS pass through a common point (pinhole)</p>
<p>This function provides an easy way to create a pinhole CamLOS2D
In tofu, LOS are described as semi-lines using:</p>
<blockquote>
<div><ul class="simple">
<li><p>a starting point (D)</p></li>
<li><p>a unit vector (u)</p></li>
</ul>
</div></blockquote>
<p>All coordinates are 3D cartesian (X,Y,Z)</p>
<dl class="simple">
<dt>Here, you simply need to provide, either:</dt><dd><ul class="simple">
<li><p>the name of a standard test case</p></li>
<li><dl class="simple">
<dt>a set of geometrical parameters:</dt><dd><ul>
<li><p>pinhole: throught which the camera axis passes</p></li>
<li><p>focal: distance between pinhole and sensor plane</p></li>
<li><p>size: dimensions of the sensor planendicular to the camera axis</p></li>
<li><p>N12 : number of pixels (LOS)</p></li>
<li><p>angs: 3 angles defining the orientation of the camera</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>The computed set of LOS, optionnaly associated to a Config, can then be
returned as:</p>
<blockquote>
<div><ul class="simple">
<li><p>a tofu object (i.e.: a CamLOS2D)</p></li>
<li><p>a set of starting points (D) and unit vectors (u)</p></li>
<li><p>a set of starting points (D), a pinhole, and and the coordinates of D</p></li>
</ul>
<p>in the camera frame</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.create_config">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">create_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Exp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Dummy'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Tor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Bump_posextent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.7853981633974483,</span> <span class="pre">0.7853981633974483]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">elong</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Dshape</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">divlow</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">divup</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SavePath</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/Applications/software/anaconda/python37/lib/python3.7/site-packages/tofu/geom/inputs'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#create_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.create_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create easily a tofu.geom.Config object</p>
<p>In tofu, a Config (short for geometrical configuration) refers to the 3D
geometry of a fusion device.
It includes, at least, a simple 2D polygon describing the first wall of the
fusion chamber, and can also include other structural elements (tiles,
limiters…) that can be non-axisymmetric.</p>
<p>To create a simple Config, provide either the name of a reference test
case, of a set of geometrical parameters (major radius, elongation…).</p>
<p>This is just a tool for fast testing, if you want to create a custom
config, use directly tofu.geom.Config and provide the parameters you want.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>case</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of a reference test case, if provided, this arguments is
sufficient, the others are ignored</p></li>
<li><p><strong>Exp</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The name of the experiment</p></li>
<li><p><strong>Type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The type of configuration (toroidal ‘Tor’ or linear ‘Lin’)</p></li>
<li><p><strong>Lim_Bump</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – The angular (poloidal) limits, in the cross-section of the extension of
the outer bumper</p></li>
<li><p><strong>R</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The major radius of the center of the cross-section</p></li>
<li><p><strong>r</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The minor radius of the cross-section</p></li>
<li><p><strong>elong</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – An elongation parameter (in [-1;1])</p></li>
<li><p><strong>Dshape</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – A parameter specifying the D-shape of the cross-section (in [-1;1])</p></li>
<li><p><strong>divlow</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – A flag specifying whether to include a lower divertor-like shape</p></li>
<li><p><strong>divup</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – A flag specifying whether to include an upper divertor-like shape</p></li>
<li><p><strong>nP</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – Number of points used to describe the cross-section polygon</p></li>
<li><p><strong>out</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – <dl class="simple">
<dt>FLag indicating whether to return:</dt><dd><ul>
<li><p>’dict’  : the polygons as a dictionary of np.ndarrays</p></li>
<li><p>’object’: the configuration as a tofu.geom.Config instance</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>returnas</strong> (<em>object / dict</em>) – <dl class="simple">
<dt>Flag indicating whether to return the config as:</dt><dd><ul>
<li><p>object: a Config instance</p></li>
<li><p>dict: a dict of Struct instances</p></li>
</ul>
</dd>
</dl>
</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – <dl class="simple">
<dt>Flag indicating whether to raise an error if a Struct cannot be loaded</dt><dd><p>Otherwise only raises a warning</p>
</dd>
</dl>
</p></li>
<li><p><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Absolute path where to find the test case data</p></li>
<li><p><strong>SavePath</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The default path used for saving Struct and Config objects returned by
the routine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>conf</strong> (<em>tofu.geom.Config / dict</em>) –</p>
<dl class="simple">
<dt>Depending on the value of parameter out, either:</dt><dd><ul class="simple">
<li><p>the tofu.geom.Config object created</p></li>
<li><p>a dictionary of the polygons and their pos/extent (if any)</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.get_X12fromflat">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">get_X12fromflat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X12</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x12u</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nx12</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#get_X12fromflat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.get_X12fromflat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.get_available_config">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">get_available_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dconfig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dconfig_shortcuts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">returnas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#get_available_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.get_available_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a table showing all pre-defined config</p>
<p>Each pre-defined config in tofu can be called by its unique name or
by a series of shortcuts / alterantive names refereing to the same unique
name. this feature is useful for retro-compatibility and for making sure a
standard name always refers to the latest (most detailed) available version
of the geometry.</p>
<p>Can also return the table as str</p>
<dl>
<dt>No input arg needed:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tofu</span> <span class="k">as</span> <span class="nn">tf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tf</span><span class="o">.</span><span class="n">geom</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_available_config</span><span class="p">()</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tofu.geom.utils.get_nIne1e2">
<span class="sig-prename descclassname"><span class="pre">tofu.geom.utils.</span></span><span class="sig-name descname"><span class="pre">get_nIne1e2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nIn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">e2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tofu/geom/utils.html#get_nIne1e2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tofu.geom.utils.get_nIne1e2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/tofu.geom.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2016-2021, Tofu contributors.<br/>
      Last updated on Nov 15, 2021.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>